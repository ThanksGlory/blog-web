<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>WindowInfo</title>
      <link href="/2024/09/18/WeChat/WindowInfo/"/>
      <url>/2024/09/18/WeChat/WindowInfo/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>有时候在开发小程序的时候会获取设备窗口信息，但是有些时候我们获取到的statusBarHeight为零，不知道是微信官方的BUG还是手机原因。出于该原因我们还是需要兼容一下写法：</p><h3 id="wx-getWindowInfo"><a href="#wx-getWindowInfo" class="headerlink" title="wx.getWindowInfo"></a>wx.getWindowInfo</h3><table><thead><tr><th align="left">属性</th><th align="left">类型</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">pixelRatio</td><td align="left">number</td><td align="left">设备像素比</td></tr><tr><td align="left">screenWidth</td><td align="left">number</td><td align="left">屏幕宽度，单位px</td></tr><tr><td align="left">screenHeight</td><td align="left">number</td><td align="left">屏幕高度，单位px</td></tr><tr><td align="left">windowWidth</td><td align="left">number</td><td align="left">可使用窗口宽度，单位px</td></tr><tr><td align="left">windowHeight</td><td align="left">number</td><td align="left">可使用窗口高度，单位px</td></tr><tr><td align="left">statusBarHeight</td><td align="left">number</td><td align="left">状态栏的高度，单位px</td></tr><tr><td align="left">safeArea</td><td align="left">SafeArea</td><td align="left">在竖屏正方向下的安全区域。部分机型没有安全区域概念，也不会返回 safeArea 字段，开发者需自行兼容。</td></tr><tr><td align="left">screenTop</td><td align="left">number</td><td align="left">窗口上边缘的y值</td></tr></tbody></table><h3 id="safeArea"><a href="#safeArea" class="headerlink" title="safeArea"></a>safeArea</h3><table><thead><tr><th align="left">结构属性</th><th align="left">说明</th><th>说明</th></tr></thead><tbody><tr><td align="left">left</td><td align="left">number</td><td>安全区域左上角横坐标，单位px</td></tr><tr><td align="left">right</td><td align="left">number</td><td>安全区域右下角横坐标，单位px</td></tr><tr><td align="left">top</td><td align="left">number</td><td>安全区域左上角纵坐标，单位px</td></tr><tr><td align="left">bottom</td><td align="left">number</td><td>安全区域右下角纵坐标，单位px</td></tr><tr><td align="left">width</td><td align="left">number</td><td>安全区域的宽度，单位逻辑像素</td></tr><tr><td align="left">height</td><td align="left">number</td><td>安全区域的高度，单位逻辑像素</td></tr></tbody></table><h3 id="图解以上属性"><a href="#图解以上属性" class="headerlink" title="图解以上属性"></a>图解以上属性</h3><p><img src="/../assets/safearea.png" alt="safearea"></p><h3 id="适配代码"><a href="#适配代码" class="headerlink" title="适配代码"></a>适配代码</h3><p>苹果设备的状态栏一般高度为 44px。在某些情况下，比如在 iPhone X 及之后的型号上，由于刘海设计，状态栏的高度可能会有所变化，但通常仍然保持在 44px 的范围内。</p><p>安卓手机的状态栏高度通常为 24dp，这在不同设备上可以转换为不同的像素值，取决于屏幕的密度（DPI）。在常见的屏幕密度下，24dp 大约相当于 24px 到 48px 之间。不过，这个高度可能会因设备的设计和版本而有所不同。通常建议参考具体设备的设计规范以获取准确的信息。</p><p>所以两者取平均值：IOS状态栏取<code>44px</code>，Android状态栏取<code>(24 + 48) / 2 = 36px</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">SizeInfo</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 客户端平台</span></span><br><span class="line">  <span class="keyword">static</span> platform = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 窗口信息</span></span><br><span class="line">  <span class="keyword">static</span> windowInfo = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取窗口信息</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getWindowInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">windowInfo</span>) <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">windowInfo</span>;</span><br><span class="line">    <span class="keyword">let</span> windowInfo = wx.<span class="title function_">getWindowInfo</span>();</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isAndroid</span>()) &#123;</span><br><span class="line">      windowInfo = <span class="variable language_">this</span>.<span class="title function_">formatWindowInfo</span>(<span class="number">36</span>, windowInfo);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isIOS</span>()) &#123;</span><br><span class="line">      windowInfo = <span class="variable language_">this</span>.<span class="title function_">formatWindowInfo</span>(<span class="number">44</span>, windowInfo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">windowInfo</span> = windowInfo;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">windowInfo</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 格式化尺寸</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">formatWindowInfo</span>(<span class="params">statusBarHeight = <span class="number">36</span>, windowInfo</span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 状态栏高度没获取到时候处理</span></span><br><span class="line">    <span class="keyword">if</span> (windowInfo.<span class="property">statusBarHeight</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      windowInfo.<span class="property">statusBarHeight</span> = statusBarHeight;</span><br><span class="line">      <span class="keyword">if</span> (windowInfo.<span class="property">safeArea</span>) &#123;  </span><br><span class="line">        windowInfo.<span class="property">safeArea</span>.<span class="property">top</span> = statusBarHeight;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 手机机型没有安全区时候适配</span></span><br><span class="line">    <span class="keyword">if</span> (!windowInfo.<span class="property">safeArea</span>) &#123;</span><br><span class="line">      windowInfo.<span class="property">safeArea</span> = &#123;</span><br><span class="line">        <span class="attr">height</span>: windowInfo.<span class="property">screenHeight</span> - windowInfo.<span class="property">statusBarHeight</span>,</span><br><span class="line">        <span class="attr">width</span>: windowInfo.<span class="property">screenWidth</span>,</span><br><span class="line">        <span class="attr">top</span>: windowInfo.<span class="property">statusBarHeight</span>,</span><br><span class="line">        <span class="attr">right</span>: windowInfo.<span class="property">screenWidth</span>,</span><br><span class="line">        <span class="attr">bottom</span>: windowInfo.<span class="property">screenHeight</span>,</span><br><span class="line">        <span class="attr">left</span>: <span class="number">0</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> windowInfo;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取设备基础信息</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getPlatform</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">platform</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> platform = wx.<span class="title function_">getDeviceInfo</span>().<span class="property">platform</span> || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">platform</span> = platform.<span class="title function_">toLocaleUpperCase</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">platform</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 是否是IOS</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">isIOS</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> platform = <span class="variable language_">this</span>.<span class="title function_">getPlatform</span>();</span><br><span class="line">    <span class="keyword">return</span> platform === <span class="string">&#x27;IOS&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 是否是ANDROID</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">isAndroid</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> platform = <span class="variable language_">this</span>.<span class="title function_">getPlatform</span>();</span><br><span class="line">    <span class="keyword">return</span> platform === <span class="string">&#x27;ANDROID&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 是否是WINDOWS</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">isWindows</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> platform = <span class="variable language_">this</span>.<span class="title function_">getPlatform</span>();</span><br><span class="line">    <span class="keyword">return</span> platform === <span class="string">&#x27;WINDOWS&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 是否是MAC</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">isMac</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> platform = <span class="variable language_">this</span>.<span class="title function_">getPlatform</span>();</span><br><span class="line">    <span class="keyword">return</span> platform === <span class="string">&#x27;MAC&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 是否是DEVTOOLS</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">isDevtools</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> platform = <span class="variable language_">this</span>.<span class="title function_">getPlatform</span>();</span><br><span class="line">    <span class="keyword">return</span> platform === <span class="string">&#x27;DEVTOOLS&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> WeChat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WeChat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vite-plugin-vue-inspector</title>
      <link href="/2024/09/14/Vue/vue-inspector/"/>
      <url>/2024/09/14/Vue/vue-inspector/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>现在很多web项目都是基于前后端分离的，绝大多数都是基于<code>Vue</code>，<code>React</code>等框架进行开发的。现在的web项目较以前也日益复杂，每一个前端工程都有很多组件但是我们在进行开发的时候总是在<code>IDE</code>和页面来回切换，在页面上也不好定位自己需要改哪一个组件，基于此推荐一个vue的vite插件能很好的解决从页面上定位组件行数的问题。</p><h2 id="vite-plugin-vue-inspector"><a href="#vite-plugin-vue-inspector" class="headerlink" title="vite-plugin-vue-inspector"></a><a href="https://github.com/webfansplz/vite-plugin-vue-inspector">vite-plugin-vue-inspector</a></h2><p>一个vite插件，提供点击浏览器元素自动跳转到本地IDE的功能。它支持 Vue2 &amp; 3 &amp; SSR。</p><p><img src="/../assets/preview.gif" alt="preview"></p><h4 id="Configuration-Vite-配置Vite"><a href="#Configuration-Vite-配置Vite" class="headerlink" title="Configuration Vite 配置Vite"></a>Configuration Vite 配置Vite</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for Vue2</span></span><br><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig, &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createVuePlugin, &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue2&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Inspector</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-inspector&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">createVuePlugin</span>(),</span><br><span class="line">    <span class="title class_">Inspector</span>(&#123;</span><br><span class="line">      <span class="attr">vue</span>: <span class="number">2</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for Vue3</span></span><br><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Inspector</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-inspector&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title class_">Vue</span>(), <span class="title class_">Inspector</span>()],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for Nuxt3</span></span><br><span class="line"><span class="comment">// nuxt.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineNuxtConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;nuxt/config&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Inspector</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-inspector&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineNuxtConfig</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: [</span><br><span class="line">    [<span class="string">&#x27;unplugin-vue-inspector/nuxt&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">enabled</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">toggleButtonVisibility</span>: <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">    &#125;],</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>如果是<code>React</code>项目可以使用<code>LocatorJS</code>的谷歌商店插件 <a href="https://chromewebstore.google.com/detail/locatorjs/npbfdllefekhdplbkdigpncggmojpefi?hl=zh-CN&utm_source=ext_sidebar&pli=1">传送门</a>。</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
          <category> Vite </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>margin trim</title>
      <link href="/2024/09/12/Css/margin-trim/"/>
      <url>/2024/09/12/Css/margin-trim/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>在项目中布局平常都会遇到一些排版上的问题,，比如垂直排列的元素之间增加下外边距：</p><p><img src="/../assets/PixPin_2024-09-12_17-15-06.png" alt="PixPin_2024-09-12_17-15-06"></p><p>我们需要li之间出现margin，而不是1，2，3都有margin，通常做法是nth-last-child去掉最后一个元素的margin-bottom，但是有点麻烦，下面介绍一种方式只需一行css即可解决上面的问题，代码如下所示：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">li</span>+<span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用 <code> li + li</code> 的方式解决上面布局问题，针对li的后一个兄弟元素进行设置样式，则第一个元素就不起作用，效果如下图所示。</p><p><img src="/../assets/PixPin_2024-09-12_17-20-48.png" alt="PixPin_2024-09-12_17-20-48"></p>]]></content>
      
      
      <categories>
          
          <category> Css </category>
          
          <category> Margin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>隐式类型转换规则</title>
      <link href="/2023/08/01/JavaScript/%E9%9A%90%E5%BC%8F%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"/>
      <url>/2023/08/01/JavaScript/%E9%9A%90%E5%BC%8F%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="JavaScript类型"><a href="#JavaScript类型" class="headerlink" title="JavaScript类型"></a>JavaScript类型</h3><p>js数据类型：<code>null</code>，<code>undefined</code>，<code>String</code>，<code>Number</code>，<code>Boolean</code>，<code>Symbol</code>，<code>Object</code>，其中</p><p>原始类型：<code>Number</code>、<code>String</code>、<code>Null</code>、<code>Undefined</code>、<code>Boolean</code></p><p>引用类型：<code>Object</code>,包含<code>Array</code></p><p>JavaScript 是一种弱类型或者说动态语言。这意味着你不用提前声明变量的类型，在程序运行过程中，类型会被自动确定。这也意味着你可以使用同一个变量保存不同类型的数据。</p><h3 id="JavaScript隐式类型转换以及规则"><a href="#JavaScript隐式类型转换以及规则" class="headerlink" title="JavaScript隐式类型转换以及规则"></a>JavaScript隐式类型转换以及规则</h3><h4 id="隐式类型转换-ToPrimitive"><a href="#隐式类型转换-ToPrimitive" class="headerlink" title="隐式类型转换(ToPrimitive)"></a>隐式类型转换(ToPrimitive)</h4><p>​    将引用类型转换为原始类型,在拆箱过程中会遵循ECMAScript规定的toPrimitive原则,对引用类型进行转换</p><h5 id="什么是ToPrimitive函数"><a href="#什么是ToPrimitive函数" class="headerlink" title="什么是ToPrimitive函数"></a>什么是ToPrimitive函数</h5><p>​    ToPrimitive方法是在引用类型转换为原始类型的过程中js<strong>自动</strong>帮我们调用的方法<br>     ToPrimitive方法中会按条件调用[Symbol.toPrimitive]；valueOf()；toString()中的一种或多种方法帮助我们将引用类型转换为原始类型</p><h5 id="ToPrimitive函数执行的一般顺序"><a href="#ToPrimitive函数执行的一般顺序" class="headerlink" title="ToPrimitive函数执行的一般顺序"></a>ToPrimitive函数执行的一般顺序</h5><ol><li>若存在[Symbol.toPrimitive]属性,则优先调用并返回</li><li>否则,将优先调用valueOf方法,返回原始类型的值</li><li>若不存在valueOf属性或返回类型不是原始类型,则调用toString方法,返回原始类型的值</li><li>若也不存在toString属性或返回类型不是原始类型,则抛出异常TypeError</li></ol><h5 id="对于不同的引用类型toPrimitive方法的执行也不同"><a href="#对于不同的引用类型toPrimitive方法的执行也不同" class="headerlink" title="对于不同的引用类型toPrimitive方法的执行也不同"></a>对于不同的引用类型toPrimitive方法的执行也不同</h5><p>​    对于Object(对象)</p><ol><li>一般对象({} 或 new Object())是不存在[Symbol.toPrimitive]属性的</li><li>优先调用valueOf方法,返回的是其本身还是引用类型,不是number类型</li><li>调用toString方法,得到字符串”[object Object]”并返回</li></ol><p>​    对于Array(数组)</p><ol><li>优先调用valueOf方法,返回的是其本身还是引用类型,不是number类型</li><li>调用toString方法,得到相当于调用Array.join(‘,’)生成的字符串并返回</li></ol><p>​    对于Function(函数)</p><ol><li>优先调用valueOf方法,返回的是其本身还是引用类型,不是number类型</li><li>调用toString方法,得到字符串形式的函数体并返回</li></ol><p>​    对于Date对象(日期对象)</p><ol><li>Date对象与上述不同,优先调用toString()方法转换为字符串并返回</li></ol><h4 id="隐式类型转换的规则"><a href="#隐式类型转换的规则" class="headerlink" title="隐式类型转换的规则"></a>隐式类型转换的规则</h4><p>​    运算符在运算的时候，如果两边的数据类型不一致，则会自动转成一致后运算。</p><p><strong>1、快速转换为Number类型或String类型的写法</strong></p><p>​    便捷地将变量转换为Number类型或String类型。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Number</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="literal">true</span>) <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+[]) <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+&#123;&#125;) <span class="comment">//NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="string">&quot;123&quot;</span>) <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Number 负数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(-<span class="literal">true</span>) <span class="comment">// -1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(-[]) <span class="comment">// -0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(-&#123;&#125;) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(-<span class="string">&quot;123&quot;</span>) <span class="comment">// -123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// String</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> + <span class="string">&quot;&quot;</span>) <span class="comment">// &quot;true&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([] + <span class="string">&quot;&quot;</span>) <span class="comment">// &quot;&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(&#123;&#125; + <span class="string">&quot;&quot;</span>) <span class="comment">// &quot;[object Object]&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">123</span> + <span class="string">&quot;&quot;</span>) <span class="comment">// &quot;123&quot;</span></span><br></pre></td></tr></table></figure><h5 id="2、各种运算符"><a href="#2、各种运算符" class="headerlink" title="2、各种运算符"></a>2、各种运算符</h5><p>​    对于（**- * /**）三种运算符：</p><p>​    在四则运算符中的 <strong>- * /</strong> 三种运算符中我们只需要将<strong>非Number类型</strong>的数据转换为<strong>Number类型</strong>即可。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span> - []); <span class="comment">// ([] -&gt; 0) 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span> - [<span class="number">1</span>,<span class="number">2</span>]); <span class="comment">// ([1,2] -&gt; NaN) NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span> - &#123;&#125;); <span class="comment">// (&#123;&#125; -&gt; NaN)  NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span> - &#123;<span class="attr">name</span>: <span class="string">&quot;LDec.27&quot;</span>&#125;);  <span class="comment">// (&#123;name: &quot;LDec.27&quot;&#125; -&gt; NaN) NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span> - <span class="string">&quot;123&quot;</span>); <span class="comment">// (&quot;123&quot; -&gt; 123) -121</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span> / <span class="string">&quot;1&quot;</span>); <span class="comment">// (&quot;1&quot; -&gt; 1) 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span> * &#123;&#125;); <span class="comment">// (&#123;&#125; -&gt; NaN) NaN</span></span><br></pre></td></tr></table></figure><p>​    对于特殊的 <strong>“+”</strong> 运算符我们需要分情况考虑：</p><p>​    1.一种是加号在前面则是转换number；例如：+[] ==&gt; 0     +{} ==&gt; NaN</p><p>​    2.若一边为<strong>Number类型</strong>，另一边为原始类型boolean、undefined、null、number，则<strong>转换为Number类型</strong>做加法；</p><p>​    3.只要一边出现<strong>String</strong>，则另一边也要转换成<strong>String</strong>；</p><p>​    4.若一边出现<strong>引用类型</strong>,需要遵循ECMAScript规定的<strong>toPrimitive原则</strong>，对引用类型进行转换后再根据上面3点进行分析进一步转换(<strong>一般来讲遵循toPrimitive原则引用类型都是转换为String类型</strong>)；</p><h5 id="3、if语句和逻辑语句。"><a href="#3、if语句和逻辑语句。" class="headerlink" title="3、if语句和逻辑语句。"></a>3、if语句和逻辑语句。</h5><p>​    若if语句或逻辑语句中只存在单个变量，那我们优先将该变量转换成<code>Boolean</code>类型的值</p><h5 id="4、"><a href="#4、" class="headerlink" title="4、==="></a>4、===</h5><p>​     不存在类型转换， 先比较类型，然后比较值；</p><h5 id="5、x-y-比较运算符分为五种情况"><a href="#5、x-y-比较运算符分为五种情况" class="headerlink" title="5、x == y 比较运算符分为五种情况"></a>5、x == y 比较运算符分为五种情况</h5><ol><li><p><strong>x和y 都为null或undefined</strong></p><p>不会类型转换，得到固定值<code>true</code>;</p></li><li><p><strong>x或y为NaN</strong> </p><p>不会类型转换，得到固定值<code>false  </code>(<code>NaN</code>与任何数据都不等，包含自身)</p><p>x和y 都为 <code>string</code>，<code>boolean</code>，<code>number</code>且类型不一致</p></li><li><p><strong>x和y 都为 string，boolean，number ,且类型不一致</strong></p><p>会类型转换， 会把其他类型转成number后计算</p></li><li><p><strong>x或y 为引用类型 （一个是引用类型，一个是值类型）</strong></p><p>引用类型会先调用 [Symbol.toPrimitive]，再调用valueOf()，然后调用toString()，再来计算，最终变成字符串来比较;</p><p> [Symbol.toPrimitive] : 一般对象上面不存在该属性方法；</p><p>valueOf : 一般引用类型，返回自身（一般忽略）；</p><p>toString : 数组是join()字符串， 对象是固定字符串 ‘[object Object]’；</p></li><li><p><strong>X和Y 都为引用类型</strong></p><p>则会比较两者地址，地址一样则为true，否则为false</p></li></ol><h3 id="不同类型的值之间相互转换"><a href="#不同类型的值之间相互转换" class="headerlink" title="不同类型的值之间相互转换"></a>不同类型的值之间相互转换</h3><p>​    注:这里只会将值转换为Number、String、Boolean三种类型的值：</p><p><img src="/../assets/convert-table.png" alt="截图20230801161552"></p><h3 id="相关面试题："><a href="#相关面试题：" class="headerlink" title="相关面试题："></a>相关面试题：</h3><p><strong>如何使得(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3)表达式为true？</strong></p><p>在进行==时候会进行隐式类型转换，并根据ToPrimitive规范得知转换过程会依次执行：[Symbol.toPrimitive] –&gt; valueOf –&gt; toString</p><p>所以可以更改[Symbol.toPrimitive]、valueOf、toString这三个方法中的任意方法即可：</p><p>1、添加[Symbol.toPrimitive]</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>[<span class="title class_">Symbol</span>.<span class="property">toPrimitive</span>] = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Symbol.toPrimitive :&gt;&gt; &#x27;</span>, <span class="variable language_">this</span>.<span class="property">num</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">num</span>++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  <span class="attr">num</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="comment">// [Symbol.toPrimitive]: function () &#123;</span></span><br><span class="line">  <span class="comment">// console.log(&#x27;Symbol.toPrimitive :&gt;&gt; &#x27;, this.num);</span></span><br><span class="line">  <span class="comment">// return this.num++;</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((a == <span class="number">1</span>) &amp;&amp; (a == <span class="number">2</span>) &amp;&amp; (a == <span class="number">3</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>2、修改valueOf</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">valueOf</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;valueOf :&gt;&gt; &#x27;</span>, <span class="variable language_">this</span>.<span class="property">num</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">num</span>++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  <span class="attr">num</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="comment">// valueOf: function () &#123;</span></span><br><span class="line">  <span class="comment">//   console.log(&#x27;valueOf :&gt;&gt; &#x27;, this.num);</span></span><br><span class="line">  <span class="comment">//   return this.num++;</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((a == <span class="number">1</span>) &amp;&amp; (a == <span class="number">2</span>) &amp;&amp; (a == <span class="number">3</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>3、修改toString</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;toString :&gt;&gt; &#x27;</span>, <span class="variable language_">this</span>.<span class="property">num</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">num</span>++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  <span class="attr">num</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="comment">// toString: function () &#123;</span></span><br><span class="line">  <span class="comment">//   console.log(&#x27;toString :&gt;&gt; &#x27;, this.num);</span></span><br><span class="line">  <span class="comment">//   return this.num++;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((a == <span class="number">1</span>) &amp;&amp; (a == <span class="number">2</span>) &amp;&amp; (a == <span class="number">3</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><strong>如何使得(a === 1 &amp;&amp; a === 2 &amp;&amp; a === 3)表达式为true？</strong></p><p>这道题又该如何应对呢？===不会进行隐式类型转换</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">window</span>, <span class="string">&quot;a&quot;</span>, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> ++b;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a === <span class="number">1</span> &amp;&amp; a === <span class="number">2</span> &amp;&amp; a === <span class="number">3</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><strong>![] == []</strong></p><blockquote><p>解析:</p><ol><li>!的优先级高于==所以先进行逻辑语句的转换将 ![] -&gt; false -&gt; false == []</li><li>若一边为基本类型一边为引用类型,将引用类型转换为原始类型 [] -&gt; ‘’ -&gt; fasle == ‘’</li><li>若一边有Boolean类型的值先将其转换为Number类型 false -&gt; 0 -&gt; 0 == ‘’</li><li>若一边为Number类型一边为String类型将String类型转换为Number类型 ‘’ -&gt; 0 -&gt; 0 == 0</li><li>判断为true</li></ol></blockquote><p><strong>{} + {}</strong></p><blockquote><p>解析:</p><p><strong>以{}开头是一个代码块</strong>,代码块是不会被转换的所以就变成了+{}的形式即上文提到的快速将变量转换为Number类型的方法,所以答案为NaN</p></blockquote><p><strong>{} + []</strong></p><blockquote><p>解析:</p><p>这道题与上道题类似{}被当做代码块变成了 +[]强制转换为Number类型,最后答案为0</p></blockquote><p><strong>[] + {}</strong></p><blockquote><p>解析:</p><ol><li>先将引用类型转换为字符串 [] -&gt; ‘’, {} -&gt; ‘[object Object]’</li><li>字符串相加得到答案 ‘[object Object]’</li></ol></blockquote><p><strong>let result = 100 + true + 21.2 + null + undefined + “Tencent” + [] + null + 9 + false;</strong></p><blockquote><p>解析:</p><ol><li>代码是从上到下从左往右执行的,所以先执行 100 + true, 一边为Number类型另一边为除String类型以外的原始类型，所以将 true -&gt; 1得到 101 + 21.2</li><li>正常相加得到122.2 + null,同第一步 null -&gt; 0 得到 122.2</li><li>122.2 + undefined,依然同第一步 undefined -&gt; NaN 得到NaN</li><li>NaN + “Tencent”, 一边为String类型,则另一边要转换为String类型做字符串拼接, NaN -&gt; “NaN”, 得到 “NaNTencent”</li><li>因为有一边已经是String类型了,所以另一边无论是什么类型都转换为String类型，最后得到结果’NaNTencentnull9false’</li></ol></blockquote><p><strong>[] == 0</strong></p><blockquote><p>解析:</p><ol><li>一边为引用类型,先将其转化为String类型 [] -&gt; ‘’</li><li>一边为String类型,一边为Number类型,将String类型转换为Number类型 ‘’ -&gt; 0</li><li>0 == 0 得到结果true</li></ol></blockquote><p><strong>[2] == 2</strong></p><blockquote><p>解析:</p><ol><li>同第六题, [2] -&gt; ‘2’</li><li>‘2’ -&gt; 2</li><li>2 == 2 返回true</li></ol></blockquote><p><strong>[null] == 0</strong></p><blockquote><p>解析:</p><p>1.null意为此处不该有值所以[null] == []<br>2.将引用类型转换为String类型 [null] -&gt; ‘’<br>3.’’ == 0, 一边为String类型,一边为Number类型,将String类型转换为Number类型 ‘’ -&gt; 0<br>4.0 == 0, 返回true</p></blockquote><p><strong>[undefined] == 0</strong></p><blockquote><p>解析:</p><ol><li>undefined意为此处缺少一个值,应该有但还没定义所以[undefined] == []</li><li>与第八题类似最后可转换成 0 == 0,答案为true</li></ol></blockquote><p><strong>undefined == false</strong></p><blockquote><p>解析:</p><ol><li>一边为Boolean类型的值,将其转化为Number类型 false -&gt; 0</li><li>一边为Number类型,另一边也转换为Number类型 undefined -&gt; NaN</li><li>NaN == 0, 答案为false</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> js基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Event Queue (事件队列)</title>
      <link href="/2023/08/01/JavaScript/%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97/"/>
      <url>/2023/08/01/JavaScript/%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="宏任务"><a href="#宏任务" class="headerlink" title="宏任务"></a>宏任务</h4><ul><li><code>&lt;script&gt;</code>标签中的运行代码</li><li>事件触发的回调函数，例如<code>DOM Events</code>、<code>I/O</code>、<code>requestAnimationFrame</code>、<code>Ajax</code>、<code>DOM</code></li><li><code>setTimeout</code>、<code>setInterval</code>、<code>setImmediate(Nodejs)</code>的回调函数</li></ul><h4 id="微任务"><a href="#微任务" class="headerlink" title="微任务"></a>微任务</h4><ul><li><strong>promises</strong>：<code>Promise.then</code>、<code>Promise.catch</code>、<code>Promise.finally</code></li><li><strong>MutationObserver</strong>：<a href="http://javascript.ruanyifeng.com/dom/mutationobserver.html">使用方式</a></li><li><strong>queueMicrotask</strong>：<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/queueMicrotask">使用方式</a></li><li><strong>process.nextTick</strong>：Node独有</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script start&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;timeout1&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise1&#x27;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>();</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;timeout2&#x27;</span>), <span class="number">10</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;then1&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script end&#x27;</span>);</span><br></pre></td></tr></table></figure><p>首先，事件循环从宏任务 (macrotask) 队列开始，最初始，宏任务队列中，只有一个 scrip t(整体代码)任务；当遇到任务源 (task source) 时，则会先分发任务到对应的任务队列中去。所以，就和上面例子类似，首先遇到了console.log，输出 script start； 接着往下走，遇到 setTimeout 任务源，将其分发到任务队列中去，记为 timeout1； 接着遇到 promise，new promise 中的代码立即执行，输出 promise1, 然后执行 resolve ,遇到 setTimeout ,将其分发到任务队列中去，记为 timemout2, 将其 then 分发到微任务队列中去，记为 then1； 接着遇到 console.log 代码，直接输出 script end 接着检查微任务队列，发现有个 then1 微任务，执行，输出then1 再检查微任务队列，发现已经清空，则开始检查宏任务队列，执行 timeout1,输出 timeout1； 接着执行 timeout2，输出 timeout2 至此，所有的都队列都已清空，执行完毕。其输出的顺序依次是：script start, promise1, script end, then1, timeout1, timeout2。</p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>microtask(微任务) 优先于 task (宏任务) 执行，所以如果有需要优先执行的逻辑，放入microtask 队列会比 task 更早的被执行。<br>最后的最后，记住，JavaScript 是一门单线程语言，异步操作都是放到事件循环队列里面，等待主执行栈来执行的，并没有专门的异步执<br>行线程。</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> Event Queue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Promise (实现原理)</title>
      <link href="/2023/07/30/JavaScript/%E6%89%8B%E5%86%99Promise/"/>
      <url>/2023/07/30/JavaScript/%E6%89%8B%E5%86%99Promise/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong><code>Promise</code></strong> 是一个代理，它代表一个在创建 promise 时不一定已知的值。它允许你将处理程序与异步操作的最终成功值或失败原因关联起来。这使得异步方法可以像同步方法一样返回值：异步方法不会立即返回最终值，而是返回一个 <em>promise</em>，以便在将来的某个时间点提供该值，下面将用手写代码的方式体现Promise的原理：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">PENDING</span> = <span class="string">&quot;pending&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">FULFILLED</span> = <span class="string">&quot;fulfilled&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">REJECTED</span> = <span class="string">&quot;rejected&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Resolve定义</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@typedef</span> &#123;<span class="type"> (data:any) =&gt; void </span>&#125; <span class="variable">Resolve</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Reject定义</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@typedef</span> &#123;<span class="type"> (data:any) =&gt; void </span>&#125; <span class="variable">Reject</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> State定义</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@typedef</span> &#123;<span class="type">typeof PENDING | typeof FULFILLED | typeof REJECTED</span>&#125; <span class="variable">State</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Handler定义</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@typedef</span> <span class="variable">Handler</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">Resolve</span>&#125; Handler.onFulfilled</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">Reject</span>&#125; Handler.onRejected</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">Reject</span>&#125; Handler.resolve</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">Reject</span>&#125; Handler.reject</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断是否是promise</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">isPromise</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (data !== <span class="literal">null</span> &amp;&amp; (<span class="keyword">typeof</span> data === <span class="string">&quot;object&quot;</span> | <span class="keyword">typeof</span> data === <span class="string">&quot;function&quot;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> data.<span class="property">then</span> === <span class="string">&quot;function&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPromise</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 处理完成执行函数</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; <span class="variable">value</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">resolve</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(value);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 被拒绝执行函数</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; <span class="variable">reason</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> reject = <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">reject</span>(reason);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 当所有输入的 Promise 都被兑现时，</span></span><br><span class="line"><span class="comment">   * 返回的 Promise 也将被兑现（即使传入的是一个空的可迭代对象），</span></span><br><span class="line"><span class="comment">   * 并返回一个包含所有兑现值的数组。</span></span><br><span class="line"><span class="comment">   * 如果输入的任何 Promise 被拒绝，</span></span><br><span class="line"><span class="comment">   * 则返回的 Promise 将被拒绝，并带有第一个被拒绝的原因。</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">MyPromise[]</span>&#125; <span class="variable">promises</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@memberof</span> <span class="variable">MyPromise</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> all = <span class="function">(<span class="params">promises = []</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> results = [];</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> len = promises.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      promises.<span class="title function_">forEach</span>(<span class="function">(<span class="params">val, index</span>) =&gt;</span> &#123;</span><br><span class="line">        val.<span class="title function_">then</span>(</span><br><span class="line">          <span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">            results[index] = result;</span><br><span class="line">            count = count + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (count === len) <span class="title function_">resolve</span>(results);</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">reject</span>(error);</span><br><span class="line">          &#125;</span><br><span class="line">        );</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 所有输入的 Promise 都已敲定时（包括传入空的可迭代对象时），</span></span><br><span class="line"><span class="comment">   * 返回的 Promise 将被兑现，并带有描述每个 Promise 结果的对象数组。</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">MyPromise[]</span>&#125; <span class="variable">promises</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns</span> <span class="variable">MyPromise</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> allSettled = <span class="function">(<span class="params">promises = []</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> statuses = [];</span><br><span class="line">    <span class="keyword">let</span> len = promises.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      promises.<span class="title function_">forEach</span>(<span class="function">(<span class="params">val, index</span>) =&gt;</span> &#123;</span><br><span class="line">        val.<span class="title function_">then</span>(</span><br><span class="line">          <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            statuses[index] = &#123;</span><br><span class="line">              <span class="attr">status</span>: <span class="variable constant_">FULFILLED</span></span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (index === len) <span class="title function_">resolve</span>(statuses);</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            statuses[index] = &#123;</span><br><span class="line">              <span class="attr">status</span>: <span class="variable constant_">REJECTED</span></span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (index === len) <span class="title function_">resolve</span>(statuses);</span><br><span class="line">          &#125;</span><br><span class="line">        );</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 当输入的任何一个 Promise 兑现时，这个返回的 Promise 将会兑现，</span></span><br><span class="line"><span class="comment">   * 并返回第一个兑现的值。</span></span><br><span class="line"><span class="comment">   * 当所有输入 Promise 都被拒绝（包括传递了空的可迭代对象）时，</span></span><br><span class="line"><span class="comment">   * 它会以一个包含拒绝原因数组的 AggregateError 拒绝。</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">MyPromise[]</span>&#125; <span class="variable">promises</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@returns</span> <span class="variable">MyPromise</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> any = <span class="function">(<span class="params">promises = []</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      promises = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(promises) ? promises : [];</span><br><span class="line">      <span class="keyword">let</span> len = promises.<span class="property">length</span>;</span><br><span class="line">      <span class="comment">// 用于收集所有 reject </span></span><br><span class="line">      <span class="keyword">let</span> errs = [];</span><br><span class="line">      <span class="comment">// 如果传入的是一个空数组，那么就直接返回 AggregateError</span></span><br><span class="line">      <span class="keyword">if</span> (len === <span class="number">0</span>) <span class="keyword">return</span> <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">AggregateError</span>(<span class="string">&#x27;All promises were rejected&#x27;</span>));</span><br><span class="line">      promises.<span class="title function_">forEach</span>(<span class="function">(<span class="params">promise</span>) =&gt;</span> &#123;</span><br><span class="line">        promise.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">resolve</span>(value);</span><br><span class="line">        &#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">          len--;</span><br><span class="line">          errs.<span class="title function_">push</span>(err);</span><br><span class="line">          <span class="keyword">if</span> (len === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">AggregateError</span>(errs));</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 这个返回的 promise 会随着第一个 promise 的敲定而敲定。</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">MyPromise[]</span>&#125; <span class="variable">promises</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@memberof</span> <span class="variable">MyPromise</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">static</span> race = <span class="function">(<span class="params">promises = []</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      promises.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isPromise</span>(item)) &#123;</span><br><span class="line">          item.<span class="title function_">then</span>(resolve, reject);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">resolve</span>(item);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Promise状态</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type</span> &#123;<span class="type">State</span>&#125;</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@memberof</span> <span class="variable">MyPromise</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  #state = <span class="variable constant_">PENDING</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 存储promise结果</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type</span> &#123;<span class="type">any</span>&#125;</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@memberof</span> <span class="variable">MyPromise</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  #result = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 存储then方法中的参数</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type</span> &#123;<span class="type">Handler[]</span>&#125;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  #handlers = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 创建一个MyPromise的实例对象</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type"> (resolve: Resolve, reject: Reject) =&gt; void </span>&#125; <span class="variable">executor</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@memberof</span> <span class="variable">MyPromise</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">executor</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="title function_">executor</span>(<span class="variable language_">this</span>.#resolve, <span class="variable language_">this</span>.#reject);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.#<span class="title function_">reject</span>(err);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span> 执行成功</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; <span class="variable">result</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  #resolve = <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#<span class="title function_">changeState</span>(<span class="variable constant_">FULFILLED</span>, result);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span> 执行失败</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; <span class="variable">reason</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  #reject = <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#<span class="title function_">changeState</span>(<span class="variable constant_">REJECTED</span>, reason);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span> 修改状态</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">State</span>&#125; state 状态</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; result 结果</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  #changeState = <span class="function">(<span class="params">state, result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.#state !== <span class="variable constant_">PENDING</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="variable language_">this</span>.#state = state;</span><br><span class="line">    <span class="variable language_">this</span>.#result = result;</span><br><span class="line">    <span class="variable language_">this</span>.#<span class="title function_">run</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 将函数添加到微任务里面</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">()=&gt;void</span>&#125; <span class="variable">func</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  #runMicroTask = <span class="function">(<span class="params">func</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> process === <span class="string">&quot;object&quot;</span> &amp;&amp; <span class="keyword">typeof</span> process.<span class="property">nextTick</span> === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">      process.<span class="title function_">nextTick</span>(func);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> queueMicrotask === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">      <span class="title function_">queueMicrotask</span>(func);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span> 抽离run中的重复代码</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">(value:any)=&gt;MyPromise|undefined</span>&#125; <span class="variable">callback</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">Resolve</span>&#125; <span class="variable">resolve</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">Reject</span>&#125; <span class="variable">reject</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  #runOne = <span class="function">(<span class="params">callback, resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#<span class="title function_">runMicroTask</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> callback !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> settled = <span class="variable language_">this</span>.#state === <span class="variable constant_">FULFILLED</span> ? resolve : reject;</span><br><span class="line">        <span class="title function_">settled</span>(<span class="variable language_">this</span>.#result);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> data = <span class="title function_">callback</span>(<span class="variable language_">this</span>.#result);</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isPromise</span>(data)) &#123;</span><br><span class="line">          data.<span class="title function_">then</span>(resolve, reject);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">resolve</span>(data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="title function_">reject</span>(error);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span> 执行then存储的回调方法</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  #run = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.#state === <span class="variable constant_">PENDING</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="variable language_">this</span>.#handlers.<span class="property">length</span>) &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@type</span> &#123;<span class="type">Handler</span>&#125;</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="keyword">const</span> handler = <span class="variable language_">this</span>.#handlers.<span class="title function_">shift</span>();</span><br><span class="line">      <span class="keyword">const</span> &#123; onFulfilled, onRejected, resolve, reject &#125; = handler;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.#state === <span class="variable constant_">FULFILLED</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.#<span class="title function_">runOne</span>(onFulfilled, resolve, reject);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.#state === <span class="variable constant_">REJECTED</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.#<span class="title function_">runOne</span>(onRejected, resolve, reject);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span> Promise then 方法</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">Resolve</span>&#125; <span class="variable">onFulfilled</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">Reject</span>&#125; <span class="variable">onRejected</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@memberof</span> <span class="variable">MyPromise</span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  then = <span class="function">(<span class="params">onFulfilled, onRejected</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.#handlers.<span class="title function_">push</span>(&#123;</span><br><span class="line">        onFulfilled,</span><br><span class="line">        onRejected,</span><br><span class="line">        resolve,</span><br><span class="line">        reject,</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="variable language_">this</span>.#<span class="title function_">run</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用来捕获 promise 的异常，就相当于一个没有成功的 then</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">(value:any)=&gt;void</span>&#125; errCallback </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">catch</span> = <span class="function">(<span class="params">errCallback</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(<span class="literal">null</span>, errCallback);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * finally 表示不是最终的意思，而是无论如何都会执行的意思。</span></span><br><span class="line"><span class="comment">   * 如果返回一个 promise 会等待这个 promise 也执行完毕。</span></span><br><span class="line"><span class="comment">   * 如果返回的是成功的 promise，会采用上一次的结果；</span></span><br><span class="line"><span class="comment">   * 如果返回的是失败的 promise，会用这个失败的结果，传到 catch 中。</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">(value:any)=&gt;void</span>&#125; callback </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">finally</span> = <span class="function">(<span class="params">callback</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(</span><br><span class="line">      <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">MyPromise</span>.<span class="title function_">resolve</span>(<span class="title function_">callback</span>()).<span class="title function_">then</span>(<span class="function">() =&gt;</span> value)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">MyPromise</span>.<span class="title function_">resolve</span>(<span class="title function_">callback</span>()).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123; <span class="keyword">throw</span> reason &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
          <category> Promise </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript 泛型工具</title>
      <link href="/2023/07/30/TypeScript/%E6%B3%9B%E5%9E%8B%E5%B7%A5%E5%85%B7/"/>
      <url>/2023/07/30/TypeScript/%E6%B3%9B%E5%9E%8B%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="TS的常用泛型工具的实现和使用"><a href="#TS的常用泛型工具的实现和使用" class="headerlink" title="TS的常用泛型工具的实现和使用"></a>TS的常用泛型工具的实现和使用</h3><h4 id="1、获取实际值的类型"><a href="#1、获取实际值的类型" class="headerlink" title="1、获取实际值的类型"></a>1、获取实际值的类型</h4><p>使用<code>typeof</code>关键词可以将js中的实际值转换成TS的类型 并通过<code>[type]</code>的方式获取</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="string">&#x27;qqq&#x27;</span>,</span><br><span class="line">  <span class="attr">c</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">hoby</span>: [<span class="string">&#x27;java&#x27;</span>, <span class="string">&#x27;python&#x27;</span>],</span><br><span class="line">  <span class="attr">type</span>: [<span class="string">&#x27;1&#x27;</span>, <span class="number">1</span>, <span class="literal">true</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Atype</span> = <span class="keyword">typeof</span> a;</span><br><span class="line"><span class="keyword">type</span> A = <span class="keyword">typeof</span> a[<span class="string">&#x27;a&#x27;</span>]; <span class="comment">// type A = number</span></span><br><span class="line"><span class="keyword">type</span> B = <span class="keyword">typeof</span> a[<span class="string">&#x27;b&#x27;</span>]; <span class="comment">// type B = string</span></span><br><span class="line"><span class="keyword">type</span> C = <span class="keyword">typeof</span> a[<span class="string">&#x27;c&#x27;</span>]; <span class="comment">// type C = boolean</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Hoby</span> = <span class="keyword">typeof</span> a[<span class="string">&#x27;hoby&#x27;</span>]; <span class="comment">// type Hoby = string[]</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Type</span> = <span class="keyword">typeof</span> a[<span class="string">&quot;type&quot;</span>]; <span class="comment">// type Type = (string | number | boolean)[]</span></span><br></pre></td></tr></table></figure><p>其中<strong>Atype</strong> 的类型如下所示：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Atype</span> = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">b</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">c</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="attr">hoby</span>: <span class="built_in">string</span>[];</span><br><span class="line">  <span class="attr">type</span>: (<span class="built_in">string</span> | <span class="built_in">number</span> | <span class="built_in">boolean</span>)[];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="2、获取TS类型中某个成员的类型"><a href="#2、获取TS类型中某个成员的类型" class="headerlink" title="2、获取TS类型中某个成员的类型"></a>2、获取TS类型中某个成员的类型</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Segment</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MemberSegment</span> &#123;</span><br><span class="line">  <span class="attr">number</span>: <span class="built_in">string</span>;</span><br><span class="line">  age?: <span class="built_in">number</span>;</span><br><span class="line">  address?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">male</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">friends</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">hoby</span>: [<span class="built_in">number</span>, <span class="built_in">string</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取某个成员的类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Member</span> = <span class="title class_">MemberSegment</span>[<span class="string">&#x27;address&#x27;</span>]; <span class="comment">// type Member = string | undefined</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">HobyMember</span> = <span class="title class_">MemberSegment</span>[<span class="string">&#x27;hoby&#x27;</span>][<span class="built_in">number</span>]; <span class="comment">// type HobyMember = string | number</span></span><br></pre></td></tr></table></figure><p>其中<code>MemberSegment[&#39;hoby&#39;][number]</code> 中的[number] 可以通过元祖的下标类型获取具体类型；</p><h4 id="3、TS泛型工具的实现和使用"><a href="#3、TS泛型工具的实现和使用" class="headerlink" title="3、TS泛型工具的实现和使用"></a>3、TS泛型工具的实现和使用</h4><p>实现工具所需的知识需要掌握 <code>in</code> 、<code>infer</code> 、<code>keyof</code> 、以及泛型递归的使用；</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Segment</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MemberSegment</span> &#123;</span><br><span class="line">  <span class="attr">number</span>: <span class="built_in">string</span>;</span><br><span class="line">  age?: <span class="built_in">number</span>;</span><br><span class="line">  address?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">male</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">friends</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">hoby</span>: [<span class="built_in">number</span>, <span class="built_in">string</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><h5 id="Partial-作用是将传入的属性变为可选项"><a href="#Partial-作用是将传入的属性变为可选项" class="headerlink" title="Partial 作用是将传入的属性变为可选项"></a><code>Partial</code> 作用是将传入的属性变为可选项</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Partial 作用是将传入的属性变为可选项.</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Partial</span>&lt;T&gt; = &#123; [K <span class="keyword">in</span> keyof T]?: T[K] &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MemberSegmentPartial</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">MemberSegment</span>&gt;;</span><br></pre></td></tr></table></figure><p>MemberSegmentPartial结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">MemberSegmentPartial</span> = &#123;</span><br><span class="line">  <span class="built_in">number</span>?: <span class="built_in">string</span>;</span><br><span class="line">  age?: <span class="built_in">number</span>;</span><br><span class="line">  address?: <span class="built_in">string</span>;</span><br><span class="line">  male?: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="keyword">readonly</span> friends?: <span class="built_in">string</span>;</span><br><span class="line">  hoby?: [<span class="built_in">number</span>, <span class="built_in">string</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><h5 id="Required-的作用是将传入的属性变为必选项"><a href="#Required-的作用是将传入的属性变为必选项" class="headerlink" title="Required 的作用是将传入的属性变为必选项"></a><code>Required</code> 的作用是将传入的属性变为必选项</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Required 的作用是将传入的属性变为必选项</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Required</span>&lt;T&gt; = &#123; [K <span class="keyword">in</span> keyof T]-?: T[K] &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MemberRequired</span> = <span class="title class_">Required</span>&lt;<span class="title class_">MemberSegment</span>&gt;;</span><br></pre></td></tr></table></figure><p>MemberRequired结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">MemberRequired</span> = &#123;</span><br><span class="line">  <span class="attr">number</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">male</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">friends</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">hoby</span>: [<span class="built_in">number</span>, <span class="built_in">string</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><h5 id="Mutable-T-的所有属性的-readonly-移除"><a href="#Mutable-T-的所有属性的-readonly-移除" class="headerlink" title="Mutable T 的所有属性的 readonly 移除"></a><code>Mutable</code> T 的所有属性的 readonly 移除</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Mutable T 的所有属性的 readonly 移除</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Mutable</span>&lt;T&gt; = &#123; -<span class="keyword">readonly</span> [K <span class="keyword">in</span> keyof T]: T[K] &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MemberSegmentMutable</span> = <span class="title class_">Mutable</span>&lt;<span class="title class_">MemberSegment</span>&gt;;</span><br></pre></td></tr></table></figure><p>MemberRequired结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">MemberRequired</span> = &#123;</span><br><span class="line">  <span class="attr">number</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">male</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">friends</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">hoby</span>: [<span class="built_in">number</span>, <span class="built_in">string</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><h5 id="Readonly-将传入的属性变为只读选项"><a href="#Readonly-将传入的属性变为只读选项" class="headerlink" title="Readonly 将传入的属性变为只读选项"></a><code>Readonly</code> 将传入的属性变为只读选项</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Readonly 将传入的属性变为只读选项, 源码如下</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Readonly</span>&lt;T&gt; = &#123; <span class="keyword">readonly</span> [K <span class="keyword">in</span> keyof T]: T[K] &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MemberSegmentReadonly</span> = <span class="title class_">Readonly</span>&lt;<span class="title class_">MemberSegment</span>&gt;;</span><br></pre></td></tr></table></figure><p>MemberSegmentReadonly结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">MemberSegmentReadonly</span> = &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">number</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">readonly</span> age?: <span class="built_in">number</span> | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">readonly</span> address?: <span class="built_in">string</span> | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">male</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">friends</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">hoby</span>: [<span class="built_in">number</span>, <span class="built_in">string</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><h5 id="Record-将-K-中所有的属性的值转化为-T-类型"><a href="#Record-将-K-中所有的属性的值转化为-T-类型" class="headerlink" title="Record 将 K 中所有的属性的值转化为 T 类型"></a>Record 将 K 中所有的属性的值转化为 T 类型</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Record 将 K 中所有的属性的值转化为 T 类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Record</span>&lt;K <span class="keyword">extends</span> keyof <span class="built_in">any</span>, T&gt; = &#123; [P <span class="keyword">in</span> K]: T &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">RecordValue</span> = <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt;;</span><br></pre></td></tr></table></figure><p>RecordValue结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">RecordValue</span> = &#123;</span><br><span class="line">  [<span class="attr">x</span>: <span class="built_in">string</span>]: <span class="built_in">number</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><h5 id="Pick-从-T-中取出-一系列-K-的属性"><a href="#Pick-从-T-中取出-一系列-K-的属性" class="headerlink" title="Pick 从 T 中取出 一系列 K 的属性"></a>Pick 从 T 中取出 一系列 K 的属性</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pick 从 T 中取出 一系列 K 的属性</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Pick</span>&lt;T, K <span class="keyword">extends</span> keyof T&gt; = &#123; [P <span class="keyword">in</span> K]: T[P] &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PickValue</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">MemberSegment</span>, <span class="string">&#x27;address&#x27;</span> | <span class="string">&#x27;number&#x27;</span>&gt;;</span><br></pre></td></tr></table></figure><p>PickValue结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PickValue</span> = &#123;</span><br><span class="line">  <span class="attr">number</span>: <span class="built_in">string</span>;</span><br><span class="line">  address?: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><h5 id="Exclude-从-T-中找出-U-中没有的元素-换种更加贴近语义的说法其实就是从T-中排除-U"><a href="#Exclude-从-T-中找出-U-中没有的元素-换种更加贴近语义的说法其实就是从T-中排除-U" class="headerlink" title="Exclude 从 T 中找出 U 中没有的元素, 换种更加贴近语义的说法其实就是从T 中排除 U"></a>Exclude 从 T 中找出 U 中没有的元素, 换种更加贴近语义的说法其实就是从T 中排除 U</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Exclude 从 T 中找出 U 中没有的元素, 换种更加贴近语义的说法其实就是从T 中排除 U</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Exclude</span>&lt;T, U&gt; = T <span class="keyword">extends</span> U ? <span class="built_in">never</span> : T;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ExcludeValue</span> = <span class="title class_">Exclude</span>&lt;<span class="number">1</span> | <span class="number">2</span>, <span class="number">1</span> | <span class="number">3</span>&gt;;</span><br></pre></td></tr></table></figure><p>ExcludeValue结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">ExcludeValue</span> = <span class="number">2</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="Extract-T-包含在-U-中的元素-换种更加贴近语义的说法就是从-T-中提取出-U"><a href="#Extract-T-包含在-U-中的元素-换种更加贴近语义的说法就是从-T-中提取出-U" class="headerlink" title="Extract  T 包含在 U 中的元素, 换种更加贴近语义的说法就是从 T 中提取出 U"></a>Extract  T 包含在 U 中的元素, 换种更加贴近语义的说法就是从 T 中提取出 U</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Extract  T 包含在 U 中的元素, 换种更加贴近语义的说法就是从 T 中提取出 U</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Extract</span>&lt;T, U&gt; = T <span class="keyword">extends</span> U ? T : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ExtractValue</span> = <span class="title class_">Extract</span>&lt;<span class="number">1</span> | <span class="number">2</span>, <span class="number">1</span> | <span class="number">3</span>&gt;;</span><br></pre></td></tr></table></figure><p>ExtractValue结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">ExtractValue</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="Omit-实现忽略对象某些属性功能"><a href="#Omit-实现忽略对象某些属性功能" class="headerlink" title="Omit 实现忽略对象某些属性功能"></a>Omit 实现忽略对象某些属性功能</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Omit 实现忽略对象某些属性功能</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Omit</span>&lt;T, K <span class="keyword">extends</span> keyof T&gt; = <span class="title class_">PickDefine</span>&lt;T, <span class="title class_">ExcludeDefine</span>&lt;keyof T, K&gt;&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Members</span> = <span class="title class_">Omit</span>&lt;<span class="title class_">MemberSegment</span>, <span class="string">&#x27;age&#x27;</span> | <span class="string">&#x27;friends&#x27;</span>&gt;;</span><br></pre></td></tr></table></figure><p>Members结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Members</span> = &#123;</span><br><span class="line">  <span class="attr">number</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">hoby</span>: [<span class="built_in">number</span>, <span class="built_in">string</span>];</span><br><span class="line">  address?: <span class="built_in">string</span> | <span class="literal">undefined</span>;</span><br><span class="line">  <span class="attr">male</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h5 id="ReturnType-获取函数的返回类型-infer-第1种使用方式"><a href="#ReturnType-获取函数的返回类型-infer-第1种使用方式" class="headerlink" title="ReturnType 获取函数的返回类型 infer 第1种使用方式"></a>ReturnType 获取函数的返回类型 infer 第<strong>1</strong>种使用方式</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ReturnType 获取函数的返回类型 infer 第1种使用方式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"><span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">string</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReturnType</span>&lt;T <span class="title function_">extends</span> (...<span class="attr">arg</span>: <span class="built_in">any</span>[]) =&gt; <span class="built_in">any</span>&gt; = T <span class="title function_">extends</span> (...<span class="attr">arg</span>: <span class="built_in">any</span>[]) =&gt; infer R ? R : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReturnTypeValue</span> = <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> add&gt;;</span><br></pre></td></tr></table></figure><p>ReturnTypeValue结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">ReturnTypeValue</span> = <span class="built_in">string</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="Parameters-获取函数的参数类型-infer-第2种使用方式"><a href="#Parameters-获取函数的参数类型-infer-第2种使用方式" class="headerlink" title="Parameters 获取函数的参数类型 infer 第2种使用方式"></a>Parameters 获取函数的参数类型 infer 第<strong>2</strong>种使用方式</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Parameters 获取函数的参数类型 infer 第2种使用方式</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Parameters</span>&lt;T <span class="title function_">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; <span class="built_in">any</span>&gt; = T <span class="title function_">extends</span> (...<span class="attr">args</span>: infer R) =&gt; <span class="built_in">any</span> ? R : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ParametersValue</span> = <span class="title class_">Parameters</span>&lt;<span class="keyword">typeof</span> add&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Params</span> = <span class="title class_">ParametersValue</span>[<span class="built_in">number</span>];</span><br></pre></td></tr></table></figure><p>ParametersValue、Params结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">ParametersValue</span> = [<span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">string</span>];</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Params</span> = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="获取接口中所有的类型-infer-第3种使用方式"><a href="#获取接口中所有的类型-infer-第3种使用方式" class="headerlink" title="获取接口中所有的类型 infer 第3种使用方式"></a>获取接口中所有的类型 infer 第<strong>3</strong>种使用方式</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// infer 第3种使用方式</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">InferType</span>&lt;T&gt; = T <span class="keyword">extends</span> &#123; [K <span class="keyword">in</span> keyof T]: (infer R) &#125; ? R : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">InferTypeValue</span> = <span class="title class_">InferType</span>&lt;<span class="title class_">Atype</span>&gt;;</span><br></pre></td></tr></table></figure><p>InferTypeValue结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">InferTypeValue</span> = <span class="built_in">string</span> | <span class="built_in">number</span> | <span class="built_in">boolean</span> | (<span class="built_in">string</span> | <span class="built_in">number</span> | <span class="built_in">boolean</span>)[];</span><br></pre></td></tr></table></figure><ul><li><h5 id="扁平化数据类型-infer-第4种使用方式"><a href="#扁平化数据类型-infer-第4种使用方式" class="headerlink" title="扁平化数据类型 infer 第4种使用方式"></a>扁平化数据类型 infer 第<strong>4</strong>种使用方式</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 扁平化数据类型 infer 第4种使用方式</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">FlatText</span> = <span class="built_in">boolean</span> | <span class="built_in">symbol</span> | [</span><br><span class="line">  <span class="built_in">number</span>,</span><br><span class="line">  <span class="built_in">string</span>,</span><br><span class="line">  <span class="title class_">HTMLAudioElement</span>,</span><br><span class="line">  <span class="title class_">HTMLMapElement</span>[],</span><br><span class="line">  (<span class="title class_">Body</span> | <span class="title class_">Document</span> | <span class="title class_">HTMLAreaElement</span>)[],</span><br><span class="line">  [<span class="title class_">HTMLAllCollection</span>, [<span class="title class_">HTMLDivElement</span>, <span class="title class_">HTMLCanvasElement</span>]]</span><br><span class="line">];</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Flat</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="built_in">any</span>[] ? T <span class="title function_">extends</span> (infer U)[] ? <span class="title class_">Flat</span>&lt;U&gt; : T : T;</span><br></pre></td></tr></table></figure><p>InferTypeValue结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">FlatValue</span> = <span class="built_in">string</span> | <span class="built_in">number</span> | <span class="built_in">boolean</span> | <span class="built_in">symbol</span> | <span class="title class_">HTMLAudioElement</span> | <span class="title class_">HTMLMapElement</span> | <span class="title class_">Body</span> | <span class="title class_">Document</span> | <span class="title class_">HTMLAreaElement</span> | <span class="title class_">HTMLAllCollection</span> | <span class="title class_">HTMLDivElement</span> | <span class="title class_">HTMLCanvasElement</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="联合类型交集、并集"><a href="#联合类型交集、并集" class="headerlink" title="联合类型交集、并集"></a>联合类型交集、并集</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 联合类型交集、并集</span></span><br><span class="line"><span class="keyword">type</span> E = <span class="string">&quot;a&quot;</span> | <span class="string">&quot;b&quot;</span> | <span class="string">&quot;c&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> F = <span class="string">&quot;a&quot;</span> | <span class="string">&quot;c&quot;</span> | <span class="string">&quot;d&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> G = E &amp; F; <span class="comment">// 交集</span></span><br><span class="line"><span class="keyword">type</span> H = E | F; <span class="comment">// 并集</span></span><br></pre></td></tr></table></figure><p>G、H结果：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> G = <span class="string">&quot;a&quot;</span> | <span class="string">&quot;c&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> H = <span class="string">&quot;a&quot;</span> | <span class="string">&quot;b&quot;</span> | <span class="string">&quot;c&quot;</span> | <span class="string">&quot;d&quot;</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="interface-和-amp-语法"><a href="#interface-和-amp-语法" class="headerlink" title="interface | 和 &amp; 语法"></a>interface | 和 &amp; 语法</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// interface | 和 &amp; 语法</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">In1</span> &#123;</span><br><span class="line">  <span class="attr">A</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">B</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">In2</span> &#123;</span><br><span class="line">  <span class="attr">B</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">C</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">In3</span> = <span class="title class_">In1</span> | <span class="title class_">In2</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">In5</span> = keyof <span class="title class_">In3</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">z</span>: <span class="title class_">PickDefine</span>&lt;<span class="title class_">In3</span>, keyof <span class="title class_">In3</span>&gt; = &#123;</span><br><span class="line">  <span class="attr">B</span>: <span class="number">111</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">In4</span> = <span class="title class_">In1</span> &amp; <span class="title class_">In2</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">In6</span> = keyof <span class="title class_">In4</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">z1</span>: <span class="title class_">PickDefine</span>&lt;<span class="title class_">In4</span>, keyof <span class="title class_">In4</span>&gt; = &#123;</span><br><span class="line">  <span class="attr">A</span>: <span class="string">&#x27;1111&#x27;</span>,</span><br><span class="line">  <span class="attr">B</span>: <span class="number">111</span>,</span><br><span class="line">  <span class="attr">C</span>: <span class="string">&#x27;1111&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>interface 的|和&amp;语法：</p><p>| 两个接口满足其中一个则取的<strong>B</strong>属性，原因是不能同时满足两个接口的属性，所以只能取交集属性；</p><p>&amp;两个都要满足则取<strong>A</strong>、<strong>B</strong>、<strong>C</strong>属性；</p><p>In5和In6结果如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">In5</span> = <span class="string">&quot;B&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">In6</span> = <span class="string">&quot;A&quot;</span> | <span class="string">&quot;B&quot;</span> | <span class="string">&quot;C&quot;</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="Promise所需工具"><a href="#Promise所需工具" class="headerlink" title="Promise所需工具"></a>Promise所需工具</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PromiseData</span> = <span class="title class_">Promise</span>&lt;<span class="title class_">MemberSegment</span>&gt;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">axios</span>(<span class="params"></span>): <span class="title class_">PromiseData</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">() =&gt;</span> &#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReturnT</span>&lt;T <span class="title function_">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; <span class="built_in">any</span>&gt; = T <span class="title function_">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; infer R ? R : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PromiseResult</span> = <span class="title class_">Awaited</span>&lt;<span class="title class_">ReturnT</span>&lt;<span class="keyword">typeof</span> axios&gt;&gt;</span><br></pre></td></tr></table></figure><p>PromiseResult结果：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PromiseResult</span> = <span class="title class_">MemberSegment</span>;</span><br></pre></td></tr></table></figure><ul><li><h5 id="const用法"><a href="#const用法" class="headerlink" title="const用法"></a>const用法</h5></li></ul><p>不使用const的对象</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">  <span class="attr">sex</span>: <span class="string">&#x27;man&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const user: &#123;</span></span><br><span class="line"><span class="comment">//   age: number;</span></span><br><span class="line"><span class="comment">//   name: string;</span></span><br><span class="line"><span class="comment">//   sex: string;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><p>使用const的对象</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">  <span class="attr">sex</span>: <span class="string">&#x27;man&#x27;</span></span><br><span class="line">&#125; <span class="keyword">as</span> <span class="keyword">const</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const user: &#123;</span></span><br><span class="line"><span class="comment">//   readonly age: 1;</span></span><br><span class="line"><span class="comment">//   readonly name: &quot;zhangsan&quot;;</span></span><br><span class="line"><span class="comment">//   readonly sex: &quot;man&quot;;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><p>不使用const的数组</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;t&#x27;</span>];</span><br><span class="line"><span class="comment">// const arr: string[]</span></span><br></pre></td></tr></table></figure><p>使用const的数组</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;t&#x27;</span>] <span class="keyword">as</span> <span class="keyword">const</span>;</span><br><span class="line"><span class="comment">// const arr: readonly [&quot;r&quot;, &quot;t&quot;]</span></span><br></pre></td></tr></table></figure><ul><li><h5 id="获取元素的值"><a href="#获取元素的值" class="headerlink" title="获取元素的值"></a>获取元素的值</h5></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">  <span class="attr">sex</span>: <span class="string">&#x27;man&#x27;</span></span><br><span class="line">&#125; <span class="keyword">as</span> <span class="keyword">const</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1、最简单的实现方式</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Values</span>&lt;T&gt; = T[keyof T];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、复杂的实现方式</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Values1</span>&lt;T&gt; = T <span class="keyword">extends</span> &#123; [K <span class="keyword">in</span> keyof T]: infer R &#125; ? R : <span class="built_in">never</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> V = <span class="title class_">Values</span>&lt;<span class="keyword">typeof</span> user&gt;;</span><br><span class="line"><span class="comment">// type V = 1 | &quot;zhangsan&quot; | &quot;man&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">V1</span> = <span class="title class_">Values</span>&lt;<span class="keyword">typeof</span> user&gt;;</span><br><span class="line"><span class="comment">// type V = 1 | &quot;zhangsan&quot; | &quot;man&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
          <category> 泛型(Generics) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-Getx-嵌套导航、多语言、主题、Snackbar、Dialog、BottomSheet</title>
      <link href="/2022/09/11/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-%E5%B5%8C%E5%A5%97%E5%AF%BC%E8%88%AA%E3%80%81%E5%A4%9A%E8%AF%AD%E8%A8%80%E3%80%81%E4%B8%BB%E9%A2%98%E3%80%81Snackbar%E3%80%81Dialog%E3%80%81BottomSheet/"/>
      <url>/2022/09/11/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-%E5%B5%8C%E5%A5%97%E5%AF%BC%E8%88%AA%E3%80%81%E5%A4%9A%E8%AF%AD%E8%A8%80%E3%80%81%E4%B8%BB%E9%A2%98%E3%80%81Snackbar%E3%80%81Dialog%E3%80%81BottomSheet/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li>嵌套导航</li><li>多语言</li><li>主题</li><li>3 UI 组件<ul><li>Snackbar</li><li>Dialog</li><li>BottomSheet</li></ul></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="嵌套导航"><a href="#嵌套导航" class="headerlink" title="嵌套导航"></a>嵌套导航</h3><p><img src="/assets/image-20220911222751579.png" alt="image-20220911222751579"></p><p>几个 <code>Navigator</code> widget ，并排或者嵌套，他们是通过属性 <code>key</code> 来区分的，具体去哪里是通过 <code>onGenerateRoute</code> 实现的，在 getx 中 我们要把业务写到 <code>controller</code>中，状态切换用 <code>Obx</code> 控制 <code>BottomNavigationBar</code>，代码如下。</p><ul><li>lib/pages/nested_navigation/controller.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NestedController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> NestedController <span class="keyword">get</span> to =&gt; Get.find();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> currentIndex = <span class="number">0.</span>obs;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> pages = &lt;<span class="built_in">String</span>&gt;[<span class="string">&#x27;/list&#x27;</span>, <span class="string">&#x27;/detail&#x27;</span>, <span class="string">&#x27;/login&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> changePage(<span class="built_in">int</span> index) &#123;</span><br><span class="line">    currentIndex.value = index;</span><br><span class="line">    Get.toNamed(pages[index], id: <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Route? onGenerateRoute(RouteSettings settings) &#123;</span><br><span class="line">    <span class="keyword">if</span> (settings.name == <span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> GetPageRoute(</span><br><span class="line">        settings: settings,</span><br><span class="line">        page: () =&gt; LoginView(),</span><br><span class="line">        transition: Transition.topLevel,</span><br><span class="line">      );</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (settings.name == <span class="string">&#x27;/list&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> GetPageRoute(</span><br><span class="line">        settings: settings,</span><br><span class="line">        page: () =&gt; ListIndexView(),</span><br><span class="line">        transition: Transition.rightToLeftWithFade,</span><br><span class="line">      );</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (settings.name == <span class="string">&#x27;/detail&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> GetPageRoute(</span><br><span class="line">        settings: settings,</span><br><span class="line">        page: () =&gt; DetailView(),</span><br><span class="line">        transition: Transition.fadeIn,</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/pages/nested_navigation/binding.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NestedBinding</span> <span class="keyword">extends</span> <span class="title">Bindings</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dependencies() &#123;</span><br><span class="line">    Get.lazyPut(() =&gt; NestedController());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/pages/nested_navigation/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NestedNavView</span> <span class="keyword">extends</span> <span class="title">GetView</span>&lt;<span class="title">NestedController</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;嵌套路由&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        color: Colors.amber,</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Container(</span><br><span class="line">              child: Text(<span class="string">&quot;占位条&quot;</span>),</span><br><span class="line">              height: <span class="number">100</span>,</span><br><span class="line">            ),</span><br><span class="line">            SizedBox(</span><br><span class="line">              height: <span class="number">300</span>,</span><br><span class="line">              child: Navigator(</span><br><span class="line">                key: Get.nestedKey(<span class="number">1</span>),</span><br><span class="line">                initialRoute: <span class="string">&#x27;/list&#x27;</span>,</span><br><span class="line">                onGenerateRoute: controller.onGenerateRoute,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      bottomNavigationBar: Obx(</span><br><span class="line">        () =&gt; BottomNavigationBar(</span><br><span class="line">          items: <span class="keyword">const</span> &lt;BottomNavigationBarItem&gt;[</span><br><span class="line">            BottomNavigationBarItem(</span><br><span class="line">              icon: Icon(Icons.list),</span><br><span class="line">              label: <span class="string">&#x27;列表&#x27;</span>,</span><br><span class="line">            ),</span><br><span class="line">            BottomNavigationBarItem(</span><br><span class="line">              icon: Icon(Icons.details),</span><br><span class="line">              label: <span class="string">&#x27;详情&#x27;</span>,</span><br><span class="line">            ),</span><br><span class="line">            BottomNavigationBarItem(</span><br><span class="line">              icon: Icon(Icons.login),</span><br><span class="line">              label: <span class="string">&#x27;登录&#x27;</span>,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">          currentIndex: controller.currentIndex.value,</span><br><span class="line">          selectedItemColor: Colors.pink,</span><br><span class="line">          onTap: controller.changePage,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.NestedNavigator,</span><br><span class="line">  page: () =&gt; NestedNavView(),</span><br><span class="line">  binding: NestedBinding(),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="多语言"><a href="#多语言" class="headerlink" title="多语言"></a>多语言</h3><p><img src="/assets/image-20220911223258044.png" alt="image-20220911223258044"></p><ul><li>编写多语言字典</li></ul><p>文件名格式 <code>[国家]_[语言].dart</code></p><p>lib/common/lang/en_US.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; en_US = &#123;</span><br><span class="line">  <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;This is Title!&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;login&#x27;</span>: <span class="string">&#x27;logged in as @name with email @email&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>lib/common/lang/zh_Hans.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; zh_Hans = &#123;</span><br><span class="line">  <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;这是标题&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;login&#x27;</span>: <span class="string">&#x27;登录用户 @name，邮箱账号 @email&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>lib/common/lang/zh_HK.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; zh_HK = &#123;</span><br><span class="line">  <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;這是標題&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;login&#x27;</span>: <span class="string">&#x27;登錄用戶 @name，郵箱賬號 @email&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>继承 Translations</li></ul><p>lib/common/lang/translation_service.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TranslationService</span> <span class="keyword">extends</span> <span class="title">Translations</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> Locale? <span class="keyword">get</span> locale =&gt; Get.deviceLocale;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> fallbackLocale = Locale(<span class="string">&#x27;en&#x27;</span>, <span class="string">&#x27;US&#x27;</span>);</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt;&gt; <span class="keyword">get</span> keys =&gt; &#123;</span><br><span class="line">        <span class="string">&#x27;en_US&#x27;</span>: en_US,</span><br><span class="line">        <span class="string">&#x27;zh_Hans&#x27;</span>: zh_Hans,</span><br><span class="line">        <span class="string">&#x27;zh_HK&#x27;</span>: zh_HK,</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>初始 GetMaterialApp</li></ul><p>lib/main.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      ...</span><br><span class="line"></span><br><span class="line">      locale: TranslationService.locale,</span><br><span class="line">      fallbackLocale: TranslationService.fallbackLocale,</span><br><span class="line">      translations: TranslationService(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>locale</code> 当前系统语言</p><p><code>fallbackLocale</code> 如果找不到对应字典，默认值</p><p><code>translations</code> 字典列表</p><ul><li>切换 updateLocale</li></ul><p>采用扩展操作符方式调用显示，点赞 <code>xxx.tr,</code></p><p>切换语言 <code>Get.updateLocale</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;title -&gt; &quot;</span> + <span class="string">&#x27;title&#x27;</span>.tr,</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> locale = Locale(<span class="string">&#x27;zh&#x27;</span>, <span class="string">&#x27;HK&#x27;</span>);</span><br><span class="line">Get.updateLocale(locale);</span><br></pre></td></tr></table></figure><p>lib/pages/lang/index.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LangView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> LangView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;多语言&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Text(</span><br><span class="line">              <span class="string">&quot;title -&gt; &quot;</span> + <span class="string">&#x27;title&#x27;</span>.tr,</span><br><span class="line">              style: TextStyle(fontSize: <span class="number">24</span>),</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line">            Text(</span><br><span class="line">              <span class="string">&quot;login -&gt; &quot;</span> +</span><br><span class="line">                  <span class="string">&#x27;login&#x27;</span>.trParams(</span><br><span class="line">                      &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;ducafecat&#x27;</span>, <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;ducafecat@gmail.com&#x27;</span>&#125;)!,</span><br><span class="line">              style: TextStyle(fontSize: <span class="number">24</span>),</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line">            ListTile(</span><br><span class="line">              title: Text(<span class="string">&quot;切换语言&quot;</span>),</span><br><span class="line">              subtitle: Text(<span class="string">&#x27;zh-HK&#x27;</span>),</span><br><span class="line">              onTap: () &#123;</span><br><span class="line">                <span class="keyword">var</span> locale = Locale(<span class="string">&#x27;zh&#x27;</span>, <span class="string">&#x27;HK&#x27;</span>);</span><br><span class="line">                Get.updateLocale(locale);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            ListTile(</span><br><span class="line">              title: Text(<span class="string">&quot;切换语言&quot;</span>),</span><br><span class="line">              subtitle: Text(<span class="string">&#x27;zh-Hans&#x27;</span>),</span><br><span class="line">              onTap: () &#123;</span><br><span class="line">                <span class="keyword">var</span> locale = Locale(<span class="string">&#x27;zh&#x27;</span>, <span class="string">&#x27;Hans&#x27;</span>);</span><br><span class="line">                Get.updateLocale(locale);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            ListTile(</span><br><span class="line">              title: Text(<span class="string">&quot;切换语言&quot;</span>),</span><br><span class="line">              subtitle: Text(<span class="string">&#x27;en-US&#x27;</span>),</span><br><span class="line">              onTap: () &#123;</span><br><span class="line">                <span class="keyword">var</span> locale = Locale(<span class="string">&#x27;en&#x27;</span>, <span class="string">&#x27;US&#x27;</span>);</span><br><span class="line">                Get.updateLocale(locale);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><p><img src="/assets/image-20220911223318238.png" alt="image-20220911223318238"></p><p>直接 <code>Get.changeTheme</code> 切换 <code>ThemeData</code> 数据。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onTap: () &#123;</span><br><span class="line">  Get.changeTheme(</span><br><span class="line">      Get.isDarkMode ? ThemeData.light() : ThemeData.dark());</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li>lib/pages/theme/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThemeView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> ThemeView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;主题&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Container(</span><br><span class="line">              height: <span class="number">100</span>,</span><br><span class="line">              child: Align(</span><br><span class="line">                  alignment: Alignment.center,</span><br><span class="line">                  child: Text(</span><br><span class="line">                    <span class="string">&quot;是否黑色主题 -&gt; &quot;</span> + Get.isDarkMode.toString(),</span><br><span class="line">                    style: TextStyle(fontSize: <span class="number">24</span>),</span><br><span class="line">                  )),</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line">            ListTile(</span><br><span class="line">              title: Text(<span class="string">&quot;切换主题&quot;</span>),</span><br><span class="line">              subtitle: Text(<span class="string">&#x27;Get.changeTheme&#x27;</span>),</span><br><span class="line">              onTap: () &#123;</span><br><span class="line">                Get.changeTheme(</span><br><span class="line">                    Get.isDarkMode ? ThemeData.light() : ThemeData.dark());</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Snackbar"><a href="#Snackbar" class="headerlink" title="Snackbar"></a>Snackbar</h3><p><img src="/assets/2021-05-11-05-46-22.png" alt="2021-05-11-05-46-22"></p><ul><li>调用</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onTap: () =&gt; Get.snackbar(</span><br><span class="line">  <span class="string">&quot;标题&quot;</span>,</span><br><span class="line">  <span class="string">&quot;消息&quot;</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>参数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> snackbar&lt;T&gt;(</span><br><span class="line">  <span class="built_in">String</span> title,</span><br><span class="line">  <span class="built_in">String</span> message, &#123;</span><br><span class="line">  Color? colorText,</span><br><span class="line">  <span class="built_in">Duration?</span> duration,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">with instantInit = false you can put snackbar on initState</span></span></span><br><span class="line">  <span class="built_in">bool</span> instantInit = <span class="keyword">true</span>,</span><br><span class="line">  SnackPosition? snackPosition,</span><br><span class="line">  Widget? titleText,</span><br><span class="line">  Widget? messageText,</span><br><span class="line">  Widget? icon,</span><br><span class="line">  <span class="built_in">bool?</span> shouldIconPulse,</span><br><span class="line">  <span class="built_in">double?</span> maxWidth,</span><br><span class="line">  EdgeInsets? margin,</span><br><span class="line">  EdgeInsets? padding,</span><br><span class="line">  <span class="built_in">double?</span> borderRadius,</span><br><span class="line">  Color? borderColor,</span><br><span class="line">  <span class="built_in">double?</span> borderWidth,</span><br><span class="line">  Color? backgroundColor,</span><br><span class="line">  Color? leftBarIndicatorColor,</span><br><span class="line">  <span class="built_in">List</span>&lt;BoxShadow&gt;? boxShadows,</span><br><span class="line">  Gradient? backgroundGradient,</span><br><span class="line">  TextButton? mainButton,</span><br><span class="line">  OnTap? onTap,</span><br><span class="line">  <span class="built_in">bool?</span> isDismissible,</span><br><span class="line">  <span class="built_in">bool?</span> showProgressIndicator,</span><br><span class="line">  SnackDismissDirection? dismissDirection,</span><br><span class="line">  AnimationController? progressIndicatorController,</span><br><span class="line">  Color? progressIndicatorBackgroundColor,</span><br><span class="line">  Animation&lt;Color&gt;? progressIndicatorValueColor,</span><br><span class="line">  SnackStyle? snackStyle,</span><br><span class="line">  Curve? forwardAnimationCurve,</span><br><span class="line">  Curve? reverseAnimationCurve,</span><br><span class="line">  <span class="built_in">Duration?</span> animationDuration,</span><br><span class="line">  <span class="built_in">double?</span> barBlur,</span><br><span class="line">  <span class="built_in">double?</span> overlayBlur,</span><br><span class="line">  SnackbarStatusCallback? snackbarStatus,</span><br><span class="line">  Color? overlayColor,</span><br><span class="line">  Form? userInputForm,</span><br><span class="line">&#125;) <span class="keyword">async</span> &#123;</span><br></pre></td></tr></table></figure><h3 id="Dialog"><a href="#Dialog" class="headerlink" title="Dialog"></a>Dialog</h3><p><img src="/assets/2021-05-11-05-48-41.png" alt="2021-05-11-05-48-41"></p><ul><li>调用</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">onTap: () =&gt; Get.defaultDialog(</span><br><span class="line">  title: <span class="string">&quot;标题&quot;</span>,</span><br><span class="line">  content: Column(</span><br><span class="line">    children: [</span><br><span class="line">      Text(<span class="string">&quot;第1行&quot;</span>),</span><br><span class="line">      Text(<span class="string">&quot;第2行&quot;</span>),</span><br><span class="line">      Text(<span class="string">&quot;第3行&quot;</span>),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">  textConfirm: <span class="string">&quot;确认&quot;</span>,</span><br><span class="line">  textCancel: <span class="string">&quot;取消&quot;</span>,</span><br><span class="line">  onConfirm: () =&gt; Get.back(),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>参数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;T?&gt; defaultDialog&lt;T&gt;(&#123;</span><br><span class="line">  <span class="built_in">String</span> title = <span class="string">&quot;Alert&quot;</span>,</span><br><span class="line">  TextStyle? titleStyle,</span><br><span class="line">  Widget? content,</span><br><span class="line">  VoidCallback? onConfirm,</span><br><span class="line">  VoidCallback? onCancel,</span><br><span class="line">  VoidCallback? onCustom,</span><br><span class="line">  Color? cancelTextColor,</span><br><span class="line">  Color? confirmTextColor,</span><br><span class="line">  <span class="built_in">String?</span> textConfirm,</span><br><span class="line">  <span class="built_in">String?</span> textCancel,</span><br><span class="line">  <span class="built_in">String?</span> textCustom,</span><br><span class="line">  Widget? confirm,</span><br><span class="line">  Widget? cancel,</span><br><span class="line">  Widget? custom,</span><br><span class="line">  Color? backgroundColor,</span><br><span class="line">  <span class="built_in">bool</span> barrierDismissible = <span class="keyword">true</span>,</span><br><span class="line">  Color? buttonColor,</span><br><span class="line">  <span class="built_in">String</span> middleText = <span class="string">&quot;Dialog made in 3 lines of code&quot;</span>,</span><br><span class="line">  TextStyle? middleTextStyle,</span><br><span class="line">  <span class="built_in">double</span> radius = <span class="number">20.0</span>,</span><br><span class="line">  <span class="comment">//   ThemeData themeData,</span></span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt;? actions,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// onWillPop Scope</span></span><br><span class="line">  WillPopCallback? onWillPop,</span><br><span class="line">&#125;) &#123;</span><br></pre></td></tr></table></figure><h3 id="BottomSheet"><a href="#BottomSheet" class="headerlink" title="BottomSheet"></a>BottomSheet</h3><p><img src="/assets/2021-05-11-05-49-55.png" alt="2021-05-11-05-49-55"></p><ul><li>调用</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  onTap: () =&gt; Get.bottomSheet(</span><br><span class="line">    Container(</span><br><span class="line">      height: <span class="number">200</span>,</span><br><span class="line">      color: Colors.white,</span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">          Text(<span class="string">&quot;第1行&quot;</span>),</span><br><span class="line">          Text(<span class="string">&quot;第2行&quot;</span>),</span><br><span class="line">          Text(<span class="string">&quot;第3行&quot;</span>),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>参数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> ExtensionBottomSheet <span class="keyword">on</span> GetInterface &#123;</span><br><span class="line">  Future&lt;T?&gt; bottomSheet&lt;T&gt;(</span><br><span class="line">    Widget bottomsheet, &#123;</span><br><span class="line">    Color? backgroundColor,</span><br><span class="line">    <span class="built_in">double?</span> elevation,</span><br><span class="line">    <span class="built_in">bool</span> persistent = <span class="keyword">true</span>,</span><br><span class="line">    ShapeBorder? shape,</span><br><span class="line">    Clip? clipBehavior,</span><br><span class="line">    Color? barrierColor,</span><br><span class="line">    <span class="built_in">bool?</span> ignoreSafeArea,</span><br><span class="line">    <span class="built_in">bool</span> isScrollControlled = <span class="keyword">false</span>,</span><br><span class="line">    <span class="built_in">bool</span> useRootNavigator = <span class="keyword">false</span>,</span><br><span class="line">    <span class="built_in">bool</span> isDismissible = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> enableDrag = <span class="keyword">true</span>,</span><br><span class="line">    RouteSettings? settings,</span><br><span class="line">    <span class="built_in">Duration?</span> enterBottomSheetDuration,</span><br><span class="line">    <span class="built_in">Duration?</span> exitBottomSheetDuration,</span><br><span class="line">  &#125;) &#123;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> Getx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-Getx-GetConnect、StateMixin、SuperController、GetController+Dio</title>
      <link href="/2022/09/10/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-GetConnect%E3%80%81StateMixin%E3%80%81SuperController%E3%80%81GetController-Dio/"/>
      <url>/2022/09/10/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-GetConnect%E3%80%81StateMixin%E3%80%81SuperController%E3%80%81GetController-Dio/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="GetConnect"><a href="#GetConnect" class="headerlink" title="GetConnect"></a>GetConnect</h3><p><img src="/assets/GetContent.png" alt="GetContent"></p><ul><li>瞎聊设计模式</li></ul><p><code>Provider</code> 提供者模式 位于高层 由他来决定从哪里、提供什么</p><p>相对应的有 <code>Consumer</code> 消费者模式</p><p><code>Repository</code> 模式，这层有 <code>OO</code> 面向对象的意思，用来处理拉取数据细节，这样到 <code>Controller</code> 控制器 这一层只要处理业务就行，可方便测试</p><p><code>DAO</code> 就是纯粹的数据访问层，没有 <code>00</code> 的概念</p><p><code>Service</code> <code>Model</code> <code>Entity</code> …</p><p>前端其实对数据加工、面向服务、领域模型偏弱，更多的是组件拆分、样式、布局，这才是要关系的，就算是测试也是 <code>E2E</code> 侧重不同。</p><p><code>E2E</code>（End To End）即端对端测试，属于黑盒测试，通过编写测试用例，自动化模拟用户操作，确保组件间通信正常，程序流数据传递如预期。</p><ul><li>封装 GetConnect</li></ul><p>lib/common/utils/base_provider.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseProvider</span> <span class="keyword">extends</span> <span class="title">GetConnect</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    httpClient.baseUrl = SERVER_API_URL;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 请求拦截</span></span><br><span class="line">    httpClient.addRequestModifier&lt;<span class="keyword">void</span>&gt;((request) &#123;</span><br><span class="line">      request.headers[<span class="string">&#x27;Authorization&#x27;</span>] = <span class="string">&#x27;12345678&#x27;</span>;</span><br><span class="line">      <span class="keyword">return</span> request;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 响应拦截</span></span><br><span class="line">    httpClient.addResponseModifier((request, response) &#123;</span><br><span class="line">      <span class="keyword">return</span> response;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Provider</li></ul><p>lib/pages/getConnect/provider.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">INewsProvider</span> </span>&#123;</span><br><span class="line">  Future&lt;Response&lt;NewsPageListResponseEntity&gt;&gt; getNews();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsProvider</span> <span class="keyword">extends</span> <span class="title">BaseProvider</span> <span class="keyword">implements</span> <span class="title">INewsProvider</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 新闻分页</span></span><br><span class="line">  <span class="comment">// @override</span></span><br><span class="line">  <span class="comment">// Future&lt;Response&lt;NewsPageListResponseEntity&gt;&gt; getNews() =&gt; get(&quot;/news&quot;);</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Future&lt;Response&lt;NewsPageListResponseEntity&gt;&gt; getNews() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> <span class="keyword">get</span>(<span class="string">&quot;/news&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> data = NewsPageListResponseEntity.fromJson(response.body);</span><br><span class="line">    <span class="keyword">return</span> Response(</span><br><span class="line">      statusCode: response.statusCode,</span><br><span class="line">      statusText: response.statusText,</span><br><span class="line">      body: data,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Repository</li></ul><p>lib/pages/getConnect/repository.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">INewsRepository</span> </span>&#123;</span><br><span class="line">  Future&lt;NewsPageListResponseEntity&gt; getNews();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsRepository</span> <span class="keyword">implements</span> <span class="title">INewsRepository</span> </span>&#123;</span><br><span class="line">  NewsRepository(&#123;<span class="keyword">required</span> <span class="keyword">this</span>.provider&#125;);</span><br><span class="line">  <span class="keyword">final</span> INewsProvider provider;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Future&lt;NewsPageListResponseEntity&gt; getNews() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> response = <span class="keyword">await</span> provider.getNews();</span><br><span class="line">    <span class="keyword">if</span> (response.status.hasError) &#123;</span><br><span class="line">      <span class="keyword">return</span> Future.error(response.statusText!);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> response.body!;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Controller</li></ul><p>lib/pages/getConnect/controller.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsController</span> <span class="keyword">extends</span> <span class="title">SuperController</span>&lt;<span class="title">NewsPageListResponseEntity</span>&gt; </span>&#123;</span><br><span class="line">  NewsController(&#123;<span class="keyword">required</span> <span class="keyword">this</span>.repository&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> INewsRepository repository;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Loading, Success, Error handle with 1 line of code</span></span><br><span class="line">    <span class="comment">// append(() =&gt; repository.getNews);</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 拉取新闻列表</span></span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt; getNewsPageList() <span class="keyword">async</span> &#123;</span><br><span class="line">    append(() =&gt; repository.getNews);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onReady() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;The build method is done. &#x27;</span></span><br><span class="line">        <span class="string">&#x27;Your controller is ready to call dialogs and snackbars&#x27;</span>);</span><br><span class="line">    <span class="keyword">super</span>.onReady();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onClose() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;onClose called&#x27;</span>);</span><br><span class="line">    <span class="keyword">super</span>.onClose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didChangeMetrics() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;the window size did change&#x27;</span>);</span><br><span class="line">    <span class="keyword">super</span>.didChangeMetrics();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didChangePlatformBrightness() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;platform change ThemeMode&#x27;</span>);</span><br><span class="line">    <span class="keyword">super</span>.didChangePlatformBrightness();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Future&lt;<span class="built_in">bool</span>&gt; didPushRoute(<span class="built_in">String</span> route) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;the route <span class="subst">$route</span> will be open&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.didPushRoute(route);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Future&lt;<span class="built_in">bool</span>&gt; didPopRoute() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;the current route will be closed&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.didPopRoute();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onDetached() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;onDetached called&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInactive() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;onInative called&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onPaused() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;onPaused called&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onResumed() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;onResumed called&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>GetView</li></ul><p>lib/pages/getConnect/view.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsView</span> <span class="keyword">extends</span> <span class="title">GetView</span>&lt;<span class="title">NewsController</span>&gt; </span>&#123;</span><br><span class="line">  NewsView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  _buildListView(NewsPageListResponseEntity? state) &#123;</span><br><span class="line">    <span class="keyword">return</span> ListView.separated(</span><br><span class="line">      itemCount: state != <span class="keyword">null</span> ? state.items!.length : <span class="number">0</span>,</span><br><span class="line">      itemBuilder: (context, index) &#123;</span><br><span class="line">        <span class="keyword">final</span> NewsItem item = state!.items![index];</span><br><span class="line">        <span class="keyword">return</span> ListTile(</span><br><span class="line">          onTap: () =&gt; <span class="keyword">null</span>,</span><br><span class="line">          title: Text(item.title),</span><br><span class="line">          trailing: Text(<span class="string">&quot;分类 <span class="subst">$&#123;item.category&#125;</span>&quot;</span>),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">      separatorBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">        <span class="keyword">return</span> Divider();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;GetConnect Page&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: controller.obx(</span><br><span class="line">        (state) =&gt; _buildListView(state),</span><br><span class="line">        onEmpty: Text(<span class="string">&quot;onEmpty&quot;</span>),</span><br><span class="line">        onLoading: Center(</span><br><span class="line">          child: Column(</span><br><span class="line">            children: [</span><br><span class="line">              Text(<span class="string">&quot;没有数据&quot;</span>),</span><br><span class="line">              ElevatedButton(</span><br><span class="line">                onPressed: () &#123;</span><br><span class="line">                  controller.getNewsPageList();</span><br><span class="line">                &#125;,</span><br><span class="line">                child: Text(<span class="string">&#x27;拉取数据&#x27;</span>),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        onError: (err) =&gt; Text(<span class="string">&quot;onEmpty&quot;</span> + err.toString()),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Bindings</li></ul><p>lib/pages/getConnect/bindings.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsBinding</span> <span class="keyword">implements</span> <span class="title">Bindings</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dependencies() &#123;</span><br><span class="line">    Get.lazyPut&lt;INewsProvider&gt;(() =&gt; NewsProvider());</span><br><span class="line">    Get.lazyPut&lt;INewsRepository&gt;(() =&gt; NewsRepository(provider: Get.find()));</span><br><span class="line">    Get.lazyPut(() =&gt; NewsController(repository: Get.find()));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>路由</li></ul><p>lib/common/routes/app_pages.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.GetConnect,</span><br><span class="line">  binding: NewsBinding(),</span><br><span class="line">  page: () =&gt; NewsView(),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="StateMixin"><a href="#StateMixin" class="headerlink" title="StateMixin"></a>StateMixin</h3><p><img src="/assets/GetContentStateMixin.png" alt="GetContentStateMixin"></p><p>雷同代码不再重复</p><ul><li>控制器 Mixin 如下</li></ul><p>lib/pages/getConnect_stateMixin/controller.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsStateMixinController</span> <span class="keyword">extends</span> <span class="title">GetxController</span></span></span><br><span class="line"><span class="class">    <span class="title">with</span> <span class="title">StateMixin</span>&lt;<span class="title">NewsPageListResponseEntity</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> NewsStateMixinProvider provider;</span><br><span class="line">  NewsStateMixinController(&#123;<span class="keyword">required</span> <span class="keyword">this</span>.provider&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 拉取新闻列表</span></span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt; getNewsPageList() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// 获取数据</span></span><br><span class="line">    <span class="keyword">final</span> Response response = <span class="keyword">await</span> provider.getNews();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断，如果有错误</span></span><br><span class="line">    <span class="keyword">if</span> (response.hasError) &#123;</span><br><span class="line">      <span class="comment">// 改变数据，传入错误状态，在ui中会处理这些错误</span></span><br><span class="line">      change(<span class="keyword">null</span>, status: RxStatus.error(response.statusText));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 否则，存储数据，改变状态为成功</span></span><br><span class="line">      <span class="keyword">var</span> data = NewsPageListResponseEntity.fromJson(response.body);</span><br><span class="line">      change(data, status: RxStatus.success());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>这种方式确实简化了很多代码</p></blockquote><h3 id="GetController-Dio"><a href="#GetController-Dio" class="headerlink" title="GetController + Dio"></a>GetController + Dio</h3><p>这种方式就是之前 <a href="https://github.com/ducafecat/flutter_learn_news">Flutter 新闻客户端</a> 的写法，能复用原来的 dio 代码。</p><ul><li>dio 基础类</li></ul><p>lib/common/utils/http.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  * http 操作类</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * 手册</span></span><br><span class="line"><span class="comment">  * https://github.com/flutterchina/dio/blob/master/README-ZH.md</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * 从 3 升级到 4</span></span><br><span class="line"><span class="comment">  * https://github.com/flutterchina/dio/blob/master/migration_to_4.x.md</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpUtil</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> HttpUtil _instance = HttpUtil._internal();</span><br><span class="line">  <span class="keyword">factory</span> HttpUtil() =&gt; _instance;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">late</span> Dio dio;</span><br><span class="line"></span><br><span class="line">  HttpUtil._internal() &#123;</span><br><span class="line">    <span class="comment">// BaseOptions、Options、RequestOptions 都可以配置参数，优先级别依次递增，且可以根据优先级别覆盖参数</span></span><br><span class="line">    BaseOptions options = <span class="keyword">new</span> BaseOptions(</span><br><span class="line">      <span class="comment">// 请求基地址,可以包含子路径</span></span><br><span class="line">      baseUrl: SERVER_API_URL,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// baseUrl: storage.read(key: STORAGE_KEY_APIURL) ?? SERVICE_API_BASEURL,</span></span><br><span class="line">      <span class="comment">//连接服务器超时时间，单位是毫秒.</span></span><br><span class="line">      connectTimeout: <span class="number">10000</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 响应流上前后两次接受到数据的间隔，单位为毫秒。</span></span><br><span class="line">      receiveTimeout: <span class="number">5000</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Http请求头.</span></span><br><span class="line">      headers: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">/// <span class="language-markdown">请求的Content-Type，默认值是&quot;application/json; charset=utf-8&quot;.</span></span></span><br><span class="line">      <span class="comment">/// <span class="language-markdown">如果您想以&quot;application/x-www-form-urlencoded&quot;格式编码请求数据,</span></span></span><br><span class="line">      <span class="comment">/// <span class="language-markdown">可以设置此选项为 <span class="code">`Headers.formUrlEncodedContentType`</span>,  这样[Dio]</span></span></span><br><span class="line">      <span class="comment">/// <span class="language-markdown">就会自动编码请求体.</span></span></span><br><span class="line">      contentType: <span class="string">&#x27;application/json; charset=utf-8&#x27;</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">/// <span class="language-markdown">[responseType] 表示期望以那种格式(方式)接受响应数据。</span></span></span><br><span class="line">      <span class="comment">/// <span class="language-markdown">目前 [ResponseType] 接受三种类型 <span class="code">`JSON`</span>, <span class="code">`STREAM`</span>, <span class="code">`PLAIN`</span>.</span></span></span><br><span class="line">      <span class="comment">///</span></span><br><span class="line">      <span class="comment">/// <span class="language-markdown">默认值是 <span class="code">`JSON`</span>, 当响应头中content-type为&quot;application/json&quot;时，dio 会自动将响应内容转化为json对象。</span></span></span><br><span class="line">      <span class="comment">/// <span class="language-markdown">如果想以二进制方式接受响应数据，如下载一个二进制文件，那么可以使用 <span class="code">`STREAM`</span>.</span></span></span><br><span class="line">      <span class="comment">///</span></span><br><span class="line">      <span class="comment">/// <span class="language-markdown">如果想以文本(字符串)格式接收响应数据，请使用 <span class="code">`PLAIN`</span>.</span></span></span><br><span class="line">      responseType: ResponseType.json,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    dio = <span class="keyword">new</span> Dio(options);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Cookie管理</span></span><br><span class="line">    CookieJar cookieJar = CookieJar();</span><br><span class="line">    dio.interceptors.add(CookieManager(cookieJar));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">restful get 操作</span></span></span><br><span class="line">  Future <span class="keyword">get</span>(</span><br><span class="line">    <span class="built_in">String</span> path, &#123;</span><br><span class="line">    dynamic? queryParameters,</span><br><span class="line">    Options? options,</span><br><span class="line">  &#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(</span><br><span class="line">      path,</span><br><span class="line">      queryParameters: queryParameters,</span><br><span class="line">      options: options,</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> response.data;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>api 定义</li></ul><p>lib/common/apis/news.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// <span class="language-markdown">新闻</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsAPI</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">翻页</span></span></span><br><span class="line">  <span class="keyword">static</span> Future&lt;NewsPageListResponseEntity&gt; newsPageList(</span><br><span class="line">      &#123;NewsRecommendRequestEntity? param&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> HttpUtil().<span class="keyword">get</span>(</span><br><span class="line">      <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">      queryParameters: param?.toJson(),</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> NewsPageListResponseEntity.fromJson(response);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>控制器</li></ul><p>lib/pages/getController_dio/controller.dart</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsDioController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newsPageList =</span><br><span class="line">      Rx&lt;NewsPageListResponseEntity&gt;(NewsPageListResponseEntity());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;onInit&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onClose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onClose();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;onClose&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getPageList() <span class="keyword">async</span> &#123;</span><br><span class="line">    newsPageList.value = <span class="keyword">await</span> NewsAPI.newsPageList();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> Getx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-Getx-状态管理、依赖加载</title>
      <link href="/2022/09/10/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E3%80%81%E4%BE%9D%E8%B5%96%E5%8A%A0%E8%BD%BD/"/>
      <url>/2022/09/10/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E3%80%81%E4%BE%9D%E8%B5%96%E5%8A%A0%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li>4 种状态管理<ul><li>Obx</li><li>GetX</li><li>GetBuilder</li><li>ValueBuilder</li></ul></li><li>防抖、限流 函数<ul><li>ever</li><li>once</li><li>debounce</li><li>interval</li></ul></li><li>依赖注入<ul><li>Get.put</li><li>Get.lazyPut</li></ul></li><li>视图组件<ul><li>GetView</li></ul></li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h3><h4 id="Obx"><a href="#Obx" class="headerlink" title="Obx"></a>Obx</h4><ul><li>lib/pages/state_obx/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateObxView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateObxView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> count = <span class="number">0.</span>obs;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;Obx(...)&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Obx(() =&gt; Text(<span class="string">&quot;count1 -&gt; &quot;</span> + count.toString())),</span><br><span class="line">            Obx(() =&gt; Text(<span class="string">&quot;count2 -&gt; &quot;</span> + count.toString())),</span><br><span class="line"></span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            Divider(),</span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                count.value++;</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;add&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>obs、extension、RxInt、Rx</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> StringExtension <span class="keyword">on</span> <span class="built_in">String</span> &#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">Returns a <span class="code">`RxString`</span> with [this] <span class="code">`String`</span> as initial value.</span></span></span><br><span class="line">  RxString <span class="keyword">get</span> obs =&gt; RxString(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> IntExtension <span class="keyword">on</span> <span class="built_in">int</span> &#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">Returns a <span class="code">`RxInt`</span> with [this] <span class="code">`int`</span> as initial value.</span></span></span><br><span class="line">  RxInt <span class="keyword">get</span> obs =&gt; RxInt(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> DoubleExtension <span class="keyword">on</span> <span class="built_in">double</span> &#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">Returns a <span class="code">`RxDouble`</span> with [this] <span class="code">`double`</span> as initial value.</span></span></span><br><span class="line">  RxDouble <span class="keyword">get</span> obs =&gt; RxDouble(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> BoolExtension <span class="keyword">on</span> <span class="built_in">bool</span> &#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">Returns a <span class="code">`RxBool`</span> with [this] <span class="code">`bool`</span> as initial value.</span></span></span><br><span class="line">  RxBool <span class="keyword">get</span> obs =&gt; RxBool(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> RxT&lt;T&gt; <span class="keyword">on</span> T &#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">Returns a <span class="code">`Rx`</span> instace with [this] <span class="code">`T`</span> as initial value.</span></span></span><br><span class="line">  Rx&lt;T&gt; <span class="keyword">get</span> obs =&gt; Rx&lt;T&gt;(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>小结</li></ul><p>适合界面上 简单状态管理，写起来很快。</p><h4 id="GetX"><a href="#GetX" class="headerlink" title="GetX"></a>GetX</h4><ul><li>编写控制器 lib/pages/state_getx/controller.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _count = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="keyword">set</span> count(value) =&gt; <span class="keyword">this</span>._count.value = value;</span><br><span class="line">  <span class="keyword">get</span> count =&gt; <span class="keyword">this</span>._count.value;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> _count2 = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="keyword">set</span> count2(value) =&gt; <span class="keyword">this</span>._count2.value = value;</span><br><span class="line">  <span class="keyword">get</span> count2 =&gt; <span class="keyword">this</span>._count2.value;</span><br><span class="line"></span><br><span class="line">  add() =&gt; _count.value++;</span><br><span class="line">  add2() =&gt; _count2.value++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>编写视图 lib/pages/state_getx/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateGetxView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateGetxView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> controller = CountController();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;Getx&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;GetX - 1&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;value 1 -&gt; <span class="subst">$&#123;_.count&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;GetX - 2&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;value 2 -&gt; <span class="subst">$&#123;_.count&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;GetX - 3&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> Column(</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(<span class="string">&#x27;value 3 -&gt; <span class="subst">$&#123;_.count&#125;</span>&#x27;</span>),</span><br><span class="line">                    ElevatedButton(</span><br><span class="line">                      onPressed: () &#123;</span><br><span class="line">                        _.add();</span><br><span class="line">                      &#125;,</span><br><span class="line">                      child: Text(<span class="string">&#x27;count1&#x27;</span>),</span><br><span class="line">                    )</span><br><span class="line">                  ],</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// count2</span></span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;GetX - 4&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;value 4 -&gt; <span class="subst">$&#123;_.count2&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;count1&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add2();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;count2&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>小结</li></ul><p>适合控制多控制器、多状态更新，可精细控制初始、局部渲染。</p><h4 id="GetBuilder"><a href="#GetBuilder" class="headerlink" title="GetBuilder"></a>GetBuilder</h4><ul><li>控制器 lib/pages/state_getBuilder/controller.dart 同上，不再重复</li><li>视图 lib/pages/state_getBuilder/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateGetBuilderView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateGetBuilderView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> controller = CountController();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;GetBuilder&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetBuilder&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;GetBuilder - 1&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;value -&gt; <span class="subst">$&#123;_.count&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            GetBuilder&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;GetBuilder - 2&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;value -&gt; <span class="subst">$&#123;_.count&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            GetBuilder&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;GetBuilder - 3&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> Column(</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(<span class="string">&#x27;value -&gt; <span class="subst">$&#123;_.count&#125;</span>&#x27;</span>),</span><br><span class="line">                    ElevatedButton(</span><br><span class="line">                      onPressed: () &#123;</span><br><span class="line">                        _.add();</span><br><span class="line">                      &#125;,</span><br><span class="line">                      child: Text(<span class="string">&#x27;GetBuilder -&gt; add&#x27;</span>),</span><br><span class="line">                    )</span><br><span class="line">                  ],</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// count2</span></span><br><span class="line">            GetBuilder&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;GetBuilder - 4&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;value count2 -&gt; <span class="subst">$&#123;_.count2&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// id2</span></span><br><span class="line">            GetBuilder&lt;CountController&gt;(</span><br><span class="line">              id: <span class="string">&quot;id2&quot;</span>,</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;GetBuilder - 4&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;id2 -&gt; value count2 -&gt; <span class="subst">$&#123;_.count2&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;add&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add2();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;add2&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.update();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;controller.update()&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.update([<span class="string">&quot;id2&quot;</span>]);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;controller.update(id2)&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>小结</p><p>和 <code>GetX</code> 比起来，多了手动控制更新，有两点需要注意。</p><ol><li><code>controller.update();</code> 触发更新</li><li><code>id: &quot;id2&quot;,</code> 标记哪个 <code>builder</code> ，触发方式 <code>controller.update([&quot;id2&quot;]);</code> ，可传多个 <code>Array</code> 类型。</li></ol></li></ul><h4 id="ValueBuilder"><a href="#ValueBuilder" class="headerlink" title="ValueBuilder"></a>ValueBuilder</h4><ul><li>lib/pages/state_valueBuilder/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateValueBuilderView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateValueBuilderView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;ValueBuilder&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          Center(</span><br><span class="line">            child: ValueBuilder&lt;<span class="built_in">int?</span>&gt;(</span><br><span class="line">              initialValue: <span class="number">10</span>,</span><br><span class="line">              builder: (value, updateFn) &#123;</span><br><span class="line">                <span class="keyword">return</span> Column(</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(<span class="string">&quot;count -&gt; &quot;</span> + value.toString()),</span><br><span class="line">                    ElevatedButton(</span><br><span class="line">                      onPressed: () &#123;</span><br><span class="line">                        updateFn(value! + <span class="number">1</span>);</span><br><span class="line">                      &#125;,</span><br><span class="line">                      child: Text(<span class="string">&#x27;ValueBuilder -&gt; add&#x27;</span>),</span><br><span class="line">                    )</span><br><span class="line">                  ],</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="comment">// builder: (value, updateFn) =&gt; Switch(</span></span><br><span class="line">              <span class="comment">//   value: value,</span></span><br><span class="line">              <span class="comment">//   onChanged:</span></span><br><span class="line">              <span class="comment">//       updateFn, // same signature! you could use ( newValue ) =&gt; updateFn( newValue )</span></span><br><span class="line">              <span class="comment">// ),</span></span><br><span class="line">              <span class="comment">// if you need to call something outside the builder method.</span></span><br><span class="line">              onUpdate: (value) =&gt; <span class="built_in">print</span>(<span class="string">&quot;Value updated: <span class="subst">$value</span>&quot;</span>),</span><br><span class="line">              onDispose: () =&gt; <span class="built_in">print</span>(<span class="string">&quot;Widget unmounted&quot;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>小结</li></ul><p>适合局部的状态管理，很灵活。</p><h4 id="防抖、限流"><a href="#防抖、限流" class="headerlink" title="防抖、限流"></a>防抖、限流</h4><ul><li>控制器 lib/pages/state_workers/controller.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _count = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="keyword">set</span> count(value) =&gt; <span class="keyword">this</span>._count.value = value;</span><br><span class="line">  <span class="keyword">get</span> count =&gt; <span class="keyword">this</span>._count.value;</span><br><span class="line"></span><br><span class="line">  add() =&gt; _count.value++;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 每次</span></span><br><span class="line">    ever(_count, (value) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;ever -&gt; &quot;</span> + value.toString());</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第一次</span></span><br><span class="line">    once(_count, (value) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;once -&gt; &quot;</span> + value.toString());</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 防抖 2 秒内</span></span><br><span class="line">    debounce(</span><br><span class="line">      _count,</span><br><span class="line">      (value) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;debounce -&gt; &quot;</span> + value.toString());</span><br><span class="line">      &#125;,</span><br><span class="line">      time: <span class="built_in">Duration</span>(seconds: <span class="number">2</span>),</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定时器 1 秒</span></span><br><span class="line">    interval(</span><br><span class="line">      _count,</span><br><span class="line">      (value) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;interval -&gt; &quot;</span> + value.toString());</span><br><span class="line">      &#125;,</span><br><span class="line">      time: <span class="built_in">Duration</span>(seconds: <span class="number">1</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>视图 lib/pages/state_workers/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateWorkersView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateWorkersView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> controller = CountController();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;GetBuilder&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            <span class="comment">// 显示</span></span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;value -&gt; <span class="subst">$&#123;_.count&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;add&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>小结</li></ul><p><code>ever</code> 适合做监听、日志收集</p><p><code>debounce</code> 适合做搜索输入框</p><h3 id="依赖注入"><a href="#依赖注入" class="headerlink" title="依赖注入"></a>依赖注入</h3><h4 id="Get-put"><a href="#Get-put" class="headerlink" title="Get.put"></a>Get.put</h4><ul><li>控制器 lib/pages/dependency_put_find/controller.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _count = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="keyword">set</span> count(value) =&gt; <span class="keyword">this</span>._count.value = value;</span><br><span class="line">  <span class="keyword">get</span> count =&gt; <span class="keyword">this</span>._count.value;</span><br><span class="line"></span><br><span class="line">  add() =&gt; _count.value++;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;onInit&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onClose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onClose();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;onClose&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第一个视图 lib/pages/dependency_put_find/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateDependencyPutFindView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateDependencyPutFindView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> controller = Get.put&lt;CountController&gt;(CountController());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;Dependency&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;value -&gt; <span class="subst">$&#123;_.count&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;add&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 跳转</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Get.to(NextPageView());</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;next page&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第二个视图 lib/pages/dependency_put_find/next_page.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NextPageView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  NextPageView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> controller = Get.find&lt;CountController&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;NextPage&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: controller,</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;value -&gt; <span class="subst">$&#123;_.count&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Get-lazyPut-GetView-懒加载"><a href="#Get-lazyPut-GetView-懒加载" class="headerlink" title="Get.lazyPut + GetView 懒加载"></a>Get.lazyPut + GetView 懒加载</h4><ul><li>控制器 lib/pages/dependency_lazyPut/controller.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _count = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="keyword">set</span> count(value) =&gt; <span class="keyword">this</span>._count.value = value;</span><br><span class="line">  <span class="keyword">get</span> count =&gt; <span class="keyword">this</span>._count.value;</span><br><span class="line"></span><br><span class="line">  add() =&gt; _count.value++;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;onInit&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onClose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onClose();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;onClose&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第一个视图 lib/pages/dependency_lazyPut/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateDependencyLazyPutView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  StateDependencyLazyPutView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;Dependency - LazyPut&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetX&lt;CountController&gt;(</span><br><span class="line">              init: Get.find&lt;CountController&gt;(),</span><br><span class="line">              initState: (_) &#123;&#125;,</span><br><span class="line">              builder: (_) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;value -&gt; <span class="subst">$&#123;_.count&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Get.find&lt;CountController&gt;().add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;add&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 跳转</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Get.to(NextPageView());</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;Next GetView Page&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>第二个视图 lib/pages/dependency_lazyPut/next_getview_page.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NextPageView</span> <span class="keyword">extends</span> <span class="title">GetView</span>&lt;<span class="title">CountController</span>&gt; </span>&#123;</span><br><span class="line">  NextPageView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;GetView Page&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            Obx(() =&gt; Text(<span class="string">&#x27;value -&gt; <span class="subst">$&#123;controller.count&#125;</span>&#x27;</span>)),</span><br><span class="line">            Divider(),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 按钮</span></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                controller.add();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;add&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>绑定 lib/pages/dependency_lazyPut/bindings.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DependencyLazyPutBinding</span> <span class="keyword">implements</span> <span class="title">Bindings</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dependencies() &#123;</span><br><span class="line">    Get.lazyPut&lt;CountController&gt;(() =&gt; CountController());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>路由 lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GetPage(</span><br><span class="line">    name: AppRoutes.DependencyLazyPut,</span><br><span class="line">    binding: DependencyLazyPutBinding(),</span><br><span class="line">    page: () =&gt; StateDependencyLazyPutView(),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> Getx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-Getx-路由、中间件、鉴权、传值、跳转</title>
      <link href="/2022/09/10/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-%E8%B7%AF%E7%94%B1%E3%80%81%E4%B8%AD%E9%97%B4%E4%BB%B6%E3%80%81%E9%89%B4%E6%9D%83%E3%80%81%E4%BC%A0%E5%80%BC%E3%80%81%E8%B7%B3%E8%BD%AC/"/>
      <url>/2022/09/10/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-%E8%B7%AF%E7%94%B1%E3%80%81%E4%B8%AD%E9%97%B4%E4%BB%B6%E3%80%81%E9%89%B4%E6%9D%83%E3%80%81%E4%BC%A0%E5%80%BC%E3%80%81%E8%B7%B3%E8%BD%AC/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Getx"><a href="#Getx" class="headerlink" title="Getx"></a>Getx</h1><p><img src="/assets/2021-04-05-13-44-20.png" alt="2021-04-05-13-44-20"></p><ul><li>GetPage 对象</li><li>路由层级控制</li><li>路由中间件、鉴权</li><li>404 处理</li><li>路由跳转、替换、清除</li><li>路由传值、返回值</li><li>路由转场动画</li></ul><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="初始-getx-项目"><a href="#初始-getx-项目" class="headerlink" title="初始 getx 项目"></a>初始 getx 项目</h3><ul><li>pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">get:</span> <span class="string">^3.26.0</span></span><br></pre></td></tr></table></figure><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomeView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> HomeView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;首页&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ListView(</span><br><span class="line">        children: [</span><br><span class="line">          <span class="comment">// 路由&amp;导航</span></span><br><span class="line">          Divider(),</span><br><span class="line"></span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_routes.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">part</span> of <span class="string">&#x27;app_pages.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AppRoutes</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Home = <span class="string">&#x27;/home&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">part</span> <span class="string">&#x27;app_routes.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppPages</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> INITIAL = AppRoutes.Home;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> routes = [</span><br><span class="line">    GetPage(</span><br><span class="line">      name: AppRoutes.Home,</span><br><span class="line">      page: () =&gt; HomeView(),</span><br><span class="line">    ),</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_gex/common/routes/app_pages.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// 使用getx需要在此地方将 MaterialApp 替换成 GetMaterialApp</span></span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      title: <span class="string">&#x27;Getx Demo&#x27;</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.orange,</span><br><span class="line">      ),</span><br><span class="line"></span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 初始路由</span></span><br><span class="line">      initialRoute: AppPages.INITIAL,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 全部路由</span></span><br><span class="line">      getPages: AppPages.routes,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 404未知页面</span></span><br><span class="line">      unknownRoute: AppPages.unknownRoute,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="编写-GetPage-定义"><a href="#编写-GetPage-定义" class="headerlink" title="编写 GetPage 定义"></a>编写 GetPage 定义</h3><ul><li>lib/pages/list/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> ListView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;列表页&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/pages/list_detail/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DetailView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> DetailView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;详情页&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ListView(</span><br><span class="line">        children: [</span><br><span class="line">          ListTile(</span><br><span class="line">            title: Text(<span class="string">&quot;导航-返回&quot;</span>),</span><br><span class="line">            subtitle: Text(<span class="string">&#x27;Get.back()&#x27;</span>),</span><br><span class="line">            onTap: () =&gt; Get.back(),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_routes.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AppRoutes</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Home = <span class="string">&#x27;/home&#x27;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">List</span> = <span class="string">&#x27;/list&#x27;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> Detail = <span class="string">&#x27;/detail&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.Home,</span><br><span class="line">  page: () =&gt; HomeView(),</span><br><span class="line">  children: [</span><br><span class="line">    GetPage(</span><br><span class="line">      name: AppRoutes.<span class="built_in">List</span>,</span><br><span class="line">      page: () =&gt; ListView(),</span><br><span class="line">      children: [</span><br><span class="line">        GetPage(</span><br><span class="line">          name: AppRoutes.Detail,</span><br><span class="line">          page: () =&gt; DetailView(),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="导航操作-命名、视图对象"><a href="#导航操作-命名、视图对象" class="headerlink" title="导航操作 命名、视图对象"></a>导航操作 命名、视图对象</h3><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">&quot;导航-命名路由 home &gt; list&quot;</span>),</span><br><span class="line">  subtitle: Text(<span class="string">&#x27;Get.toNamed(&quot;/home/list&quot;)&#x27;</span>),</span><br><span class="line">  onTap: () =&gt; Get.toNamed(<span class="string">&quot;/home/list&quot;</span>),</span><br><span class="line">),</span><br><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">&quot;导航-命名路由 home &gt; list &gt; detail&quot;</span>),</span><br><span class="line">  subtitle: Text(<span class="string">&#x27;Get.toNamed(&quot;/home/list/detail&quot;)&#x27;</span>),</span><br><span class="line">  onTap: () =&gt; Get.toNamed(<span class="string">&quot;/home/list/detail&quot;</span>),</span><br><span class="line">),</span><br><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">&quot;导航-类对象&quot;</span>),</span><br><span class="line">  subtitle: Text(<span class="string">&quot;Get.to(DetailView())&quot;</span>),</span><br><span class="line">  onTap: () =&gt; Get.to(DetailView()),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="导航-清除上一个"><a href="#导航-清除上一个" class="headerlink" title="导航-清除上一个"></a>导航-清除上一个</h3><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">&quot;导航-清除上一个&quot;</span>),</span><br><span class="line">  subtitle: Text(<span class="string">&quot;Get.off(DetailView())&quot;</span>),</span><br><span class="line">  onTap: () =&gt; Get.off(DetailView()),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="导航-清除所有"><a href="#导航-清除所有" class="headerlink" title="导航-清除所有"></a>导航-清除所有</h3><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">&quot;导航-清除所有&quot;</span>),</span><br><span class="line">  subtitle: Text(<span class="string">&quot;Get.offAll(DetailView())&quot;</span>),</span><br><span class="line">  onTap: () =&gt; Get.offAll(DetailView()),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="导航-arguments-传值-返回值"><a href="#导航-arguments-传值-返回值" class="headerlink" title="导航-arguments 传值+返回值"></a>导航-arguments 传值+返回值</h3><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 第一种方式传值 arguments 对象传值</span></span><br><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">&quot;导航-arguments传值+返回值&quot;</span>),</span><br><span class="line">  subtitle: Text(</span><br><span class="line">      <span class="string">&#x27;Get.toNamed(&quot;/home/list/detail&quot;, arguments: &#123;&quot;id&quot;: 999&#125;)&#x27;</span>),</span><br><span class="line">  onTap: () <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">await</span> Get.toNamed(<span class="string">&quot;/home/list/detail&quot;</span>,</span><br><span class="line">        arguments: &#123;<span class="string">&quot;id&quot;</span>: <span class="number">999</span>&#125;);</span><br><span class="line">    Get.snackbar(<span class="string">&quot;返回值&quot;</span>, <span class="string">&quot;success -&gt; &quot;</span> + result[<span class="string">&quot;success&quot;</span>].toString());</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>lib/pages/list_detail/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListDetailPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> ListDetailPage(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  Widget _buildBackListTileRow(<span class="built_in">Map?</span> val) &#123;</span><br><span class="line">    <span class="keyword">if</span> (val == <span class="keyword">null</span> || val.isEmpty) <span class="keyword">return</span> Container();</span><br><span class="line">    <span class="keyword">return</span> ListTile(</span><br><span class="line">      title: Text(<span class="string">&quot;传值 id = <span class="subst">$&#123;val[<span class="string">&quot;id&quot;</span>]&#125;</span>&quot;</span>),</span><br><span class="line">      subtitle: <span class="keyword">const</span> Text(<span class="string">&#x27;Get.back(result: &#123;&quot;success&quot;: true&#125;&#x27;</span>),</span><br><span class="line">      onTap: () =&gt; Get.back(result: &#123;<span class="string">&quot;success&quot;</span>: <span class="keyword">true</span>&#125;),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第一种方式arguments对象传值</span></span><br><span class="line">    <span class="comment">// Get.arguments对象可能会为null对象 所有要有空安全检查 以Map?去接收值</span></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">Map?</span> details = Get.arguments;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第二种方式parameters querystring方式传值</span></span><br><span class="line">    <span class="comment">// Get.parameters是一定会存在的一个对象 只不过可能会为空对象 可以直接用Map去接收值</span></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">Map</span> parameters = Get.parameters;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">&quot;详情页&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ListView(</span><br><span class="line">        children: [</span><br><span class="line">          ListTile(</span><br><span class="line">            title: <span class="keyword">const</span> Text(<span class="string">&quot;导航-返回&quot;</span>),</span><br><span class="line">            subtitle: <span class="keyword">const</span> Text(<span class="string">&#x27;Get.back()&#x27;</span>),</span><br><span class="line">            <span class="comment">// Get.back可以传值也可以不传值 Get.back() or Get.back(result: &#123;&quot;success&quot;: true&#125;)</span></span><br><span class="line">            onTap: () =&gt; Get.back(),</span><br><span class="line">          ),</span><br><span class="line">          _buildBackListTileRow(details),</span><br><span class="line">          _buildBackListTileRow(parameters)</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="导航-parameters-传值-返回值"><a href="#导航-parameters-传值-返回值" class="headerlink" title="导航-parameters 传值+返回值"></a>导航-parameters 传值+返回值</h3><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 第二种方式传值 /home/list/list_detail?id=666 querystring 方式传值</span></span><br><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">&quot;导航-parameters传值+返回值&quot;</span>),</span><br><span class="line">  subtitle: Text(<span class="string">&#x27;Get.toNamed(&quot;/home/list/detail?id=666&quot;)&#x27;</span>),</span><br><span class="line">  onTap: () <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">await</span> Get.toNamed(<span class="string">&quot;/home/list/detail?id=666&quot;</span>);</span><br><span class="line">    Get.snackbar(<span class="string">&quot;返回值&quot;</span>, <span class="string">&quot;success -&gt; &quot;</span> + result[<span class="string">&quot;success&quot;</span>].toString());</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>lib/pages/list_detail/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">final</span> parameters = Get.parameters;</span><br></pre></td></tr></table></figure><h3 id="导航-参数传值-返回值"><a href="#导航-参数传值-返回值" class="headerlink" title="导航-参数传值+返回值"></a>导航-参数传值+返回值</h3><ul><li>lib/common/routes/app_routes.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Detail_ID = <span class="string">&#x27;/detail/:id&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.Detail_ID,</span><br><span class="line">  page: () =&gt; DetailView(),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第三种方式传值 /home/list/list_detail/777 querystring 方式传值</span></span><br><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">&quot;导航-参数传值+返回值&quot;</span>),</span><br><span class="line">  subtitle: Text(<span class="string">&#x27;Get.toNamed(&quot;/home/list/detail/777&quot;)&#x27;</span>),</span><br><span class="line">  onTap: () <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">await</span> Get.toNamed(<span class="string">&quot;/home/list/detail/777&quot;</span>);</span><br><span class="line">    Get.snackbar(<span class="string">&quot;返回值&quot;</span>, <span class="string">&quot;success -&gt; &quot;</span> + result[<span class="string">&quot;success&quot;</span>].toString());</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="导航-not-found"><a href="#导航-not-found" class="headerlink" title="导航-not found"></a>导航-not found</h3><ul><li>lib/pages/notfound/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NotfoundView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> NotfoundView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;路由没有找到&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ListTile(</span><br><span class="line">        title: Text(<span class="string">&quot;返回首页&quot;</span>),</span><br><span class="line">        subtitle: Text(<span class="string">&#x27;Get.offAllNamed(AppRoutes.Home)&#x27;</span>),</span><br><span class="line">        onTap: () =&gt; Get.offAllNamed(AppRoutes.Home),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_routes.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> NotFound = <span class="string">&#x27;/notfound&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> unknownRoute = GetPage(</span><br><span class="line">  name: AppRoutes.NotFound,</span><br><span class="line">  page: () =&gt; NotfoundView(),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>lib/main.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">    ...</span><br><span class="line">    unknownRoute: AppPages.unknownRoute,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="导航-中间件-认证-Auth"><a href="#导航-中间件-认证-Auth" class="headerlink" title="导航-中间件-认证 Auth"></a>导航-中间件-认证 Auth</h3><ul><li>lib/pages/login/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> LoginView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;登录&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ListTile(</span><br><span class="line">        title: Text(<span class="string">&quot;返回首页&quot;</span>),</span><br><span class="line">        subtitle: Text(<span class="string">&#x27;Get.offAllNamed(AppRoutes.Home)&#x27;</span>),</span><br><span class="line">        onTap: () =&gt; Get.offAllNamed(AppRoutes.Home),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/pages/my/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;我的&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: ListTile(</span><br><span class="line">        title: Text(<span class="string">&quot;返回首页&quot;</span>),</span><br><span class="line">        subtitle: Text(<span class="string">&#x27;Get.offAllNamed(AppRoutes.Home)&#x27;</span>),</span><br><span class="line">        onTap: () =&gt; Get.offAllNamed(AppRoutes.Home),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_routes.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> Login = <span class="string">&#x27;/login&#x27;</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> My = <span class="string">&#x27;/my&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>lib/common/middleware/router_auth.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RouteAuthMiddleware</span> <span class="keyword">extends</span> <span class="title">GetMiddleware</span> </span>&#123;</span><br><span class="line">  <span class="comment">// priority 代表如果存在多个中间件哪个的优先级高</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">int</span> priority = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  RouteAuthMiddleware(&#123;<span class="keyword">required</span> <span class="keyword">this</span>.priority&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  RouteSettings? redirect(<span class="built_in">String</span> route) &#123;</span><br><span class="line">    Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>), () =&gt; Get.snackbar(<span class="string">&quot;提示&quot;</span>, <span class="string">&quot;请先登录APP&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> RouteSettings(name: AppRoutes.Login);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 白名单</span></span><br><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.Login,</span><br><span class="line">  page: () =&gt; LoginView(),</span><br><span class="line">),</span><br><span class="line"></span><br><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.My,</span><br><span class="line">  page: () =&gt; MyView(),</span><br><span class="line">  middlewares: [</span><br><span class="line">    RouteAuthMiddleware(priority: <span class="number">1</span>),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>lib/pages/home/index.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ListTile(</span><br><span class="line">  title: Text(<span class="string">&quot;导航-中间件-认证Auth&quot;</span>),</span><br><span class="line">  subtitle: Text(<span class="string">&#x27;Get.toNamed(AppRoutes.My)&#x27;</span>),</span><br><span class="line">  onTap: () =&gt; Get.toNamed(AppRoutes.My),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="Transition-转场动画"><a href="#Transition-转场动画" class="headerlink" title="Transition 转场动画"></a>Transition 转场动画</h3><ul><li>lib/common/routes/app_pages.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GetPage(</span><br><span class="line">  name: AppRoutes.Detail_ID,</span><br><span class="line">  page: () =&gt; DetailView(),</span><br><span class="line">  transition: Transition.downToUp,</span><br><span class="line">),</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> Getx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-Getx-Getx国际化语言</title>
      <link href="/2022/09/09/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Getx%E5%9B%BD%E9%99%85%E5%8C%96%E8%AF%AD%E8%A8%80/"/>
      <url>/2022/09/09/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Getx%E5%9B%BD%E9%99%85%E5%8C%96%E8%AF%AD%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><em><strong>lib/main.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;GetxInternationalization/Languages.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;GetxInternationalization/index.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// 使用getx需要在此地方将 MaterialApp 替换成 GetMaterialApp</span></span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      title: <span class="string">&#x27;Flutter Demo&#x27;</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: GetxInternationalization(),</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 国际化配置</span></span><br><span class="line">      translations: Languages(),</span><br><span class="line">      locale: <span class="keyword">const</span> Locale(<span class="string">&#x27;zh&#x27;</span>,<span class="string">&#x27;CN&#x27;</span>), <span class="comment">// 默认语言</span></span><br><span class="line">      fallbackLocale: <span class="keyword">const</span> Locale(<span class="string">&#x27;zh&#x27;</span>,<span class="string">&#x27;CN&#x27;</span>), <span class="comment">// 配置错误使用的语言</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>translations</strong>:  键值对映射类</p><p><strong>locale</strong>：默认语言</p><p><strong>fallbackLocale</strong>:  配置错误使用的语言</p><p><em><strong>lib/GetxInternationalization/Languages.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Languages</span> <span class="keyword">extends</span> <span class="title">Translations</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt;&gt; <span class="keyword">get</span> keys =&gt; &#123;</span><br><span class="line">    <span class="string">&#x27;zh_CN&#x27;</span>:&#123;</span><br><span class="line">      <span class="string">&#x27;hello&#x27;</span>:<span class="string">&#x27;你好，世界！&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;en_US&#x27;</span>:&#123;</span><br><span class="line">      <span class="string">&#x27;hello&#x27;</span>:<span class="string">&#x27;hello world!&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意:键一定是语言+下划线+国家</strong></p><p><em><strong>lib/GetxInternationalization/index.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: must_be_immutable</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;LanguagesController.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetxInternationalization</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  LanguagesController languagesController = Get.put(LanguagesController());</span><br><span class="line">  GetxInternationalization(&#123;<span class="keyword">super</span>.key&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">&#x27;Getx 国际化语言&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: [</span><br><span class="line">            Text(</span><br><span class="line">              <span class="string">&#x27;hello&#x27;</span>.tr,</span><br><span class="line">              style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">                color: Colors.pink,</span><br><span class="line">                fontSize: <span class="number">30</span>,</span><br><span class="line">                fontWeight: FontWeight.bold,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            <span class="keyword">const</span> SizedBox(height: <span class="number">20</span>),</span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                languagesController.changeLanguage(<span class="string">&#x27;zh&#x27;</span>, <span class="string">&#x27;CN&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: <span class="keyword">const</span> Text(<span class="string">&#x27;切换到中文&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                languagesController.changeLanguage(<span class="string">&#x27;en&#x27;</span>, <span class="string">&#x27;US&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: <span class="keyword">const</span> Text(<span class="string">&#x27;切换到英文&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也可以不需要controller</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: must_be_immutable</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetxInternationalization</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> GetxInternationalization(&#123;<span class="keyword">super</span>.key&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">&#x27;Getx 国际化语言&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: [</span><br><span class="line">            Text(</span><br><span class="line">              <span class="string">&#x27;hello&#x27;</span>.tr,</span><br><span class="line">              style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">                color: Colors.pink,</span><br><span class="line">                fontSize: <span class="number">30</span>,</span><br><span class="line">                fontWeight: FontWeight.bold,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            <span class="keyword">const</span> SizedBox(height: <span class="number">20</span>),</span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="keyword">var</span> locale = <span class="keyword">const</span> Locale(<span class="string">&#x27;zh&#x27;</span>, <span class="string">&#x27;CN&#x27;</span>);</span><br><span class="line">                Get.updateLocale(locale);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: <span class="keyword">const</span> Text(<span class="string">&#x27;切换到中文&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="keyword">var</span> locale = <span class="keyword">const</span> Locale(<span class="string">&#x27;en&#x27;</span>, <span class="string">&#x27;US&#x27;</span>);</span><br><span class="line">                Get.updateLocale(locale);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: <span class="keyword">const</span> Text(<span class="string">&#x27;切换到英文&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><em><strong>lib/GetxInternationalization/LanguagesController.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LanguagesController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> changeLanguage(<span class="built_in">String</span> languageCode, <span class="built_in">String</span> countryCode) &#123;</span><br><span class="line">    Locale locale = Locale(languageCode, countryCode);</span><br><span class="line">    Get.updateLocale(locale);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>示例：</p><p><img src="/assets/image-20220909190032648.png" alt="image-20220909190032648"></p><p><img src="/assets/image-20220909190052243.png" alt="image-20220909190052243"></p>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> Getx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-Getx-Getx GetBuilder 唯一值id</title>
      <link href="/2022/09/09/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-GetxGetBuilder%E5%94%AF%E4%B8%80%E5%80%BC/"/>
      <url>/2022/09/09/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-GetxGetBuilder%E5%94%AF%E4%B8%80%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><em><strong>lib/main.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;GetControllerUniqueId/index.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// 使用getx需要在此地方将 MaterialApp 替换成 GetMaterialApp</span></span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      title: <span class="string">&#x27;Flutter Demo&#x27;</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: <span class="keyword">const</span> GetControllerUniqueId(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>lib/GetControllerUniqueId/index.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;GetUniqueIdController.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetControllerUniqueId</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="comment">// GetUniqueIdController getUniqueIdController = Get.put(GetUniqueIdController());</span></span><br><span class="line">  <span class="keyword">const</span> GetControllerUniqueId(&#123;<span class="keyword">super</span>.key&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">&#x27;Getx控制器唯一值id&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: [</span><br><span class="line">            GetBuilder&lt;GetUniqueIdController&gt;(</span><br><span class="line">              init: GetUniqueIdController(),</span><br><span class="line">              builder: (controller) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(</span><br><span class="line">                  <span class="string">&#x27;计数器值为：<span class="subst">$&#123;controller.count&#125;</span>&#x27;</span>,</span><br><span class="line">                  style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">                    color: Colors.green,</span><br><span class="line">                    fontSize: <span class="number">40</span>,</span><br><span class="line">                  ),</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            GetBuilder&lt;GetUniqueIdController&gt;(</span><br><span class="line">              id: <span class="string">&#x27;uni_id_count&#x27;</span>,</span><br><span class="line">              init: GetUniqueIdController(),</span><br><span class="line">              builder: (controller) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(</span><br><span class="line">                  <span class="string">&#x27;计数器值为：<span class="subst">$&#123;controller.count&#125;</span>&#x27;</span>,</span><br><span class="line">                  style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">                    color: Colors.pink,</span><br><span class="line">                    fontSize: <span class="number">40</span>,</span><br><span class="line">                  ),</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            <span class="keyword">const</span> SizedBox(height: <span class="number">20</span>),</span><br><span class="line">            Container(</span><br><span class="line">              margin: <span class="keyword">const</span> EdgeInsets.symmetric(horizontal: <span class="number">20</span>),</span><br><span class="line">              width: <span class="built_in">double</span>.infinity,</span><br><span class="line">              child: ElevatedButton(</span><br><span class="line">                onPressed: () &#123;</span><br><span class="line">                  Get.find&lt;GetUniqueIdController&gt;().increment();</span><br><span class="line">                &#125;,</span><br><span class="line">                child: <span class="keyword">const</span> Text(<span class="string">&#x27;增加&#x27;</span>),</span><br><span class="line">              ),</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>lib/GetControllerUniqueId/GetUniqueIdController.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetUniqueIdController</span> <span class="keyword">extends</span> <span class="title">GetxController</span></span>&#123;</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">20</span>;</span><br><span class="line">  <span class="keyword">void</span> increment()&#123;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="comment">// 只会更新Getbuilder中id是uni_id_count的组件值</span></span><br><span class="line">    update([<span class="string">&#x27;uni_id_count&#x27;</span>,<span class="string">&#x27;&#x27;</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> Getx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-Getx-Getx 控制器 works 事件监听</title>
      <link href="/2022/09/09/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Getx%E6%8E%A7%E5%88%B6%E5%99%A8works/"/>
      <url>/2022/09/09/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Getx%E6%8E%A7%E5%88%B6%E5%99%A8works/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><em><strong>lib/main.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;GetxControllerWorks/index.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// 使用getx需要在此地方将 MaterialApp 替换成 GetMaterialApp</span></span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      title: <span class="string">&#x27;Flutter Demo&#x27;</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: GetxControllerWorks(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>lib/GetxControllerWorks/index.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: must_be_immutable</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;getx_works_controller.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetxControllerWorks</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  GetxWorksController getxWorksController = Get.put(GetxWorksController());</span><br><span class="line"></span><br><span class="line">  GetxControllerWorks(&#123;<span class="keyword">super</span>.key&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">&#x27;GetxControllerWorks&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetBuilder&lt;GetxWorksController&gt;(</span><br><span class="line">              init: getxWorksController,</span><br><span class="line">              builder: (controller) &#123;</span><br><span class="line">                <span class="keyword">return</span> Column(</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(<span class="string">&#x27;计数器数值：<span class="subst">$&#123;controller.count&#125;</span>&#x27;</span>),</span><br><span class="line">                    Text(<span class="string">&#x27;输入框数值：<span class="subst">$&#123;controller.inputValue&#125;</span>&#x27;</span>),</span><br><span class="line">                  ],</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                getxWorksController.addCount();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: <span class="keyword">const</span> Text(<span class="string">&#x27;点击增加&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">            TextField(</span><br><span class="line">              onChanged: (value) &#123;</span><br><span class="line">                getxWorksController.inputChange(value);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>lib/GetxControllerWorks/getx_works_controller.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: avoid_print</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetxWorksController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="keyword">var</span> inputValue = <span class="string">&#x27;&#x27;</span>.obs;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听count的值，当他发生改变的时候调用</span></span><br><span class="line">    ever(count, (value) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;ever ----&gt; <span class="subst">$count</span>&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听多个值，当他们发生改变的时候调用</span></span><br><span class="line">    everAll([count], (value) =&gt; <span class="built_in">print</span>(<span class="string">&quot;everAll ----&gt; <span class="subst">$count</span>&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 值改变时调用，只执行一次</span></span><br><span class="line">    once(count, (value) =&gt; <span class="built_in">print</span>(<span class="string">&quot;once ----&gt; <span class="subst">$count</span>&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 防抖 用户停止打字1秒钟后调用</span></span><br><span class="line">    debounce(inputValue, (value) &#123;</span><br><span class="line">      value = <span class="string">&quot;<span class="subst">$value</span> 拼接字符串&quot;</span>;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;debounce callback ----&gt; <span class="subst">$value</span>&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;debounce ----&gt; <span class="subst">$count</span>&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 忽略3秒中的所有改动</span></span><br><span class="line">    interval(count, (value) =&gt; <span class="built_in">print</span>(<span class="string">&quot;interval ----&gt; <span class="subst">$count</span>&quot;</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> addCount() &#123;</span><br><span class="line">    count++;</span><br><span class="line">    update();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> inputChange(<span class="built_in">String</span> value) &#123;</span><br><span class="line">    inputValue.value = value;</span><br><span class="line">    update();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> Getx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-Getx-Getx生命周期</title>
      <link href="/2022/09/09/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Getx%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
      <url>/2022/09/09/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Getx%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><em><strong>lib/main.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;GetxControllerLifeCycle/index.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// 使用getx需要在此地方将 MaterialApp 替换成 GetMaterialApp</span></span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      title: <span class="string">&#x27;Flutter Demo&#x27;</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: <span class="keyword">const</span> GetxControllerLifeCycle(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>lib/GetxControllerLifeCycle/index.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;GetxLifeCycleController.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetxControllerLifeCycle</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> GetxControllerLifeCycle(&#123;<span class="keyword">super</span>.key&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line"></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;build...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">&#x27;Getx 生命周期控制器&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            GetBuilder&lt;GetxLifeCycleController&gt;(</span><br><span class="line">              init: GetxLifeCycleController(),</span><br><span class="line">              dispose: (state) &#123;</span><br><span class="line">                Get.find&lt;GetxLifeCycleController&gt;().cleanTask();</span><br><span class="line">              &#125;,</span><br><span class="line">              builder: (controller) &#123;</span><br><span class="line">                <span class="keyword">return</span> Text(<span class="string">&#x27;计数器数值：<span class="subst">$&#123;controller.count&#125;</span>&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Get.find&lt;GetxLifeCycleController&gt;().createTask();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: <span class="keyword">const</span> Text(<span class="string">&#x27;点击加一&#x27;</span>),</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>lib/GetxControllerLifeCycle/GetxLifeCycleController.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: avoid_print</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetxLifeCycleController</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0.</span>obs;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> createTask() &#123;</span><br><span class="line">    Future.delayed(<span class="keyword">const</span> <span class="built_in">Duration</span>(seconds: <span class="number">3000</span>), () &#123;</span><br><span class="line">      count++;</span><br><span class="line">      update();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    count++;</span><br><span class="line">    update();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> cleanTask() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;清除了任务&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onInit();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;初始化...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onReady() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onReady();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;加载完成...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onClose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.onClose();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;页面关闭...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> Getx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-Getx-Getx控制器 controller</title>
      <link href="/2022/09/09/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Getx%E6%8E%A7%E5%88%B6%E5%99%A8/"/>
      <url>/2022/09/09/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Getx%E6%8E%A7%E5%88%B6%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><em><strong>lib/main.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;GetControllerExp/index.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// 使用getx需要在此地方将 MaterialApp 替换成 GetMaterialApp</span></span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      title: <span class="string">&#x27;Flutter Demo&#x27;</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: <span class="keyword">const</span> GexControllerExp(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>lib/GetControllerExp/index.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;Expcontroller.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ignore: must_be_immutable</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GexControllerExp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Expcontroller expController = Expcontroller();</span></span><br><span class="line">  <span class="comment">// Expcontroller expController = Get.put(Expcontroller());</span></span><br><span class="line">  <span class="keyword">const</span> GexControllerExp(&#123;<span class="keyword">super</span>.key&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">&#x27;GexControllerExp&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: [</span><br><span class="line">            <span class="comment">// 第一种</span></span><br><span class="line">            <span class="comment">// Obx(() =&gt; Text(&#x27;我的名字是：$&#123;expController.teacher.name&#125;&#x27;)),</span></span><br><span class="line">            <span class="comment">// Obx(() =&gt; Text(&#x27;我的年龄是：$&#123;expController.teacher.age&#125;&#x27;)),</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 第二种</span></span><br><span class="line">            <span class="comment">// GetX&lt;Expcontroller&gt;(</span></span><br><span class="line">            <span class="comment">//   init: Expcontroller(),</span></span><br><span class="line">            <span class="comment">//   builder: (controller) &#123;</span></span><br><span class="line">            <span class="comment">//     return Column(</span></span><br><span class="line">            <span class="comment">//       children: [</span></span><br><span class="line">            <span class="comment">//         // Text(&#x27;我的名字是：$&#123;controller.teacher.name&#125;&#x27;),</span></span><br><span class="line">            <span class="comment">//         // Text(&#x27;我的年龄是：$&#123;controller.teacher.age&#125;&#x27;)</span></span><br><span class="line">            <span class="comment">//         Text(&#x27;我的名字是：$&#123;controller.teacher.value.name&#125;&#x27;),</span></span><br><span class="line">            <span class="comment">//         Text(&#x27;我的年龄是：$&#123;controller.teacher.value.age&#125;&#x27;)</span></span><br><span class="line">            <span class="comment">//       ],</span></span><br><span class="line">            <span class="comment">//     );</span></span><br><span class="line">            <span class="comment">//   &#125;,</span></span><br><span class="line">            <span class="comment">// ),</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 第三种方式</span></span><br><span class="line">            GetBuilder&lt;Expcontroller&gt;(</span><br><span class="line">              init: Expcontroller(),</span><br><span class="line">              builder: (controller) &#123;</span><br><span class="line">                <span class="keyword">return</span> Column(</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(<span class="string">&#x27;我的名字是：<span class="subst">$&#123;controller.teacher.name.value&#125;</span>&#x27;</span>),</span><br><span class="line">                    Text(<span class="string">&#x27;我的年龄是：<span class="subst">$&#123;controller.teacher.age.value&#125;</span>&#x27;</span>),</span><br><span class="line">                    Text(<span class="string">&#x27;test：<span class="subst">$&#123;controller.text.value&#125;</span>&#x27;</span>),</span><br><span class="line">                  ],</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="comment">// 第一种方式</span></span><br><span class="line">                <span class="comment">// expController.convertToUpperCase();</span></span><br><span class="line">                <span class="comment">// expController.ageAdd();</span></span><br><span class="line">                <span class="comment">// expController.testAdd();</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// 第二种</span></span><br><span class="line">                Get.find&lt;Expcontroller&gt;().update();</span><br><span class="line">                Get.find&lt;Expcontroller&gt;().convertToUpperCase();</span><br><span class="line">                Get.find&lt;Expcontroller&gt;().ageAdd();</span><br><span class="line">                Get.find&lt;Expcontroller&gt;().testAdd();</span><br><span class="line">              &#125;,</span><br><span class="line">              child: <span class="keyword">const</span> Text(<span class="string">&#x27;GexControllerExp 按钮&#x27;</span>),</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>lib/GetControllerExp/Expcontroller.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: file_names, non_constant_identifier_names</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;teacher.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Expcontroller</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> text = <span class="number">0.</span>obs;</span><br><span class="line">  <span class="comment">// 第一种 对象属性是 obs 数据</span></span><br><span class="line">  <span class="comment">// var teacher = Teacher();</span></span><br><span class="line">  <span class="comment">// void ageAdd() &#123;</span></span><br><span class="line">  <span class="comment">//   teacher.age.value++;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// void convertToUpperCase() &#123;</span></span><br><span class="line">  <span class="comment">//   teacher.name.value = teacher.name.value.toUpperCase();</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第二种 该对象是 obs 数据 对象数据必须 要嗲用 update</span></span><br><span class="line">  <span class="comment">// var teacher = Teacher(name: &#x27;Augustus&#x27;, age: 20).obs;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// void ageAdd() &#123;</span></span><br><span class="line">  <span class="comment">//   teacher.update((val) &#123;</span></span><br><span class="line">  <span class="comment">//     val?.age = val.age + 1;</span></span><br><span class="line">  <span class="comment">//     // teacher.value.age++;</span></span><br><span class="line">  <span class="comment">//   &#125;);</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// void convertToUpperCase() &#123;</span></span><br><span class="line">  <span class="comment">//   teacher.update((val) &#123;</span></span><br><span class="line">  <span class="comment">//     val?.name = val.name.toUpperCase();</span></span><br><span class="line">  <span class="comment">//     // teacher.value.name = teacher.value.name.toUpperCase();</span></span><br><span class="line">  <span class="comment">//   &#125;);</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第三种 GetBuilder 必须要 在最后调用 update()</span></span><br><span class="line">  <span class="keyword">var</span> teacher = Teacher();</span><br><span class="line">  <span class="keyword">void</span> ageAdd() &#123;</span><br><span class="line">    teacher.age.value++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> convertToUpperCase() &#123;</span><br><span class="line">    teacher.name.value = teacher.name.value.toUpperCase();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> testAdd()&#123;</span><br><span class="line">    text++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>lib/GetControllerExp/teacher.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 第一种 写法属性 rx变量</span></span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&quot;Christopher&quot;</span>.obs;</span><br><span class="line">  <span class="keyword">var</span> age = <span class="number">18.</span>obs;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第二种 构造函数创建</span></span><br><span class="line">  <span class="comment">// String name;</span></span><br><span class="line">  <span class="comment">// int age;</span></span><br><span class="line">  <span class="comment">// Teacher(&#123;required this.name, required this.age&#125;);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> Getx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-Getx-Obx自定义类</title>
      <link href="/2022/09/08/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Obx%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB/"/>
      <url>/2022/09/08/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Obx%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>lib/main.dart</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;ObxCustomClass/index.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// 使用getx需要在此地方将 MaterialApp 替换成 GetMaterialApp</span></span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      title: <span class="string">&#x27;Flutter Demo&#x27;</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: ObxCustomClass(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>lib/ObxCustomClass/index.dart</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: must_be_immutable</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_gex/ObxCustomClass/teacher.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ObxCustomClass</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第一种写法 纯属性</span></span><br><span class="line">  <span class="comment">// var teacher = Teacher();</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第二种写法 构造函数</span></span><br><span class="line">  <span class="keyword">var</span> teacher = Teacher(age: <span class="number">30</span>, name: <span class="string">&#x27;Augustus&#x27;</span>).obs;</span><br><span class="line"></span><br><span class="line">  ObxCustomClass(&#123;<span class="keyword">super</span>.key&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">&#x27;Gex --&gt; Obx 自定义类 &#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: [</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 第一种写法 纯属性</span></span><br><span class="line">            <span class="comment">// Obx(() =&gt; Text(</span></span><br><span class="line">            <span class="comment">//       &#x27;我的名字是：$&#123;teacher.name.value&#125;&#x27;,</span></span><br><span class="line">            <span class="comment">//       style: const TextStyle(</span></span><br><span class="line">            <span class="comment">//         color: Colors.redAccent,</span></span><br><span class="line">            <span class="comment">//         height: 40 / 20,</span></span><br><span class="line">            <span class="comment">//         fontSize: 20,</span></span><br><span class="line">            <span class="comment">//         fontWeight: FontWeight.bold,</span></span><br><span class="line">            <span class="comment">//       ),</span></span><br><span class="line">            <span class="comment">//     )),</span></span><br><span class="line">            <span class="comment">// Obx(</span></span><br><span class="line">            <span class="comment">//   () =&gt; Text(</span></span><br><span class="line">            <span class="comment">//     &#x27;我的年龄是：$&#123;teacher.age.value&#125;&#x27;,</span></span><br><span class="line">            <span class="comment">//     style: const TextStyle(</span></span><br><span class="line">            <span class="comment">//       color: Colors.green,</span></span><br><span class="line">            <span class="comment">//       height: 40 / 20,</span></span><br><span class="line">            <span class="comment">//       fontSize: 20,</span></span><br><span class="line">            <span class="comment">//       fontWeight: FontWeight.bold,</span></span><br><span class="line">            <span class="comment">//     ),</span></span><br><span class="line">            <span class="comment">//   ),</span></span><br><span class="line">            <span class="comment">// ),</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//  第二种写法 构造函数</span></span><br><span class="line">            Obx(() =&gt; Text(</span><br><span class="line">                  <span class="string">&#x27;我的名字是：<span class="subst">$&#123;teacher.value.name&#125;</span>&#x27;</span>,</span><br><span class="line">                  style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">                    color: Colors.redAccent,</span><br><span class="line">                    height: <span class="number">40</span> / <span class="number">20</span>,</span><br><span class="line">                    fontSize: <span class="number">20</span>,</span><br><span class="line">                    fontWeight: FontWeight.bold,</span><br><span class="line">                  ),</span><br><span class="line">                )),</span><br><span class="line">            Obx(</span><br><span class="line">              () =&gt; Text(</span><br><span class="line">                <span class="string">&#x27;我的年龄是：<span class="subst">$&#123;teacher.value.age&#125;</span>&#x27;</span>,</span><br><span class="line">                style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">                  color: Colors.green,</span><br><span class="line">                  height: <span class="number">40</span> / <span class="number">20</span>,</span><br><span class="line">                  fontSize: <span class="number">20</span>,</span><br><span class="line">                  fontWeight: FontWeight.bold,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="comment">// 第一种写法 纯属性</span></span><br><span class="line">                <span class="comment">// teacher.name.value = teacher.name.value.toUpperCase();</span></span><br><span class="line">                <span class="comment">// teacher.age.value++;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// 第二种写法 构造函数 如果是对象 则需要使用 update 方法</span></span><br><span class="line">                teacher.update((val) &#123;</span><br><span class="line">                  <span class="comment">// 1、可以使用 val Teacher 的实例对象</span></span><br><span class="line">                  <span class="comment">// val?.age = (val.age ?? 0) + 1;</span></span><br><span class="line">                  <span class="comment">// val?.name = (val.name ?? &#x27;&#x27;).toUpperCase();</span></span><br><span class="line">                  <span class="comment">// 2、可以使用被 gex--&gt;Rx 包装过的teacher对象</span></span><br><span class="line">                  teacher.value.name = teacher.value.name?.toUpperCase();</span><br><span class="line">                  teacher.value.age = (teacher.value.age ?? <span class="number">0</span>) + <span class="number">1</span>;</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: <span class="keyword">const</span> Text(<span class="string">&#x27;Obx 自定义类&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>lib/ObxCustomClass/teacher.dart</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 第一种 写法属性</span></span><br><span class="line">  <span class="comment">// var name = &quot;Christopher&quot;.obs;</span></span><br><span class="line">  <span class="comment">// var age = 18.obs;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第二种 构造函数创建</span></span><br><span class="line">  <span class="built_in">String?</span> name;</span><br><span class="line">  <span class="built_in">int?</span> age;</span><br><span class="line">  Teacher(&#123;<span class="keyword">this</span>.name, <span class="keyword">this</span>.age&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> Getx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-Getx-Obx</title>
      <link href="/2022/09/08/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Obx/"/>
      <url>/2022/09/08/Flutter/Flutter-Getx%E5%9F%BA%E7%A1%80-Obx/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li>GetX 是 Flutter 上的一个轻量且强大的解决方案：高性能的状态管理、智能的依赖注入和便捷的路由管理。</li><li>GetX 有3个基本原则：<ul><li><strong>性能：</strong> GetX 专注于性能和最小资源消耗。GetX 打包后的apk占用大小和运行时的内存占用与其他状态管理插件不相上下。如果你感兴趣，这里有一个<a href="https://github.com/jonataslaw/benchmarks">性能测试</a>。</li><li><strong>效率：</strong> GetX 的语法非常简捷，并保持了极高的性能，能极大缩短你的开发时长。</li><li><strong>结构：</strong> GetX 可以将界面、逻辑、依赖和路由完全解耦，用起来更清爽，逻辑更清晰，代码更容易维护。</li></ul></li><li>GetX 并不臃肿，却很轻量。如果你只使用状态管理，只有状态管理模块会被编译，其他没用到的东西都不会被编译到你的代码中。它拥有众多的功能，但这些功能都在独立的容器中，只有在使用后才会启动。</li><li>Getx有一个庞大的生态系统，能够在Android、iOS、Web、Mac、Linux、Windows和你的服务器上用同样的代码运行。 <strong>通过<a href="https://github.com/jonataslaw/get_server">Get Server</a></strong> 可以在你的后端完全重用你在前端写的代码。</li></ul><p><em><strong>lib/main.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;ObxCount/index.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> App());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> App(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// 使用getx需要在此地方将 MaterialApp 替换成 GetMaterialApp</span></span><br><span class="line">    <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">      title: <span class="string">&#x27;Flutter Demo&#x27;</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: ObxCount(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>lib/ObxCount/index.dart</strong></em></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: must_be_immutable</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ObxCount</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 定义1</span></span><br><span class="line">  RxInt _count1 = RxInt(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 定义2</span></span><br><span class="line">  <span class="keyword">var</span> _count2 = <span class="number">0.</span>obs;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 定义3 可以用泛型也可以不填泛型</span></span><br><span class="line">  <span class="keyword">final</span> _count3 = Rx&lt;<span class="built_in">double</span>&gt;(<span class="number">0</span>);</span><br><span class="line">  <span class="comment">// final _count3 = Rx(0);</span></span><br><span class="line"></span><br><span class="line">  ObxCount(&#123;<span class="keyword">super</span>.key&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: <span class="keyword">const</span> Text(<span class="string">&#x27;Gex --&gt; Obx 三种定义&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: [</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 使用obs Rxint Rx 都可以写成 _count.value 其中 Rx只能写成 _count.value</span></span><br><span class="line">            Obx(() =&gt; Text(<span class="string">&quot;定义1 数值：<span class="subst">$&#123;_count1.value&#125;</span>&quot;</span>)),</span><br><span class="line">            Obx(() =&gt; Text(<span class="string">&quot;定义1 简写数值：<span class="subst">$_count1</span>&quot;</span>)),</span><br><span class="line">            Obx(() =&gt; Text(<span class="string">&quot;定义2 数值：<span class="subst">$&#123;_count2.value&#125;</span>&quot;</span>)),</span><br><span class="line">            Obx(() =&gt; Text(<span class="string">&quot;定义2 简写数值：<span class="subst">$_count2</span>&quot;</span>)),</span><br><span class="line">            Obx(() =&gt; Text(<span class="string">&quot;定义3 数值：<span class="subst">$&#123;_count3.value&#125;</span>&quot;</span>)),</span><br><span class="line">            ElevatedButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 定义1</span></span><br><span class="line">                _count1++;</span><br><span class="line">                _count1.value++;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 定义2</span></span><br><span class="line">                _count2++;</span><br><span class="line">                _count2.value++;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 定义3</span></span><br><span class="line">                _count3.value++;</span><br><span class="line">              &#125;,</span><br><span class="line">              child: <span class="keyword">const</span> Text(<span class="string">&#x27;计数器 点击加一&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将组件用Obx进行包裹后可以实现无状态自动更新；</p>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> Getx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-基础特性-生命周期</title>
      <link href="/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
      <url>/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h1><h2 id="StatefulWidget-生命周期"><a href="#StatefulWidget-生命周期" class="headerlink" title="StatefulWidget 生命周期"></a>StatefulWidget 生命周期</h2><p><img src="/assets/000129.png" alt="000129"></p><ul><li>执行顺序，从上往下</li></ul><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>createState</td><td>创建 State 只执行1次</td></tr><tr><td>initState</td><td>初始 State, mounted 等于 true, 只执行1次</td></tr><tr><td>didChangeDependencies</td><td>父或祖先widget中的InheritedWidget改变时会被调用</td></tr><tr><td>build</td><td>UI 被重新渲染的时候多次执行</td></tr><tr><td>addPostFrameCallback</td><td>渲染结束回调，只执行1次</td></tr><tr><td>didUpdateWidget</td><td>父类 setState 后，子类就会触发</td></tr><tr><td>deactivate</td><td>从组件树中移除 State 时调用</td></tr><tr><td>dispose</td><td>组件被释放时调用</td></tr></tbody></table><blockquote><p>不要再 build 里面更新状态, 影响性能</p></blockquote><ul><li>initState 初始状态数据</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> initState() &#123;</span><br><span class="line">  <span class="keyword">super</span>.initState();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;initState&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>build 渲染视图，可多次</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Column(</span><br><span class="line">    children: [</span><br><span class="line">      ElevatedButton(</span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">        &#125;,</span><br><span class="line">        child: <span class="keyword">const</span> Text(<span class="string">&quot;切换图片&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      imageWidget(</span><br><span class="line">        imgUrl: imgUrl ?? img1,</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>mounted 状态</li></ul><p>flutter 分配完你的组件树位置，会设置 <code>mounted</code> 为 <code>true</code>。</p><p>你需要在 <code>mounted == true</code> 情况下，调用 <code>setState()</code> 来更新 UI ，这才是安全的操作。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ElevatedButton(</span><br><span class="line">  onPressed: () &#123;</span><br><span class="line">    <span class="keyword">if</span> (mounted == <span class="keyword">true</span>) &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        imgUrl = imgUrl == img1 ? img2 : img1;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  child: <span class="keyword">const</span> Text(<span class="string">&quot;切换图片&quot;</span>),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><ul><li>didChangeDependencies</li></ul><p>父或祖先widget中的InheritedWidget改变时会被调用。</p><blockquote><p><code>InheritedWidget</code>和 React 中的 context 功能类似，和逐级传递数据相比，它们能实现组件跨级传递数据。</p><p>这种从根开始向下传递数据的方式，很适合做全局数据的管理，如样式、基础数据等。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父或祖先widget中的InheritedWidget改变时会被调用</span></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> didChangeDependencies() &#123;</span><br><span class="line">  <span class="keyword">super</span>.didChangeDependencies();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;didChangeDependencies&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>didUpdateWidget</li></ul><p>父类 setState 后，子类就会触发</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类 setState 后，子类就会触发</span></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> didUpdateWidget(oldWidget) &#123;</span><br><span class="line">  <span class="keyword">super</span>.didUpdateWidget(oldWidget);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;didUpdateWidget&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>addPostFrameCallback</li></ul><p>渲染结束回调，只执行1次</p><p>如我们可以放在 initState 时设置</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始 State, mounted 等于 true, 只执行1次</span></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> initState() &#123;</span><br><span class="line">  <span class="keyword">super</span>.initState();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;initState&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 渲染结束调用，只执行1次</span></span><br><span class="line">  SchedulerBinding.instance?.addPostFrameCallback((timeStamp) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;addPostFrameCallback&quot;</span>);</span><br><span class="line">    <span class="built_in">print</span>(timeStamp);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>deactivate</li></ul><p>从组件树中移除 State 时调用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> deactivate() &#123;</span><br><span class="line">  <span class="keyword">super</span>.deactivate();</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;deactivate&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>dispose</li></ul><p>组件被释放时调用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> dispose() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;dispose&quot;</span>);</span><br><span class="line">  <span class="keyword">super</span>.dispose();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>代码</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/scheduler.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> img1 =</span><br><span class="line">    <span class="string">&quot;https://ducafecat.tech/2021/12/09/blog/2021-jetbrains-fleet-vs-vscode/2021-12-09-10-30-00.png&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> img2 =</span><br><span class="line">    <span class="string">&quot;https://ducafecat.tech/2021/12/09/blog/2021-jetbrains-fleet-vs-vscode/2021-12-09-20-45-02.png&quot;</span>;</span><br><span class="line"></span><br><span class="line">Widget imageWidget(&#123;<span class="keyword">required</span> <span class="built_in">String</span> imgUrl&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">    color: Colors.amber,</span><br><span class="line">    child: Image.network(imgUrl),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BannerWidget</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> BannerWidget(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建 State 只执行1次</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;BannerWidget&gt; createState() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;createState&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> _BannerWidgetState();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BannerWidgetState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BannerWidget</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">String?</span> imgUrl;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 初始 State, mounted 等于 true, 只执行1次</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;initState&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 渲染结束调用，只执行1次</span></span><br><span class="line">    SchedulerBinding.instance?.addPostFrameCallback((timeStamp) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;addPostFrameCallback&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(timeStamp);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 父或祖先widget中的InheritedWidget改变时会被调用</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didChangeDependencies() &#123;</span><br><span class="line">    <span class="keyword">super</span>.didChangeDependencies();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;didChangeDependencies&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 父类 setState 后，子类就会触发</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didUpdateWidget(oldWidget) &#123;</span><br><span class="line">    <span class="keyword">super</span>.didUpdateWidget(oldWidget);</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;didUpdateWidget&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 从组件树中移除 State 时调用</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> deactivate() &#123;</span><br><span class="line">    <span class="keyword">super</span>.deactivate();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;deactivate&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 组件被释放时调用</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;dispose&quot;</span>);</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// UI 被重新渲染的时候多次执行</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        ElevatedButton(</span><br><span class="line">          onPressed: () &#123;</span><br><span class="line">            <span class="keyword">if</span> (mounted == <span class="keyword">true</span>) &#123;</span><br><span class="line">              setState(() &#123;</span><br><span class="line">                imgUrl = imgUrl == img1 ? img2 : img1;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          child: <span class="keyword">const</span> Text(<span class="string">&quot;切换图片&quot;</span>),</span><br><span class="line">        ),</span><br><span class="line">        imageWidget(</span><br><span class="line">          imgUrl: imgUrl ?? img1,</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        body: Column(</span><br><span class="line">          children: <span class="keyword">const</span> [</span><br><span class="line">            Text(<span class="string">&#x27;有无状态组件&#x27;</span>),</span><br><span class="line">            BannerWidget(),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>输出</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">flutter: createState</span><br><span class="line">flutter: initState</span><br><span class="line">flutter: didChangeDependencies</span><br><span class="line">flutter: addPostFrameCallback</span><br><span class="line">flutter: 0:00:00.000000</span><br></pre></td></tr></table></figure><h2 id="StatelessWidget-生命周期"><a href="#StatelessWidget-生命周期" class="headerlink" title="StatelessWidget 生命周期"></a>StatelessWidget 生命周期</h2><p>无状态组件，不需要处理生命周期，直接显示即可</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">StatelessWidget</span> <span class="keyword">extends</span> <span class="title">Widget</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">Initializes [key] for subclasses.</span></span></span><br><span class="line">  <span class="keyword">const</span> StatelessWidget(&#123; Key? key &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">Creates a [StatelessElement] to manage this widget&#x27;s location in the tree.</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">It is uncommon for subclasses to override this method.</span></span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  StatelessElement createElement() =&gt; StatelessElement(<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure><blockquote><p>在源码中可见 <code>createElement()</code> 创建组件到组件树，不需要重写去维护</p></blockquote><h2 id="App生命周期"><a href="#App生命周期" class="headerlink" title="App生命周期"></a>App生命周期</h2><ul><li>第一步： 创建 StatefulWidget 组件，混入 WidgetsBindingObserver</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; <span class="title">with</span> <span class="title">WidgetsBindingObserver</span> </span>&#123;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><ul><li>第二步：添加观察者 addObserver</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> initState() &#123;</span><br><span class="line">  <span class="keyword">super</span>.initState();</span><br><span class="line">  WidgetsBinding.instance?.addObserver(<span class="keyword">this</span>); <span class="comment">//添加观察者</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>生命周期变化时回调 didChangeAppLifecycleState</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  生命周期变化时回调</span></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> didChangeAppLifecycleState(AppLifecycleState state) &#123;</span><br><span class="line">  <span class="keyword">super</span>.didChangeAppLifecycleState(state);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;didChangeAppLifecycleState: <span class="subst">$state</span>&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>resumed</td><td>应用程序可见且响应用户输入。</td></tr><tr><td>inactive</td><td>应用程序处于非激活状态，无法响应用户输入。</td></tr><tr><td>pause</td><td>应用程序不可见且无法响应用户输入，运行在后台。</td></tr><tr><td>detached</td><td>应用程序仍寄存在Flutter引擎上，但与平台 View 分离。</td></tr><tr><td>suspending</td><td>应用被挂起，此状态IOS永远不会回调</td></tr></tbody></table><ul><li>代码</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;package:flutter/material.dart&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _MyAppState createState() =&gt; _MyAppState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//实现WidgetsBindingObserver观察者</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; <span class="title">with</span> <span class="title">WidgetsBindingObserver</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    WidgetsBinding.instance?.addObserver(<span class="keyword">this</span>); <span class="comment">//添加观察者</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          title: <span class="keyword">const</span> Text(<span class="string">&quot;App生命周期&quot;</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: Column(</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            <span class="keyword">const</span> Text(<span class="string">&quot;首页&quot;</span>),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  生命周期变化时回调</span></span><br><span class="line">  <span class="comment">//  resumed:应用可见并可响应用户操作,app进入前台</span></span><br><span class="line">  <span class="comment">//  inactive:用户可见，但不可响应用户操作，比如来了个电话,前后台切换的过渡状态</span></span><br><span class="line">  <span class="comment">//  paused:已经暂停了，用户不可见、不可操作，app进入后台</span></span><br><span class="line">  <span class="comment">//  suspending：应用被挂起，此状态IOS永远不会回调</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didChangeAppLifecycleState(AppLifecycleState state) &#123;</span><br><span class="line">    <span class="keyword">super</span>.didChangeAppLifecycleState(state);</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;didChangeAppLifecycleState: <span class="subst">$state</span>&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//当前系统改变了一些访问性活动的回调</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didChangeAccessibilityFeatures() &#123;</span><br><span class="line">    <span class="keyword">super</span>.didChangeAccessibilityFeatures();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;didChangeAccessibilityFeatures&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//低内存回调</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didHaveMemoryPressure() &#123;</span><br><span class="line">    <span class="keyword">super</span>.didHaveMemoryPressure();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;didHaveMemoryPressure&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//用户本地设置变化时调用，如系统语言改变</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didChangeLocales(<span class="built_in">List</span>&lt;Locale&gt;? locale) &#123;</span><br><span class="line">    <span class="keyword">super</span>.didChangeLocales(locale);</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;didChangeLocales&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//应用尺寸改变时回调，例如旋转</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didChangeMetrics() &#123;</span><br><span class="line">    <span class="keyword">super</span>.didChangeMetrics();</span><br><span class="line">    Size? size = WidgetsBinding.instance?.<span class="built_in">window</span>.physicalSize;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;didChangeMetrics  ：宽：<span class="subst">$&#123;size?.width&#125;</span> 高：<span class="subst">$&#123;size?.height&#125;</span>&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//系统切换主题时回调</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didChangePlatformBrightness() &#123;</span><br><span class="line">    <span class="keyword">super</span>.didChangePlatformBrightness();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;didChangePlatformBrightness&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown">文字系数变化</span></span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didChangeTextScaleFactor() &#123;</span><br><span class="line">    <span class="keyword">super</span>.didChangeTextScaleFactor();</span><br><span class="line">    <span class="built_in">print</span>(</span><br><span class="line">        <span class="string">&quot;didChangeTextScaleFactor  ：<span class="subst">$&#123;WidgetsBinding.instance?.window.textScaleFactor&#125;</span>&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">    WidgetsBinding.instance?.removeObserver(<span class="keyword">this</span>); <span class="comment">//销毁观察者</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>输出信息</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">flutter: didChangeMetrics  ：宽：1125.0 高：2436.0</span><br><span class="line">flutter: didChangeAppLifecycleState: AppLifecycleState.inactive</span><br><span class="line">flutter: didHaveMemoryPressure</span><br><span class="line">flutter: didChangeAppLifecycleState: AppLifecycleState.paused</span><br><span class="line">flutter: didChangePlatformBrightness</span><br><span class="line">flutter: didChangeMetrics  ：宽：1125.0 高：2436.0</span><br><span class="line">flutter: didChangePlatformBrightness</span><br><span class="line">flutter: didChangeMetrics  ：宽：1125.0 高：2436.0</span><br><span class="line">flutter: didChangeAppLifecycleState: AppLifecycleState.inactive</span><br><span class="line">flutter: didChangeAppLifecycleState: AppLifecycleState.resumed</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-基础特性-有状态无状态组件</title>
      <link href="/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E6%9C%89%E7%8A%B6%E6%80%81%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6/"/>
      <url>/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E6%9C%89%E7%8A%B6%E6%80%81%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="有状态无状态组件"><a href="#有状态无状态组件" class="headerlink" title="有状态无状态组件"></a>有状态无状态组件</h1><h2 id="无状态-StatelessWidget"><a href="#无状态-StatelessWidget" class="headerlink" title="无状态 StatelessWidget"></a>无状态 StatelessWidget</h2><p>准备两张图片</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> img1 =</span><br><span class="line">    <span class="string">&quot;https://ducafecat.tech/2021/12/09/blog/2021-jetbrains-fleet-vs-vscode/2021-12-09-10-30-00.png&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> img2 =</span><br><span class="line">    <span class="string">&quot;https://ducafecat.tech/2021/12/09/blog/2021-jetbrains-fleet-vs-vscode/2021-12-09-20-45-02.png&quot;</span>;</span><br></pre></td></tr></table></figure><p>编写图片显示组件 <code>BannerWidget</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BannerWidget</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> BannerWidget(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Image.network(img1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>MyApp</code> 执行</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        body: Column(</span><br><span class="line">          children: <span class="keyword">const</span> [</span><br><span class="line">            Text(<span class="string">&#x27;有无状态组件&#x27;</span>),</span><br><span class="line">            BannerWidget(),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行</p><p><img src="/assets/image-20220618055552705.png" alt="image-20220618055552705"></p><h2 id="有状态-StatefulWidget"><a href="#有状态-StatefulWidget" class="headerlink" title="有状态 StatefulWidget"></a>有状态 StatefulWidget</h2><p>改写成有状态组件</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BannerWidget</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> BannerWidget(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;BannerWidget&gt; createState() =&gt; _BannerWidgetState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BannerWidgetState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BannerWidget</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">String?</span> imgUrl;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        ElevatedButton(</span><br><span class="line">          onPressed: () &#123;</span><br><span class="line">            setState(() &#123;</span><br><span class="line">              imgUrl = imgUrl == img1 ? img2 : img1;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;,</span><br><span class="line">          child: <span class="keyword">const</span> Text(<span class="string">&quot;切换图片&quot;</span>),</span><br><span class="line">        ),</span><br><span class="line">        Image.network(imgUrl ?? img1),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行</p><p><img src="/assets/image-20220618060738680.png" alt="image-20220618060738680"></p><blockquote><p>可以发现通过 <code>setState</code> 来管理和维护内部数据状态</p></blockquote><h2 id="有状态包裹无状态组件"><a href="#有状态包裹无状态组件" class="headerlink" title="有状态包裹无状态组件"></a>有状态包裹无状态组件</h2><p>编写图片显示组件</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageWidget</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> ImageWidget(&#123;Key? key, <span class="keyword">required</span> <span class="keyword">this</span>.imgUrl&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> imgUrl;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">        padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">        color: Colors.amber,</span><br><span class="line">        child: Image.network(imgUrl));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>这里加了个 Container 显示边框</p></blockquote><p>直接调用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">children: [</span><br><span class="line">  ...</span><br><span class="line">  ImageWidget(</span><br><span class="line">    imgUrl: imgUrl ?? img1,</span><br><span class="line">  ),</span><br><span class="line">],</span><br></pre></td></tr></table></figure><p>执行</p><p><img src="/assets/image-20220618062345553.png" alt="image-20220618062345553"></p><blockquote><p>可以发现很多组件都是无状态的，文本、图片、输入框、按钮、卡片、图标…</p></blockquote><p>组件树</p><p><img src="/assets/image-20220618063344635.png" alt="image-20220618063344635"></p><h2 id="使用函数编写组件"><a href="#使用函数编写组件" class="headerlink" title="使用函数编写组件"></a>使用函数编写组件</h2><p>编写函数组件</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Widget imageWidget(&#123;<span class="keyword">required</span> <span class="built_in">String</span> imgUrl&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">    color: Colors.amber,</span><br><span class="line">    child: Image.network(imgUrl),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">imageWidget(</span><br><span class="line">  imgUrl: imgUrl ?? img1,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>查看组件树</p><p><img src="/assets/image-20220618063630008.png" alt="image-20220618063630008"></p><blockquote><p>可以发现没有显示组件的名称 <code>imageWidget</code> 只是Container</p><p>Flutter 这样做是出于性能考虑，所以如果你是可复用组件，需要用 class 包裹</p></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://medium.com/@paridhi.softinator/flutter-stateless-and-stateful-widget-4f1ef1fb7177">Flutter Stateless and Stateful Widget</a></li><li><a href="https://medium.com/flutter-community/flutter-stateful-vs-stateless-db325309deae">Flutter: Stateful vs Stateless Widget</a></li></ul><h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><ul><li>在 macos 中网络请求</li></ul><p>macos 网络访问没有权限</p><p>修改文件 <code>macos/Runner/DebugProfile.entitlements</code> 和 <code>macos/Runner/Release.entitlements</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;com.apple.security.network.client&lt;/key&gt;</span><br><span class="line">&lt;true/&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-基础特性-无边界 unbounded</title>
      <link href="/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E6%97%A0%E8%BE%B9%E7%95%8Cunbounded/"/>
      <url>/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E6%97%A0%E8%BE%B9%E7%95%8Cunbounded/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="无边界-unbounded"><a href="#无边界-unbounded" class="headerlink" title="无边界 unbounded"></a>无边界 unbounded</h1><h2 id="UnconstrainedBox-不受约束"><a href="#UnconstrainedBox-不受约束" class="headerlink" title="UnconstrainedBox 不受约束"></a>UnconstrainedBox 不受约束</h2><ul><li><code>UnconstrainedBox</code> 包裹内部的 Container 10*10 可以不受约束自己控制大小</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        body: ConstrainedBox(</span><br><span class="line">          constraints: <span class="keyword">const</span> BoxConstraints(</span><br><span class="line">            minWidth: <span class="number">100</span>,</span><br><span class="line">            minHeight: <span class="number">100</span>,</span><br><span class="line">            maxWidth: <span class="number">300</span>,</span><br><span class="line">            maxHeight: <span class="number">300</span>,</span><br><span class="line">          ),</span><br><span class="line">          child: UnconstrainedBox(</span><br><span class="line">            child: Container(</span><br><span class="line">              width: <span class="number">10</span>,</span><br><span class="line">              height: <span class="number">10</span>,</span><br><span class="line">              color: Colors.blue,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>显示了一个 <code>10*10</code> 的正方形，没有收到 <code>ConstrainedBox</code> 的影响</li></ul><p><img src="/assets/image-20220617230952463.png" alt="image-20220617230952463"></p><ul><li>约束查看 Container 10*10，父级约束 最小宽高 100</li></ul><p><img src="/assets/image-20220617231111345.png" alt="image-20220617231111345"></p><h2 id="unbounded-组件"><a href="#unbounded-组件" class="headerlink" title="unbounded 组件"></a>unbounded 组件</h2><ul><li><code>Row</code> <code>Column</code> <code>ListView</code> 这种组件 属于 <code>unbounded</code></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        body: Column(</span><br><span class="line">          children: <span class="keyword">const</span> [</span><br><span class="line">            FlutterLogo(size: <span class="number">50</span>),</span><br><span class="line">            FlutterLogo(size: <span class="number">20</span>),</span><br><span class="line">            <span class="comment">// Container(</span></span><br><span class="line">            <span class="comment">//   height: 2000,</span></span><br><span class="line">            <span class="comment">//   color: Colors.amber,</span></span><br><span class="line">            <span class="comment">// ),</span></span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/image-20220617230151965.png" alt="image-20220617230151965"></p><ul><li>Column 垂直元素 unconstrained 没有约束，高度不限制</li></ul><p><img src="/assets/image-20220617230033041.png" alt="image-20220617230033041"></p><ul><li>加入一个高度超出屏幕区域的 Container</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        body: Column(</span><br><span class="line">          children: [</span><br><span class="line">            <span class="keyword">const</span> FlutterLogo(size: <span class="number">50</span>),</span><br><span class="line">            <span class="keyword">const</span> FlutterLogo(size: <span class="number">20</span>),</span><br><span class="line">            Container(</span><br><span class="line">              height: <span class="number">2000</span>, <span class="comment">// 设置了 2000 高</span></span><br><span class="line">              color: Colors.amber,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>提示底部超出溢出</li></ul><p><img src="/assets/image-20220617230409553.png" alt="image-20220617230409553"></p><ul><li>清楚的显示了你溢出的情况，屏幕高 430 ，Column 被撑开 2070 , Container 高 2000 ， 底部溢出高度 1640.</li></ul><p><img src="/assets/image-20220617230542902.png" alt="image-20220617230542902"></p>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-基础特性-紧约束</title>
      <link href="/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E7%B4%A7%E7%BA%A6%E6%9D%9F/"/>
      <url>/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E7%B4%A7%E7%BA%A6%E6%9D%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="紧约束"><a href="#紧约束" class="headerlink" title="紧约束"></a>紧约束</h1><h2 id="ConstrainedBox-约束组件"><a href="#ConstrainedBox-约束组件" class="headerlink" title="ConstrainedBox 约束组件"></a>ConstrainedBox 约束组件</h2><ul><li><code>constraints</code> 通过 <code>maxWidth</code> <code>maxHeight</code> ，来设置子组件最大约束</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(build());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget build() &#123;</span><br><span class="line">  <span class="keyword">return</span> MaterialApp(</span><br><span class="line">    home: Scaffold(</span><br><span class="line">      body: Center(</span><br><span class="line">        child: ConstrainedBox(</span><br><span class="line">          constraints: <span class="keyword">const</span> BoxConstraints(</span><br><span class="line">            maxWidth: <span class="number">200</span>,</span><br><span class="line">            maxHeight: <span class="number">200</span>,</span><br><span class="line">          ),</span><br><span class="line">          child: Container(</span><br><span class="line">            color: Colors.amber,</span><br><span class="line">            width: <span class="number">50</span>,</span><br><span class="line">            height: <span class="number">50</span>,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>显示了一个 50 x 50 的 Container</p><p><img src="/assets/image-20220617214549883.png" alt="image-20220617214549883"></p><ul><li>我们加上 <code>minWidth</code> <code>minHeight</code></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(build());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget build() &#123;</span><br><span class="line">  <span class="keyword">return</span> MaterialApp(</span><br><span class="line">    home: Scaffold(</span><br><span class="line">      body: Center(</span><br><span class="line">        child: ConstrainedBox(</span><br><span class="line">          constraints: <span class="keyword">const</span> BoxConstraints(</span><br><span class="line">            minWidth: <span class="number">100</span>,</span><br><span class="line">            minHeight: <span class="number">100</span>,</span><br><span class="line">            maxWidth: <span class="number">200</span>,</span><br><span class="line">            maxHeight: <span class="number">200</span>,</span><br><span class="line">          ),</span><br><span class="line">          child: Container(</span><br><span class="line">            color: Colors.amber,</span><br><span class="line">            width: <span class="number">10</span>,</span><br><span class="line">            height: <span class="number">10</span>,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这时候 尺寸强制被设置为了 100 * 100</p><p><img src="/assets/image-20220617214913498.png" alt="image-20220617214913498"></p><ul><li>查看约束情况</li></ul><p><img src="/assets/image-20220617215049479.png" alt="image-20220617215049479"></p><h2 id="紧约束定义"><a href="#紧约束定义" class="headerlink" title="紧约束定义"></a>紧约束定义</h2><p>它的最大/最小宽度是一致的，高度也一样。</p><ul><li>通过 BoxConstraints.tight 可以设置紧约束</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(build());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget build() &#123;</span><br><span class="line">  <span class="keyword">return</span> MaterialApp(</span><br><span class="line">    home: Scaffold(</span><br><span class="line">      body: Center(</span><br><span class="line">        child: ConstrainedBox(</span><br><span class="line">          constraints: BoxConstraints.tight(<span class="keyword">const</span> Size(<span class="number">100</span>, <span class="number">100</span>)),</span><br><span class="line">          child: Container(</span><br><span class="line">            color: Colors.amber,</span><br><span class="line">            width: <span class="number">10</span>,</span><br><span class="line">            height: <span class="number">10</span>,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/image-20220617223634120.png" alt="image-20220617223634120"></p><ul><li>宽高约束都被设置成了 100</li></ul><p><img src="/assets/image-20220617225309360.png" alt="image-20220617225309360"></p>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-基础特性-松约束</title>
      <link href="/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E6%9D%BE%E7%BA%A6%E6%9D%9F/"/>
      <url>/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E6%9D%BE%E7%BA%A6%E6%9D%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="松约束"><a href="#松约束" class="headerlink" title="松约束"></a>松约束</h1><h2 id="Column-宽度等于子元素最大宽度"><a href="#Column-宽度等于子元素最大宽度" class="headerlink" title="Column 宽度等于子元素最大宽度"></a>Column 宽度等于子元素最大宽度</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(build());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget build() &#123;</span><br><span class="line">  <span class="keyword">return</span> MaterialApp(</span><br><span class="line">    home: Scaffold(</span><br><span class="line">      body: Column(</span><br><span class="line">        children: <span class="keyword">const</span> [</span><br><span class="line">          Text(<span class="string">&quot;aaaaaaaaaaaaaaaaaaaaaa&quot;</span>),</span><br><span class="line">          Text(<span class="string">&quot;aaaaaaaaaaa&quot;</span>),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/image-20220628083227210.png" alt="image-20220628083227210"></p><h2 id="Container-紧包裹子元素"><a href="#Container-紧包裹子元素" class="headerlink" title="Container 紧包裹子元素"></a>Container 紧包裹子元素</h2><ul><li>Scaffold 填充了整个屏幕，Container 包裹了 Column</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        body: Container(</span><br><span class="line">          color: Colors.amber,</span><br><span class="line">          child: Column(</span><br><span class="line">            children: <span class="keyword">const</span> [</span><br><span class="line">              Text(<span class="string">&quot;aaaaaaaaaaaaaaaa&quot;</span>),</span><br><span class="line">              Text(<span class="string">&quot;bbbbbbbbb&quot;</span>),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/image-20220617212555636.png" alt="image-20220617212555636"></p><ul><li>Container 的宽高随着 Column 一起变化 <code>w = 124.0</code>，紧包裹</li></ul><p><img src="/assets/image-20220617213030796.png" alt="image-20220617213030796"></p><h2 id="松约束定义"><a href="#松约束定义" class="headerlink" title="松约束定义"></a>松约束定义</h2><p>当一个 widget 告诉其子级可以比自身更小的话， 我们通常称这个 widget 对其子级使用 <strong>宽松约束（loose）</strong>。</p><ul><li>Scaffold 对 Column 的约束是宽高屏幕宽度内即可</li></ul><p><img src="/assets/image-20220617213257446.png" alt="image-20220617213257446"></p><ul><li>Column 的宽度按 Text 最大宽度为准</li></ul><p><img src="/assets/image-20220617213448521.png" alt="image-20220617213448521"></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://api.flutter.dev/flutter/rendering/BoxConstraints-class.html">https://api.flutter.dev/flutter/rendering/BoxConstraints-class.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-基础特性-布局约束规则</title>
      <link href="/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E5%B8%83%E5%B1%80%E7%BA%A6%E6%9D%9F%E8%A7%84%E5%88%99/"/>
      <url>/2022/09/05/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E5%B8%83%E5%B1%80%E7%BA%A6%E6%9D%9F%E8%A7%84%E5%88%99/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="布局约束规则"><a href="#布局约束规则" class="headerlink" title="布局约束规则"></a>布局约束规则</h1><h2 id="让子元素竟可能的大，撑满父元素"><a href="#让子元素竟可能的大，撑满父元素" class="headerlink" title="让子元素竟可能的大，撑满父元素"></a>让子元素竟可能的大，撑满父元素</h2><ul><li>在 main 函数中，直接创建 Container 显示</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  runApp(build());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget build() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    width: <span class="number">200</span>,</span><br><span class="line">    height: <span class="number">200</span>,</span><br><span class="line">    color: Colors.amber,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/2021-12-26-22-22-07.png" alt="2021-12-26-22-22-07"></p><h2 id="确认位置后，按子元素大小显示"><a href="#确认位置后，按子元素大小显示" class="headerlink" title="确认位置后，按子元素大小显示"></a>确认位置后，按子元素大小显示</h2><ul><li>用 Center 包裹 Container</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  runApp(build());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget build() &#123;</span><br><span class="line">  <span class="keyword">return</span> Center(</span><br><span class="line">    child: Container(</span><br><span class="line">      width: <span class="number">200</span>,</span><br><span class="line">      height: <span class="number">200</span>,</span><br><span class="line">      color: Colors.amber,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/2021-12-26-22-23-37.png" alt="2021-12-26-22-23-37"></p><h2 id="核心规则：Constraints-go-down-Sizes-go-up-Positions-are-set-by-parents"><a href="#核心规则：Constraints-go-down-Sizes-go-up-Positions-are-set-by-parents" class="headerlink" title="核心规则：Constraints go down. Sizes go up. Positions are set by parents."></a>核心规则：Constraints go down. Sizes go up. Positions are set by parents.</h2><ul><li>上层 widget 向下层 widget 传递约束条件。</li><li>下层 widget 向上层 widget 传递大小信息。</li><li>上层 widget 决定下层 widget 的位置。</li></ul><p><img src="/assets/2021-12-26-22-23-37-1662365609905-3.png" alt="2021-12-26-22-23-37"></p><ul><li>我们写3个文字组件纵向排列</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildScaffold() &#123;</span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">    body: Column(</span><br><span class="line">      children: <span class="keyword">const</span> &lt;Widget&gt;[</span><br><span class="line">        Text(<span class="string">&quot;aaaaaa&quot;</span>),</span><br><span class="line">        Text(<span class="string">&quot;bbbbb&quot;</span>),</span><br><span class="line">        Text(<span class="string">&quot;cccc&quot;</span>),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/2021-12-26-22-23-37-1662365633793-5.png" alt="2021-12-26-22-23-37"></p><ul><li>宽度 <code>0.0 &lt;= w &lt;= 303.0</code> , 高度 <code>0.0 &lt;= h &lt;= 523.0</code> ，就是上层传下来的约束</li></ul><p><img src="/assets/2021-12-26-22-23-37-1662365657812-7.png" alt="2021-12-26-22-23-37"></p><ul><li>宽度 <code>w=32.0</code> , 高度 <code>h=16.0</code> 就是组件向上层传递的大小信息</li></ul><p><img src="/assets/2021-12-26-22-23-37-1662365686551-9.png" alt="2021-12-26-22-23-37"></p><ul><li>元素左边 <code>w=7.5</code>，右边 <code>w=7.5</code>，就是上层决定下层的组件位置</li></ul><p><img src="/assets/2021-12-26-22-23-37-1662365718743-11.png" alt="2021-12-26-22-23-37"></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://medium.com/flutter-community/flutter-the-advanced-layout-rule-even-beginners-must-know-edc9516d1a2">https://medium.com/flutter-community/flutter-the-advanced-layout-rule-even-beginners-must-know-edc9516d1a2</a></li><li><a href="https://juejin.cn/post/6846687593745088526">https://juejin.cn/post/6846687593745088526</a></li><li><a href="https://docs.flutter.dev/development/ui/layout/constraints">https://docs.flutter.dev/development/ui/layout/constraints</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-基础特性-devTools调试工具</title>
      <link href="/2022/09/04/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-devTools%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/"/>
      <url>/2022/09/04/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-devTools%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="devTools-调试工具"><a href="#devTools-调试工具" class="headerlink" title="devTools 调试工具"></a>devTools 调试工具</h1><h2 id="启动调试器"><a href="#启动调试器" class="headerlink" title="启动调试器"></a>启动调试器</h2><ul><li>启动调试后<ul><li>1 点击右上角按钮</li><li>2 点击选中按钮</li><li>3 布局浏览器</li></ul></li></ul><p><img src="/assets/20220617174426.png" alt="20220617174426"></p><ul><li>命令模式 <code>Dart: Open DevTools</code></li></ul><p><code>cmd + shift + p</code> 启动命令</p><p><img src="/assets/20220617174728.png" alt="20220617174728"></p><ul><li>我们选择 <code>in web browser</code></li></ul><p><img src="/assets/20220617174704.png" alt="20220617174704"></p><ul><li>如果是第一次打开，选择允许打开 <code>always open</code></li></ul><p><img src="/assets/20220617200835.png" alt="20220617200835"></p><ul><li>会在浏览器中打开调试界面</li><li>面板选项<ul><li>Flutter Inspector 布局组件</li><li>Performance 性能</li><li>CPU Profiler 耗能</li><li>Memory 内存</li><li>Debugger 调试信息</li><li>Network 抓包</li><li>Logging 日志</li><li>App Size 文件打包尺寸分析</li></ul></li></ul><p><img src="/assets/20220617174823.png" alt="20220617174823"></p><blockquote><p>现阶段我们把注意力放在布局面板上，其它做个了解就行，性能调试需要开启 <code>--profile</code> 参数</p><p>Flutter Performance 性能调试工具 <a href="https://www.bilibili.com/video/BV1Tb4y1p7t9">https://www.bilibili.com/video/BV1Tb4y1p7t9</a></p></blockquote><h2 id="布局面板"><a href="#布局面板" class="headerlink" title="布局面板"></a>布局面板</h2><ul><li>说明<ul><li>1 组件树</li><li>2 纵向布局信息</li><li>3 横向布局信息</li><li>4 约束信息</li></ul></li></ul><p><img src="/assets/20220617175316.png" alt="20220617175316"></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://docs.flutter.dev/development/tools/devtools/overview">https://docs.flutter.dev/development/tools/devtools/overview</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-基础特性-一切都是 widget</title>
      <link href="/2022/09/04/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AFwidget/"/>
      <url>/2022/09/04/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AFwidget/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="一切都是-widget"><a href="#一切都是-widget" class="headerlink" title="一切都是 widget"></a>一切都是 widget</h1><h2 id="UI-组件"><a href="#UI-组件" class="headerlink" title="UI 组件"></a>UI 组件</h2><ul><li><a href="https://docs.flutter.dev/development/ui/widgets">https://docs.flutter.dev/development/ui/widgets</a></li></ul><p><img src="/assets/image-20220627213410037.png" alt="image-20220627213410037"></p><ul><li><a href="https://gallery.flutter.dev/">https://gallery.flutter.dev/</a></li></ul><p><img src="/assets/20220617164834.png" alt="20220617164834"></p><ul><li><a href="https://x-wei.github.io/flutter_catalog">https://x-wei.github.io/flutter_catalog</a></li></ul><p><img src="/assets/20220617165319.png" alt="20220617165319"></p><p>如果你需要什么组件，可以先去以上两个网址看看有现成的能否满足需求。</p><h2 id="架构设计"><a href="#架构设计" class="headerlink" title="架构设计"></a>架构设计</h2><p><img src="/assets/20220617165615.png" alt="20220617165615"></p><p>渲染引擎</p><p><a href="https://skia.org/">https://skia.org/</a></p><h2 id="sdk-源码目录"><a href="#sdk-源码目录" class="headerlink" title="sdk 源码目录"></a>sdk 源码目录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sdk/packages/flutter/lib/src</span><br></pre></td></tr></table></figure><p><img src="/assets/20220617165900.png" alt="20220617165900"></p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>Foundation</td><td>基础部分</td></tr><tr><td>Animation</td><td>动画</td></tr><tr><td>Painting</td><td>边框绘制、颜色、裁剪图像处理、画笔、插值器等跟绘制、图像、装饰相关的类</td></tr><tr><td>Gestures</td><td>事件类、长按、触摸、放大等等</td></tr><tr><td>Rendering</td><td>渲染 Widget 的基础库</td></tr><tr><td>Widget</td><td>依赖 Rendering 层进行构建，Widget 是 Flutter 的核心</td></tr><tr><td>Material</td><td>Android 平台的风格</td></tr><tr><td>Cupertino</td><td>iOS 平台风格的扁平化</td></tr></tbody></table><h2 id="widget-分类"><a href="#widget-分类" class="headerlink" title="widget 分类"></a>widget 分类</h2><p><img src="/assets/20220617170539.png" alt="20220617170539"></p><ul><li>基础组件 Widget（Basics）：</li></ul><p>Container、Row、Column、Image、Text、Icon、RaisedButton、Scaffold、Appbar、FlutterLogo、Placeholder</p><ul><li>Material Components：</li><li>App 结构和导航类</li></ul><p>Scaffold、Appbar、BottomNavigationBar、TabBar、TabBarView、MaterialApp、WidgetsApp、Drawer、SliverAppBar</p><ul><li>按钮类</li></ul><p>RaisedButton、FloatingActionButton、FlatButton、IconButton、DropdownButton、PopupMenuButton、ButtonBar</p><ul><li>输入和选择类</li></ul><p>TextField、Checkbox、Raido、Switch、Slider、Date&amp;Time Pickers</p><ul><li>对话框和控制面板类</li></ul><p>SimpleDialog、AlertDialog、BottomSheet、ExpansionPanel、SnackBar）；</p><p>信息显示类（Image、Icon、Chip、Tooltip、DataTable、Card、LinearProgressIndicator、CircularProgressIndicator、GridView</p><ul><li>布局类</li></ul><p>ListTile、Stepper、Divider</p><ul><li>Cupertino （iOS-style widgets）：</li></ul><p>CupertinoActionSheet、CupertinoActivityIndicator、CupertinoAlertDialog、CupertinoButton、CupertinoDatePicker、CupertinoDialog、CupertinoDialogAction、CupertinoFullscreenDialogTransition、CupertinoPageScaffold、CupertinoPageTransition、CupertinoPicker、CupertinoPopupSurface、CupertinoSegmentedControl、CupertinoSlider、CupertinoSwitch、CupertinoNavigationBar、CupertinoTabBar、CupertinoTabScaffold、CupertinoTabView、CupertinoTextField、CupertinoTimerPicker</p><ul><li>Layout：</li><li>单个子元素的布局 Widget</li></ul><p>Container、Padding、Center、Align、FittedBox、AspectRatio、ConstrainedBox、Baseline、FractionallySizedBox、IntrinsicHeight、IntrinsicWidth、LimitedBox、Offstage、OverflowBox、SizedBox、SizedOverflowBox、Transform、CustomSingleChildLayout</p><ul><li>多个子元素的布局 Widget</li></ul><p>Row、Column、Stack、IndexedStack、GridView、Flow、Table、Wrap、ListBody、CustomMultiChildLayout、LayoutBuilder、ListView、Expanded</p><ul><li>Text 文本显示类：</li></ul><p>Text、RichText、DefaultTextStyle</p><ul><li>Assets、图片、Icons 类：</li></ul><p>Image、Icon、RawImage、AssetBundle</p><ul><li>Input 输入类：</li></ul><p>Form、FormField、RawKeyboardListener</p><ul><li>动画和 Motion 类：</li></ul><p>AnimatedContainer、AnimatedCrossFade、Hero、AnimatedBuilder、DecoratedBoxTransition、FadeTransition、PositionedTransition、RotationTransition、ScaleTransition、SizeTransition、SlideTransition、AnimatedDefaultTextStyle、AnimatedListState、AnimatedModalBarrier、AnimatedOpacity、AnimatedPhysicalModel、AnimatedPositioned、AnimatedSize、AnimatedWidget、AnimatedWidgetBaseState</p><ul><li>交互模型类：</li><li>触摸交互</li></ul><p>Draggable、LongPressDraggable、GestureDetector、DragTarget、Dismissible、IgnorePointer、AbsorbPointer、Scrollable</p><ul><li>路由导航</li></ul><p>Hero、Navigator</p><ul><li>样式类：</li></ul><p>Padding、Theme、MediaQuery</p><ul><li>绘制和效果类：</li></ul><p>Transform、Opacity、DecoratedBox、FractionalTranslation、RotatedBox、ClipOval、ClipPath、ClipRect、CustomPaint、BackdropFilter</p><ul><li>Async 异步模型类：</li></ul><p>FutureBuilder、StreamBuilder</p><ul><li>滚动类：</li></ul><p>GridView、ListView、NestedScrollView、SingleChildScrollView、Scrollable、Scrollbar、CustomScrollView、NotificationListener、ScrollConfiguration、RefreshIndicator、PageView</p><ul><li>辅助功能类：</li></ul><p>Semantics、MergeSemantics、ExcludeSemantics</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://github.com/flutter/gallery">https://github.com/flutter/gallery</a></li><li><a href="https://gallery.flutter.dev/">https://gallery.flutter.dev/</a></li><li><a href="https://docs.flutter.dev/development/ui/widgets">https://docs.flutter.dev/development/ui/widgets</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-基础特性-目录结构</title>
      <link href="/2022/09/04/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/"/>
      <url>/2022/09/04/Flutter/Flutter-%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h1><h2 id="创建-flutter-项目"><a href="#创建-flutter-项目" class="headerlink" title="创建 flutter 项目"></a>创建 flutter 项目</h2><ul><li>使用 vscode 创建项目 【首选】</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd + shift + p` 命令模式下 `flutter new project</span><br></pre></td></tr></table></figure><p><img src="/assets/20220617160934.png" alt="20220617160934"></p><p>选择 <code>Application</code> 类型</p><p><img src="/assets/20220617161715.png" alt="20220617161715"></p><ul><li>你也可以用 cli 方式 【可选】</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flutter create flutter_quickstart_learn</span></span><br></pre></td></tr></table></figure><ul><li>如果你是用 <code>object-c</code> <code>java</code> 的朋友 【可选】</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter create --ios-language=objc --android-language=java flutter_quickstart_learn</span><br></pre></td></tr></table></figure><h2 id="目录文件说明"><a href="#目录文件说明" class="headerlink" title="目录文件说明"></a>目录文件说明</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── android // 原生程序</span><br><span class="line">│   ├── app</span><br><span class="line">│   ├── gradle</span><br><span class="line">│   ├── build.gradle</span><br><span class="line">│   ├── flutter_quickstart_learn_android.iml</span><br><span class="line">│   ├── gradle.properties</span><br><span class="line">│   ├── gradlew</span><br><span class="line">│   ├── gradlew.bat</span><br><span class="line">│   ├── local.properties</span><br><span class="line">│   └── settings.gradle</span><br><span class="line">├── ios // 原生程序</span><br><span class="line">│   ├── Flutter</span><br><span class="line">│   ├── Runner</span><br><span class="line">│   ├── Runner.xcodeproj</span><br><span class="line">│   └── Runner.xcworkspace</span><br><span class="line">├── lib // flutter dart 代码</span><br><span class="line">│   └── main.dart</span><br><span class="line">├── linux // linux 端</span><br><span class="line">│   ├── flutter</span><br><span class="line">│   ├── CMakeLists.txt</span><br><span class="line">│   ├── main.cc</span><br><span class="line">│   ├── my_application.cc</span><br><span class="line">│   └── my_application.h</span><br><span class="line">├── macos // macos 端</span><br><span class="line">│   ├── Flutter</span><br><span class="line">│   ├── Runner</span><br><span class="line">│   ├── Runner.xcodeproj</span><br><span class="line">│   └── Runner.xcworkspace</span><br><span class="line">├── test // 测试目录</span><br><span class="line">│   └── widget_test.dart</span><br><span class="line">├── web // web 端</span><br><span class="line">│   ├── icons</span><br><span class="line">│   ├── favicon.png</span><br><span class="line">│   ├── index.html</span><br><span class="line">│   └── manifest.json</span><br><span class="line">├── windows // windows 端</span><br><span class="line">│   ├── flutter</span><br><span class="line">│   ├── runner</span><br><span class="line">│   └── CMakeLists.txt</span><br><span class="line">├── README.md</span><br><span class="line">├── analysis_options.yaml</span><br><span class="line">├── flutter_quickstart_learn.iml</span><br><span class="line">├── pubspec.lock // 包版本 lock</span><br><span class="line">└── pubspec.yaml // flutter 配置文件，包管理 资源管理 配置管理</span><br></pre></td></tr></table></figure><blockquote><p>可以发现 flutter 是一个多端编译框架，各个平台对应的目录都有了</p></blockquote><h2 id="运行程序"><a href="#运行程序" class="headerlink" title="运行程序"></a>运行程序</h2><p>能顺利运行，说明我们的环境没有问题，可以远航了。</p><p><img src="/assets/20220617163204.png" alt="20220617163204"></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://docs.flutter.dev/reference/flutter-cli">https://docs.flutter.dev/reference/flutter-cli</a></li><li><a href="https://docs.flutter.dev/get-started/codelab">https://docs.flutter.dev/get-started/codelab</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-开发准备- vscode 配置</title>
      <link href="/2022/09/04/Flutter/Flutter-%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87-vscode%E9%85%8D%E7%BD%AE/"/>
      <url>/2022/09/04/Flutter/Flutter-%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87-vscode%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="vscode-配置"><a href="#vscode-配置" class="headerlink" title="vscode 配置"></a>vscode 配置</h1><h2 id="打开配置文件"><a href="#打开配置文件" class="headerlink" title="打开配置文件"></a>打开配置文件</h2><p>命令行模式下 <code>ctrl + shift + p</code></p><p><img src="/assets/20220608155410.png" alt="20220608155410"></p><h2 id="配置-shell-下打开-code"><a href="#配置-shell-下打开-code" class="headerlink" title="配置 shell 下打开 code"></a>配置 shell 下打开 code</h2><p>输入 install code 搜索</p><p><img src="/assets/20220608155834.png" alt="20220608155834"></p><h2 id="自动应用提示"><a href="#自动应用提示" class="headerlink" title="自动应用提示"></a>自动应用提示</h2><p>特别是大量的 <code>const</code> 提示警告</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;source.fixAll&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// 自动修复 all</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><h2 id="折叠配置文件"><a href="#折叠配置文件" class="headerlink" title="折叠配置文件"></a>折叠配置文件</h2><p>这样资源管理器文件列表就干净了</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;explorer.fileNesting.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;explorer.fileNesting.patterns&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pubspec.yaml&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.packages, pubspec.lock, .flutter-plugins, .flutter-plugins-dependencies, .metadata, analysis_options.yaml, dartdoc_options.yaml&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><h2 id="光标快速移动"><a href="#光标快速移动" class="headerlink" title="光标快速移动"></a>光标快速移动</h2><p>设置键盘 “按键重复” “重复前延迟” ，这样打字快</p><p><img src="/assets/image-20220617061902456.png" alt="image-20220617061902456"></p><p>命令行中执行，关闭 vscode 苹果长按提示</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">defaults write com.microsoft.VSCode ApplePressAndHoldEnabled -bool <span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">defaults write com.microsoft.VSCodeInsiders ApplePressAndHoldEnabled -bool <span class="literal">false</span></span></span><br></pre></td></tr></table></figure><h2 id="括号线条高亮"><a href="#括号线条高亮" class="headerlink" title="括号线条高亮"></a>括号线条高亮</h2><p>全局设置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@id:editor.bracketPairColorization.enabled @id:editor.guides.bracketPairs</span><br></pre></td></tr></table></figure><p><img src="/assets/image-20220620223132333.png" alt="image-20220620223132333"></p><p><img src="/assets/image-20220620223345020.png" alt="image-20220620223345020"></p>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-开发准备- vscode 插件</title>
      <link href="/2022/09/04/Flutter/Flutter-%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87-vscode%E6%8F%92%E4%BB%B6/"/>
      <url>/2022/09/04/Flutter/Flutter-%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87-vscode%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="vscode-插件"><a href="#vscode-插件" class="headerlink" title="vscode 插件"></a>vscode 插件</h1><h2 id="Flutter-必装"><a href="#Flutter-必装" class="headerlink" title="Flutter 必装"></a>Flutter 必装</h2><p><a href="https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter">https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter</a></p><p><img src="/assets/20220617160834.png" alt="20220617160834"></p><h2 id="Awesome-Flutter-Snippets"><a href="#Awesome-Flutter-Snippets" class="headerlink" title="Awesome Flutter Snippets"></a>Awesome Flutter Snippets</h2><p>代码片段快捷</p><p><a href="https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets">https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets</a></p><p><img src="/assets/20220608140434.png" alt="20220608140434"></p><h2 id="Flutter-Widget-Snippets"><a href="#Flutter-Widget-Snippets" class="headerlink" title="Flutter Widget Snippets"></a>Flutter Widget Snippets</h2><p>又一个代码片段快捷</p><p><a href="https://marketplace.visualstudio.com/items?itemName=alexisvt.flutter-snippets">https://marketplace.visualstudio.com/items?itemName=alexisvt.flutter-snippets</a></p><p><img src="/assets/20220608141304.png" alt="20220608141304"></p><h2 id="Json-to-Dart-Model"><a href="#Json-to-Dart-Model" class="headerlink" title="Json to Dart Model"></a>Json to Dart Model</h2><p>根据 json 数据格式自动生成 entity 类</p><p><a href="https://marketplace.visualstudio.com/items?itemName=hirantha.json-to-dart">https://marketplace.visualstudio.com/items?itemName=hirantha.json-to-dart</a></p><p><img src="/assets/20220608140815.png" alt="20220608140815"></p><h2 id="GetX-Snippets"><a href="#GetX-Snippets" class="headerlink" title="GetX Snippets"></a>GetX Snippets</h2><p>getx 代码提示</p><p><a href="https://marketplace.visualstudio.com/items?itemName=get-snippets.get-snippets">https://marketplace.visualstudio.com/items?itemName=get-snippets.get-snippets</a></p><p><img src="/assets/20220608144324.png" alt="20220608144324"></p><h2 id="Flutter-GetX-Generator-猫哥"><a href="#Flutter-GetX-Generator-猫哥" class="headerlink" title="Flutter GetX Generator - 猫哥"></a>Flutter GetX Generator - 猫哥</h2><p>猫哥写的插件，很多快捷方式，非常实用</p><p><a href="https://marketplace.visualstudio.com/items?itemName=ducafecat.getx-template">https://marketplace.visualstudio.com/items?itemName=ducafecat.getx-template</a></p><p><img src="/assets/20220608144436.png" alt="20220608144436"></p><h2 id="Svg-Preview"><a href="#Svg-Preview" class="headerlink" title="Svg Preview"></a>Svg Preview</h2><p>现在图标基本上都是 svg 能预览还是很重要</p><p><a href="https://marketplace.visualstudio.com/items?itemName=SimonSiefke.svg-preview">https://marketplace.visualstudio.com/items?itemName=SimonSiefke.svg-preview</a></p><p><img src="/assets/20220608141120.png" alt="20220608141120"></p><h2 id="Path-Intellisense"><a href="#Path-Intellisense" class="headerlink" title="Path Intellisense"></a>Path Intellisense</h2><p>自动完成文件路径</p><p><a href="https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense">https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense</a></p><p><img src="/assets/20220608153647.png" alt="20220608153647"></p><h2 id="GitHub-Theme"><a href="#GitHub-Theme" class="headerlink" title="GitHub Theme"></a>GitHub Theme</h2><p>随着环境不同，你可以切换配色来让眼睛舒服。</p><p><a href="https://marketplace.visualstudio.com/items?itemName=GitHub.github-vscode-theme">https://marketplace.visualstudio.com/items?itemName=GitHub.github-vscode-theme</a></p><p><img src="/assets/20220608140649.png" alt="20220608140649"></p><p><img src="/assets/20220608140656.png" alt="20220608140656"></p><h2 id="Material-Icon-Theme"><a href="#Material-Icon-Theme" class="headerlink" title="Material Icon Theme"></a>Material Icon Theme</h2><p>通过图标快速识别文件作用</p><p><a href="https://marketplace.visualstudio.com/items?itemName=PKief.material-icon-theme">https://marketplace.visualstudio.com/items?itemName=PKief.material-icon-theme</a></p><p><img src="/assets/20220608140942.png" alt="20220608140942"></p><h2 id="Comment-Translate"><a href="#Comment-Translate" class="headerlink" title="Comment Translate"></a>Comment Translate</h2><p>注释翻译</p><p><a href="https://marketplace.visualstudio.com/items?itemName=intellsmi.comment-translate">https://marketplace.visualstudio.com/items?itemName=intellsmi.comment-translate</a></p><p><img src="/assets/image-20220621113346445.png" alt="image-20220621113346445"></p>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter-开发准备-说明</title>
      <link href="/2022/09/04/Flutter/Flutter-%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87-%E8%AF%B4%E6%98%8E/"/>
      <url>/2022/09/04/Flutter/Flutter-%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87-%E8%AF%B4%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="基础说明"><a href="#基础说明" class="headerlink" title="基础说明"></a>基础说明</h1><h2 id="设计目标"><a href="#设计目标" class="headerlink" title="设计目标"></a>设计目标</h2><ul><li>布局约束规则</li><li>基础组件使用</li><li>常见布局方式</li><li>组件抽取</li><li>为实战课做准备</li></ul><h2 id="知识点覆盖"><a href="#知识点覆盖" class="headerlink" title="知识点覆盖"></a>知识点覆盖</h2><p><img src="/assets/flutter-quickstart-learn-mind.png" alt="flutter-quickstart-learn-mind"></p><p><img src="/assets/FlOkMR8qN2K07EG0J69eMEw-IroG.png" alt="FlOkMR8qN2K07EG0J69eMEw-IroG"></p><h2 id="课件展示"><a href="#课件展示" class="headerlink" title="课件展示"></a>课件展示</h2><ul><li><p>Splash 启动屏</p></li><li><p>Welcome 欢迎屏</p></li><li><p>Login 登录界面</p></li><li><p>多端运行 ios、android、macos、windows、linux、web</p><p><img src="/assets/image-20220623092347578.png" alt="image-20220623092347578"></p></li></ul><p><img src="/assets/20220617134126.png" alt="20220617134126"></p><p><img src="/assets/20220617134139.png" alt="20220617134139"></p>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> flutter基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-扩展 extension</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%89%A9%E5%B1%95extension/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%89%A9%E5%B1%95extension/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="扩展-extension"><a href="#扩展-extension" class="headerlink" title="扩展 extension"></a>扩展 extension</h1><p>extension 本质上还是和继承一样扩展了方法。</p><p>但这是一种简洁优雅的方式，你可以想想之前继承的繁琐。</p><h2 id="示例-扩展日期时间"><a href="#示例-扩展日期时间" class="headerlink" title="示例 扩展日期时间"></a>示例 扩展日期时间</h2><ul><li>加入依赖包 pubspec.yaml</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">intl:</span> <span class="string">^0.17.0</span></span><br></pre></td></tr></table></figure><ul><li>编写扩展类 ExDateTime</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:intl/intl.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> ExDateTime <span class="keyword">on</span> <span class="built_in">DateTime</span> &#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">方法，格式化日期 yyyy-MM-dd</span></span></span><br><span class="line">  <span class="built_in">String</span> toDateString(&#123;<span class="built_in">String</span> format = <span class="string">&#x27;yyyy-MM-dd&#x27;</span>&#125;) =&gt;</span><br><span class="line">      DateFormat(format).format(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 属性</span></span><br><span class="line">  <span class="built_in">int</span> <span class="keyword">get</span> nowTicket =&gt; <span class="keyword">this</span>.microsecondsSinceEpoch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  <span class="keyword">var</span> now = <span class="built_in">DateTime</span>.now();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(now.toDateString());</span><br><span class="line">  <span class="built_in">print</span>(now.nowTicket);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>我们给可以扩展类加个前缀 <code>Ex</code> 这样一看就知道是扩展</p></blockquote><h2 id="业务场景"><a href="#业务场景" class="headerlink" title="业务场景"></a>业务场景</h2><ul><li>功能函数</li></ul><p><img src="/assets/20220604162911.png" alt="20220604162911"></p><ul><li>视图组件</li></ul><p><img src="/assets/20220604163016.png" alt="20220604163016"></p>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-空安全 null safe</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E7%A9%BA%E5%AE%89%E5%85%A8null-safe/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E7%A9%BA%E5%AE%89%E5%85%A8null-safe/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="空安全"><a href="#空安全" class="headerlink" title="空安全"></a>空安全</h1><ul><li>减少数据异常错误</li><li>提高程序性能</li></ul><h2 id="默认不可空"><a href="#默认不可空" class="headerlink" title="默认不可空"></a>默认不可空</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> title = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="type-可空"><a href="#type-可空" class="headerlink" title="type? 可空"></a>type? 可空</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String?</span> title = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure><h2 id="value-值保证不为空，主观上"><a href="#value-值保证不为空，主观上" class="headerlink" title="value! 值保证不为空，主观上"></a>value! 值保证不为空，主观上</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String?</span> title = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="built_in">String</span> newTitle = title!;</span><br></pre></td></tr></table></figure><h2 id="value-不为空才执行"><a href="#value-不为空才执行" class="headerlink" title="value?. 不为空才执行"></a>value?. 不为空才执行</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String?</span> title = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="built_in">bool</span> isEmpty = title?.isEmpty();</span><br></pre></td></tr></table></figure><h2 id="value-如果空执行"><a href="#value-如果空执行" class="headerlink" title="value?? 如果空执行"></a>value?? 如果空执行</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String?</span> title = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="built_in">String</span> newTitle = title ?? <span class="string">&#x27;cat&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="late-声明"><a href="#late-声明" class="headerlink" title="late 声明"></a>late 声明</h2><p>延迟加载修饰符</p><p>声明一个不可空的变量，并在声明后初始化。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">late</span> <span class="built_in">String</span> description;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  description = <span class="string">&#x27;Feijoada!&#x27;</span>;</span><br><span class="line">  <span class="built_in">print</span>(description);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="late-类成员延迟初始"><a href="#late-类成员延迟初始" class="headerlink" title="late 类成员延迟初始"></a>late 类成员延迟初始</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WPHttpService</span> <span class="keyword">extends</span> <span class="title">GetxService</span> </span>&#123;</span><br><span class="line">  <span class="keyword">late</span> <span class="keyword">final</span> Dio _dio;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onInit() &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    _dio = Dio(options);</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><blockquote><p>加上 <code>late</code> 后就可以不用构造函数的时候初始化了</p></blockquote><h2 id="List、泛型"><a href="#List、泛型" class="headerlink" title="List、泛型"></a>List、泛型</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String?</span>&gt;? l;</span><br><span class="line">l = [];</span><br><span class="line">l.add(<span class="keyword">null</span>);</span><br><span class="line">l.add(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="built_in">print</span>(l);</span><br></pre></td></tr></table></figure><table><thead><tr><th>类型</th><th>集合是否可空</th><th>数据项是否可空</th></tr></thead><tbody><tr><td>List<String></td><td>no</td><td>no</td></tr><tr><td>List<String>?</td><td>yes</td><td>no</td></tr><tr><td>List&lt;String?&gt;</td><td>no</td><td>yes</td></tr><tr><td>List&lt;String?&gt;?</td><td>yes</td><td>yes</td></tr></tbody></table><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String?</span>&gt;? m;</span><br><span class="line">m = &#123;&#125;;</span><br><span class="line">m[<span class="string">&#x27;a&#x27;</span>] = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">m[<span class="string">&#x27;b&#x27;</span>] = <span class="keyword">null</span>;</span><br><span class="line"><span class="built_in">print</span>(m);</span><br></pre></td></tr></table></figure><table><thead><tr><th>类型</th><th>集合是否可空</th><th>数据项是否可空</th></tr></thead><tbody><tr><td>Map&lt;String, int&gt;</td><td>no</td><td>no*</td></tr><tr><td>Map&lt;String, int&gt;?</td><td>yes</td><td>no*</td></tr><tr><td>Map&lt;String, int?&gt;</td><td>no</td><td>yes</td></tr><tr><td>Map&lt;String, int?&gt;?</td><td>yes</td><td>yes</td></tr></tbody></table><blockquote><p><code>*</code> 可能返回空</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-类型定义 typedef</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89typedef/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89typedef/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="类型定义-typedef"><a href="#类型定义-typedef" class="headerlink" title="类型定义 typedef"></a>类型定义 typedef</h1><ul><li>显示这个函数的输入输出</li><li>简化常用函数、类型定义</li></ul><h2 id="typedef-定义使用"><a href="#typedef-定义使用" class="headerlink" title="typedef 定义使用"></a>typedef 定义使用</h2><ul><li>采用 <code>typedef</code></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> MyPrint = <span class="keyword">void</span> <span class="built_in">Function</span>(<span class="built_in">String</span> val);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrintClass</span> </span>&#123;</span><br><span class="line">  MyPrint <span class="built_in">print</span>;</span><br><span class="line">  PrintClass(<span class="keyword">this</span>.<span class="built_in">print</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  PrintClass coll = PrintClass((<span class="built_in">String</span> val) =&gt; <span class="built_in">print</span>(val));</span><br><span class="line">  coll.<span class="built_in">print</span>(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hello world</span><br></pre></td></tr></table></figure><h2 id="未采用-typedef"><a href="#未采用-typedef" class="headerlink" title="未采用 typedef"></a>未采用 typedef</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrintClass</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="built_in">Function</span>(<span class="built_in">String</span> val) <span class="built_in">print</span>;</span><br><span class="line">  PrintClass(<span class="keyword">this</span>.<span class="built_in">print</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  PrintClass coll = PrintClass((<span class="built_in">String</span> val) =&gt; <span class="built_in">print</span>(val));</span><br><span class="line">  coll.<span class="built_in">print</span>(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hello world</span><br></pre></td></tr></table></figure><h2 id="简化常用类型定义"><a href="#简化常用类型定义" class="headerlink" title="简化常用类型定义"></a>简化常用类型定义</h2><ul><li>定义</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> MapStringAny = <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt;;</span><br><span class="line"><span class="keyword">typedef</span> MapAnyString = <span class="built_in">Map</span>&lt;<span class="built_in">dynamic</span>, <span class="built_in">String</span>&gt;;</span><br><span class="line"><span class="keyword">typedef</span> MapStringString = <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt;;</span><br><span class="line"><span class="keyword">typedef</span> MapStringDouble = <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">double</span>&gt;;</span><br><span class="line"><span class="keyword">typedef</span> MapDoubleString = <span class="built_in">Map</span>&lt;<span class="built_in">double</span>, <span class="built_in">String</span>&gt;;</span><br><span class="line"><span class="keyword">typedef</span> MapDoubleDouble = <span class="built_in">Map</span>&lt;<span class="built_in">double</span>, <span class="built_in">double</span>&gt;;</span><br><span class="line"><span class="keyword">typedef</span> MapIntInt = <span class="built_in">Map</span>&lt;<span class="built_in">int</span>, <span class="built_in">int</span>&gt;;</span><br><span class="line"><span class="keyword">typedef</span> MapIntDouble = <span class="built_in">Map</span>&lt;<span class="built_in">int</span>, <span class="built_in">double</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> ListString = <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;;</span><br><span class="line"><span class="keyword">typedef</span> ListInt = <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt;;</span><br><span class="line"><span class="keyword">typedef</span> ListDouble = <span class="built_in">List</span>&lt;<span class="built_in">double</span>&gt;;</span><br><span class="line"><span class="keyword">typedef</span> ListAny = <span class="built_in">List</span>&lt;<span class="built_in">dynamic</span>&gt;;</span><br></pre></td></tr></table></figure><ul><li>使用</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  ListString p = [];</span><br><span class="line">  p.add(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">  p.add(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line">  p.add(<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  MapStringAny m = &#123;&#125;;</span><br><span class="line">  m[<span class="string">&#x27;a&#x27;</span>] = <span class="number">1</span>;</span><br><span class="line">  m[<span class="string">&#x27;b&#x27;</span>] = <span class="number">2</span>;</span><br><span class="line">  m[<span class="string">&#x27;c&#x27;</span>] = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-生成器 generate</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E7%94%9F%E6%88%90%E5%99%A8generate/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E7%94%9F%E6%88%90%E5%99%A8generate/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="生成器-generate"><a href="#生成器-generate" class="headerlink" title="生成器 generate"></a>生成器 generate</h1><h2 id="同步生成器"><a href="#同步生成器" class="headerlink" title="同步生成器"></a>同步生成器</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; naturalsTo(<span class="built_in">int</span> n) <span class="keyword">sync</span>* &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;start&#x27;</span>);</span><br><span class="line">  <span class="built_in">int</span> k = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (k &lt; n) &#123;</span><br><span class="line">    <span class="keyword">yield</span> k++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;end&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> it = naturalsTo(<span class="number">5</span>).iterator;</span><br><span class="line">  <span class="keyword">while</span> (it.moveNext()) &#123;</span><br><span class="line">    <span class="built_in">print</span>(it.current);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line">end</span><br></pre></td></tr></table></figure><blockquote><p>yield 会等待 <code>moveNext</code> 指令</p></blockquote><h2 id="异步生成器"><a href="#异步生成器" class="headerlink" title="异步生成器"></a>异步生成器</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:async&#x27;</span>;</span><br><span class="line"></span><br><span class="line">Stream&lt;<span class="built_in">int</span>&gt; asynchronousNaturalsTo(<span class="built_in">int</span> n) <span class="keyword">async</span>* &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;start&#x27;</span>);</span><br><span class="line">  <span class="built_in">int</span> k = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (k &lt; n) &#123;</span><br><span class="line">    <span class="keyword">yield</span> k++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;end&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// 流监听</span></span><br><span class="line">  <span class="comment">// asynchronousNaturalsTo(5).listen((onData) &#123;</span></span><br><span class="line">  <span class="comment">//   print(onData);</span></span><br><span class="line">  <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 流监听 StreamSubscription 对象</span></span><br><span class="line">  StreamSubscription subscription = asynchronousNaturalsTo(<span class="number">5</span>).listen(<span class="keyword">null</span>);</span><br><span class="line">  subscription.onData((value) &#123;</span><br><span class="line">    <span class="built_in">print</span>(value);</span><br><span class="line">    <span class="comment">// subscription.pause();</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line">end</span><br></pre></td></tr></table></figure><blockquote><p>以流的方式一次性推送</p><p><code>StreamSubscription</code> 对象进行流监听控制</p></blockquote><h2 id="递归生成器"><a href="#递归生成器" class="headerlink" title="递归生成器"></a>递归生成器</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; naturalsDownFrom(<span class="built_in">int</span> n) <span class="keyword">sync</span>* &#123;</span><br><span class="line">  <span class="keyword">if</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> n;</span><br><span class="line">    <span class="keyword">yield</span>* naturalsDownFrom(n - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> it = naturalsDownFrom(<span class="number">5</span>).iterator;</span><br><span class="line">  <span class="keyword">while</span> (it.moveNext()) &#123;</span><br><span class="line">    <span class="built_in">print</span>(it.current);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><blockquote><p><code>yield*</code> 以指针的方式传递递归对象，而不是整个同步对象</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-进阶使用-异步 async</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8-%E5%BC%82%E6%AD%A5async/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8-%E5%BC%82%E6%AD%A5async/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="异步-async"><a href="#异步-async" class="headerlink" title="异步 async"></a>异步 async</h1><h2 id="异步回调-then"><a href="#异步回调-then" class="headerlink" title="异步回调 then"></a>异步回调 then</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  Dio dio = Dio();</span><br><span class="line">  dio.<span class="keyword">get</span>(<span class="string">&quot;https://wpapi.ducafecat.tech/products/categories&quot;</span>).then((response) &#123;</span><br><span class="line">    <span class="built_in">print</span>(response.data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[&#123;id: <span class="number">34</span>, name: Bag, slug: bag, parent: <span class="number">0</span>, description: ...</span><br></pre></td></tr></table></figure><blockquote><p><code>then</code> 的方式异步回调</p></blockquote><h2 id="异步等待-await"><a href="#异步等待-await" class="headerlink" title="异步等待 await"></a>异步等待 await</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  Dio dio = Dio();</span><br><span class="line">  Response&lt;<span class="built_in">String</span>&gt; response =</span><br><span class="line">      <span class="keyword">await</span> dio.<span class="keyword">get</span>(<span class="string">&quot;https://wpapi.ducafecat.tech/products/categories&quot;</span>);</span><br><span class="line">  <span class="built_in">print</span>(response.data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[&#123;id: <span class="number">34</span>, name: Bag, slug: bag, parent: <span class="number">0</span>, description: ...</span><br></pre></td></tr></table></figure><blockquote><p><code>async</code> 写在函数定义 <code>await</code> 写在异步请求头</p></blockquote><h2 id="异步返回值"><a href="#异步返回值" class="headerlink" title="异步返回值"></a>异步返回值</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line">Future&lt;<span class="built_in">String?</span>&gt; getUrl(<span class="built_in">String</span> url) <span class="keyword">async</span> &#123;</span><br><span class="line">  Dio dio = Dio();</span><br><span class="line">  Response&lt;<span class="built_in">String</span>&gt; response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(url);</span><br><span class="line">  <span class="keyword">return</span> response.data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> content =</span><br><span class="line">      <span class="keyword">await</span> getUrl(<span class="string">&#x27;https://wpapi.ducafecat.tech/products/categories&#x27;</span>);</span><br><span class="line">  <span class="built_in">print</span>(content);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[&#123;id: <span class="number">34</span>, name: Bag, slug: bag, parent: <span class="number">0</span>, description: ...</span><br></pre></td></tr></table></figure><blockquote><p>定义 <code>Future&lt;T&gt;</code> 返回对象</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-进阶使用-泛型 generices</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8-%E6%B3%9B%E5%9E%8Bgenerices/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8-%E6%B3%9B%E5%9E%8Bgenerices/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="泛型-generics"><a href="#泛型-generics" class="headerlink" title="泛型 generics"></a>泛型 generics</h1><h2 id="泛型使用"><a href="#泛型使用" class="headerlink" title="泛型使用"></a>泛型使用</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> l = &lt;<span class="built_in">String</span>&gt;[];</span><br><span class="line">  l.add(<span class="string">&#x27;aaa&#x27;</span>);</span><br><span class="line">  l.add(<span class="string">&#x27;bbb&#x27;</span>);</span><br><span class="line">  l.add(<span class="string">&#x27;ccc&#x27;</span>);</span><br><span class="line">  <span class="built_in">print</span>(l);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> m = &lt;<span class="built_in">int</span>, <span class="built_in">String</span>&gt;&#123;&#125;;</span><br><span class="line">  m[<span class="number">1</span>] = <span class="string">&#x27;aaaa&#x27;</span>;</span><br><span class="line">  m[<span class="number">2</span>] = <span class="string">&#x27;bbbb&#x27;</span>;</span><br><span class="line">  m[<span class="number">3</span>] = <span class="string">&#x27;cccc&#x27;</span>;</span><br><span class="line">  <span class="built_in">print</span>(m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[aaa, bbb, ccc]</span><br><span class="line">&#123;<span class="number">1</span>: aaaa, <span class="number">2</span>: bbbb, <span class="number">3</span>: cccc&#125;</span><br></pre></td></tr></table></figure><blockquote><p>容器对象，在创建对象时都可以定义泛型类型。</p></blockquote><h2 id="泛型函数"><a href="#泛型函数" class="headerlink" title="泛型函数"></a>泛型函数</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">K addCache&lt;K, V&gt;(K key, V val) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$key</span> -&gt; <span class="subst">$val</span>&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> key = addCache(<span class="string">&#x27;url&#x27;</span>, <span class="string">&#x27;https://wiki.doucafecat.tech&#x27;</span>);</span><br><span class="line">  <span class="built_in">print</span>(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">url -&gt; https:<span class="comment">//wiki.doucafecat.tech</span></span><br><span class="line">https:<span class="comment">//wiki.doucafecat.tech</span></span><br></pre></td></tr></table></figure><h2 id="构造函数泛型"><a href="#构造函数泛型" class="headerlink" title="构造函数泛型"></a>构造函数泛型</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> T mobileNumber;</span><br><span class="line">  Phone(<span class="keyword">this</span>.mobileNumber);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = Phone&lt;<span class="built_in">String</span>&gt;(<span class="string">&#x27;ducafecat&#x27;</span>);</span><br><span class="line">  <span class="built_in">print</span>(p.mobileNumber);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ducafecat</span><br></pre></td></tr></table></figure><blockquote><p>这是大多数情况下使用泛型的场景，在一个类的构造函数中</p></blockquote><h2 id="泛型限制"><a href="#泛型限制" class="headerlink" title="泛型限制"></a>泛型限制</h2><ul><li>定义</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Android Phone 开机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">AndroidPhone</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> T mobile;</span><br><span class="line">  Phone(<span class="keyword">this</span>.mobile);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>实例</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> ad = AndroidPhone();</span><br><span class="line">  <span class="keyword">var</span> p = Phone&lt;AndroidPhone&gt;(ad);</span><br><span class="line">  p.mobile.startup();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Android Phone 开机</span><br></pre></td></tr></table></figure><blockquote><p>通过 extends 关键字 可以限定你可以泛型使用的类型</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-库类接口继承-库 lib</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E5%BA%93lib/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E5%BA%93lib/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="库-lib"><a href="#库-lib" class="headerlink" title="库 lib"></a>库 lib</h1><h2 id="导入核心库"><a href="#导入核心库" class="headerlink" title="导入核心库"></a>导入核心库</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:io&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> f = <span class="keyword">new</span> File(<span class="string">&#x27;README.md&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> content = f.readAsStringSync();</span><br><span class="line">  <span class="built_in">print</span>(content);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Dart 语言学习示例</span><br></pre></td></tr></table></figure><h2 id="导入第三方库"><a href="#导入第三方库" class="headerlink" title="导入第三方库"></a>导入第三方库</h2><ul><li>编写 <code>pubspec.yaml</code></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">dio:</span> <span class="string">^4.0.6</span></span><br></pre></td></tr></table></figure><ul><li>执行拉取包命令</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">dart pub get</span></span><br></pre></td></tr></table></figure><ul><li>程序调用</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  Dio dio = Dio();</span><br><span class="line">  Response&lt;<span class="built_in">String</span>&gt; response =</span><br><span class="line">      <span class="keyword">await</span> dio.<span class="keyword">get</span>(<span class="string">&quot;https://wpapi.ducafecat.tech/products/categories&quot;</span>);</span><br><span class="line">  <span class="built_in">print</span>(response.data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[&#123;<span class="string">&quot;id&quot;</span>:<span class="number">34</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;Bag&quot;</span>,<span class="string">&quot;slug&quot;</span>:<span class="string">&quot;bag&quot;</span>,<span class="string">&quot;parent&quot;</span>:<span class="number">0</span>,<span class="string">&quot;description&quot;</span>:<span class="string">&quot; ......</span></span><br></pre></td></tr></table></figure><h2 id="导入自己的-git-仓库"><a href="#导入自己的-git-仓库" class="headerlink" title="导入自己的 git 仓库"></a>导入自己的 git 仓库</h2><ul><li>编写 <code>pubspec.yaml</code></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  uuid:</span><br><span class="line">    git:</span><br><span class="line">      url: https:<span class="comment">//github.com/Daegalus/dart-uuid</span></span><br><span class="line">      ref: master</span><br></pre></td></tr></table></figure><ul><li>执行拉取包命令</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dart pub <span class="keyword">get</span></span><br></pre></td></tr></table></figure><blockquote><p>从 master 分支拉取</p></blockquote><h2 id="导入类文件"><a href="#导入类文件" class="headerlink" title="导入类文件"></a>导入类文件</h2><ul><li>phone.dart</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Phone is calling...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Android</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> playStore() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Google play store&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Android phone is calling...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ios</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> appleStore() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Apply store&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Ios phone is calling...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>实例</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dart_learn/phone.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = Phone();</span><br><span class="line">  p.call();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Phone <span class="keyword">is</span> calling...</span><br></pre></td></tr></table></figure><h2 id="前缀-amp-别名"><a href="#前缀-amp-别名" class="headerlink" title="前缀&amp;别名"></a>前缀&amp;别名</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dart_learn/phone.dart&#x27;</span> <span class="keyword">as</span> pp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = pp.Android();</span><br><span class="line">  p.call();</span><br><span class="line">  p.playStore();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Android phone <span class="keyword">is</span> calling...</span><br><span class="line">Google play store</span><br></pre></td></tr></table></figure><h2 id="筛选包内容"><a href="#筛选包内容" class="headerlink" title="筛选包内容"></a>筛选包内容</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dart_learn/phone.dart&#x27;</span> <span class="keyword">show</span> Ios;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = Ios();</span><br><span class="line">  p.call();</span><br><span class="line">  p.appleStore();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Ios phone <span class="keyword">is</span> calling...</span><br><span class="line">Apply store</span><br></pre></td></tr></table></figure><blockquote><p><code>hide</code> 筛掉某几个包 <code>show</code> 只使用某几个包</p></blockquote><h2 id="延迟载入"><a href="#延迟载入" class="headerlink" title="延迟载入"></a>延迟载入</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dart_learn/phone.dart&#x27;</span> <span class="keyword">deferred</span> <span class="keyword">as</span> pp;</span><br><span class="line"></span><br><span class="line">Future&lt;<span class="keyword">void</span>&gt; main() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> pp.loadLibrary();</span><br><span class="line">  <span class="keyword">var</span> p = pp.Android();</span><br><span class="line">  p.call();</span><br><span class="line">  p.playStore();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Android phone <span class="keyword">is</span> calling...</span><br><span class="line">Google play store</span><br></pre></td></tr></table></figure><blockquote><p><code>loadLibrary()</code> 方式在需要的时候载入包 可提高程序启动速度 用在不常使用的功能 用在载入时间过长的包</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-库类接口继承-多继承 with</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E5%A4%9A%E7%BB%A7%E6%89%BFwith/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E5%A4%9A%E7%BB%A7%E6%89%BFwith/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="多继承"><a href="#多继承" class="headerlink" title="多继承"></a>多继承</h1><h2 id="多继承-with"><a href="#多继承-with" class="headerlink" title="多继承 with"></a>多继承 with</h2><ul><li>定义类</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Phone is calling...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Android</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> playStore() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Google play store&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ios</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> appleStore() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Apply store&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>with 混入</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Xiaomi</span> <span class="title">with</span> <span class="title">Phone</span>, <span class="title">Android</span>, <span class="title">Ios</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>采用 <code>with ... , .... , ...</code> 方式 mixin 入多个类功能</p></blockquote><ul><li>执行</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = Xiaomi();</span><br><span class="line">  p.call();</span><br><span class="line">  p.playStore();</span><br><span class="line">  p.appleStore();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Phone <span class="keyword">is</span> calling...</span><br><span class="line">Google play store</span><br><span class="line">Apply store</span><br></pre></td></tr></table></figure><h2 id="函数重名冲突"><a href="#函数重名冲突" class="headerlink" title="函数重名冲突"></a>函数重名冲突</h2><ul><li>Android Ios 加入 call 函数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Android</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> playStore() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Google play store&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Android phone is calling...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ios</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> appleStore() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Apply store&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Ios phone is calling...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>执行</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = Xiaomi();</span><br><span class="line">  p.call();</span><br><span class="line">  p.playStore();</span><br><span class="line">  p.appleStore();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Ios phone <span class="keyword">is</span> calling...</span><br><span class="line">Google play store</span><br><span class="line">Apply store</span><br></pre></td></tr></table></figure><blockquote><p>可以发现后面的覆盖了前面的内容</p></blockquote><h2 id="mixin-不能构造函数"><a href="#mixin-不能构造函数" class="headerlink" title="mixin 不能构造函数"></a>mixin 不能构造函数</h2><ul><li>加入构造函数</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Android</span> </span>&#123;</span><br><span class="line">  Android();</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">The <span class="class"><span class="keyword">class</span> &#x27;<span class="title">Android</span>&#x27; <span class="title">can</span>&#x27;<span class="title">t</span> <span class="title">be</span> <span class="title">used</span> <span class="title">as</span> <span class="title">a</span> <span class="title">mixin</span> <span class="title">because</span> <span class="title">it</span> <span class="title">declares</span> <span class="title">a</span> <span class="title">constructor</span>.</span></span><br></pre></td></tr></table></figure><ul><li>加入 mixin 关键字 限定</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mixin</span> Android &#123;</span><br><span class="line">  <span class="comment">// mixin 中不能定义 constructor</span></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="mixin-on-限定条件"><a href="#mixin-on-限定条件" class="headerlink" title="mixin on 限定条件"></a>mixin on 限定条件</h2><ul><li>关键字 on 限定 Phone</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mixin</span> Android <span class="keyword">on</span> Phone &#123;</span><br><span class="line">  <span class="keyword">void</span> playStore() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Google play store&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="keyword">super</span>.call();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Android phone is calling...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>with 混入时候，必须先 Phone 才行</li></ul><p>错误</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Xiaomi</span> <span class="title">with</span> <span class="title">Android</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;Android&#x27;</span> can<span class="string">&#x27;t be mixed onto &#x27;</span><span class="built_in">Object</span><span class="string">&#x27; because &#x27;</span><span class="built_in">Object</span><span class="string">&#x27; doesn&#x27;</span>t implement <span class="string">&#x27;Phone&#x27;</span>.</span><br><span class="line">Try extending the <span class="class"><span class="keyword">class</span> &#x27;<span class="title">Android</span>&#x27;.</span></span><br></pre></td></tr></table></figure><p>正确</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Xiaomi</span> <span class="title">with</span> <span class="title">Phone</span>,<span class="title">Android</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-库类接口继承-工厂函数 factory</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E5%B7%A5%E5%8E%82%E5%87%BD%E6%95%B0factory/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E5%B7%A5%E5%8E%82%E5%87%BD%E6%95%B0factory/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="工厂函数"><a href="#工厂函数" class="headerlink" title="工厂函数"></a>工厂函数</h1><h2 id="调用子类"><a href="#调用子类" class="headerlink" title="调用子类"></a>调用子类</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> call();</span><br><span class="line">  <span class="keyword">factory</span> Phone(<span class="built_in">String</span> type) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;android&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> Android();</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;ios&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> Ios();</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">&quot;The &#x27;<span class="subst">$type</span>&#x27; is not an animal&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Android</span> <span class="keyword">implements</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Android Calling...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ios</span> <span class="keyword">implements</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Ios Calling...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> android = Phone(<span class="string">&#x27;android&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> ios = Phone(<span class="string">&#x27;ios&#x27;</span>);</span><br><span class="line">  android.call();</span><br><span class="line">  ios.call();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> Phone _single = Phone._internal();</span><br><span class="line">  Phone._internal();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> Phone() &#123;</span><br><span class="line">    <span class="keyword">return</span> _single;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Calling...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p1 = Phone();</span><br><span class="line">  <span class="keyword">var</span> p2 = Phone();</span><br><span class="line">  <span class="built_in">print</span>(identical(p1, p2));</span><br><span class="line"></span><br><span class="line">  Phone().call();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="减少重复实例对象"><a href="#减少重复实例对象" class="headerlink" title="减少重复实例对象"></a>减少重复实例对象</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _number;</span><br><span class="line">  Phone(<span class="keyword">this</span>._number);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> Phone.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) =&gt;</span><br><span class="line">      Phone(json[<span class="string">&#x27;number&#x27;</span>] <span class="keyword">as</span> <span class="built_in">int</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> call() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Calling <span class="subst">$_number</span>...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = Phone.fromJson(&#123;<span class="string">&quot;number&quot;</span>: <span class="number">911</span>&#125;);</span><br><span class="line">  p.call();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>如果不用工厂函数，就要用类静态方法，这样会有多余的实例对象</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-库类接口继承-继承 extend</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E7%BB%A7%E6%89%BFextend/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E7%BB%A7%E6%89%BFextend/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><h2 id="实现继承"><a href="#实现继承" class="headerlink" title="实现继承"></a>实现继承</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;开机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;关机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone();</span><br><span class="line">  p.startup();</span><br><span class="line">  p.shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">开机</span><br><span class="line">关机</span><br></pre></td></tr></table></figure><h2 id="父类调用"><a href="#父类调用" class="headerlink" title="父类调用"></a>父类调用</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;开机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;关机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="keyword">super</span>.startup();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;AndroidPhone 开机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone();</span><br><span class="line">  p.startup();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">开机</span><br><span class="line">AndroidPhone 开机</span><br></pre></td></tr></table></figure><blockquote><p>super 对象可以访问父类</p></blockquote><h2 id="调用父类构造"><a href="#调用父类构造" class="headerlink" title="调用父类构造"></a>调用父类构造</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mobile</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> number;</span><br><span class="line">  Mobile(<span class="keyword">this</span>.number);</span><br><span class="line">  <span class="keyword">void</span> showNumber() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;010-<span class="subst">$number</span>&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Mobile</span> </span>&#123;</span><br><span class="line">  AndroidPhone(<span class="built_in">int</span> number) : <span class="keyword">super</span>(number);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone(<span class="number">12345678</span>);</span><br><span class="line">  p.showNumber();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">010</span><span class="number">-12345678</span></span><br></pre></td></tr></table></figure><blockquote><p>可调用父类的 构造函数</p></blockquote><h2 id="重写超类函数"><a href="#重写超类函数" class="headerlink" title="重写超类函数"></a>重写超类函数</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mobile</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> number;</span><br><span class="line">  Mobile(<span class="keyword">this</span>.number);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">Mobile</span> </span>&#123;</span><br><span class="line">  AndroidPhone(<span class="built_in">int</span> number) : <span class="keyword">super</span>(number);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> noSuchMethod(Invocation mirror) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;被重写 noSuchMethod&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="built_in">dynamic</span> p = AndroidPhone(<span class="number">12345678</span>);</span><br><span class="line">  p.showNumber111();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">被重写 noSuchMethod</span><br></pre></td></tr></table></figure><blockquote><p>在重写的函数上加修饰符 <code>@override</code></p></blockquote><h2 id="继承抽象类的问题"><a href="#继承抽象类的问题" class="headerlink" title="继承抽象类的问题"></a>继承抽象类的问题</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">IPhone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;开机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">extends</span> <span class="title">IPhone</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="keyword">super</span>.startup();</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;AndroidPhone 开机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;AndroidPhone 关机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone();</span><br><span class="line">  p.startup();</span><br><span class="line">  p.shutdown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">开机</span><br><span class="line">AndroidPhone 开机</span><br><span class="line">AndroidPhone 关机</span><br></pre></td></tr></table></figure><blockquote><p>抽象类中只定义抽象函数，实例化访问会报错</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-库类接口继承-接口 interface</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E6%8E%A5%E5%8F%A3interface/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E6%8E%A5%E5%8F%A3interface/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h1><ul><li>Dart 没有接口</li></ul><p><a href="https://dart.dev/samples#interfaces-and-abstract-classes">https://dart.dev/samples#interfaces-and-abstract-classes</a></p><h2 id="接口方式使用"><a href="#接口方式使用" class="headerlink" title="接口方式使用"></a>接口方式使用</h2><ul><li>定义人抽象类</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">IPerson</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line">  <span class="built_in">int</span> age;</span><br><span class="line"></span><br><span class="line">  IPerson(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> info() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Name: <span class="subst">$name</span>, Age: <span class="subst">$age</span>&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>接口用途的抽象类 请用字母 <code>I</code> 开头 , 如 <code>IPhone</code></p></blockquote><ul><li>老师</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">implements</span> <span class="title">IPerson</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">int</span> age;</span><br><span class="line"></span><br><span class="line">  Teacher(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> info() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Teacher -&gt; Name: <span class="subst">$name</span>, Age: <span class="subst">$age</span>&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>学生</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">IPerson</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">int</span> age;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line"></span><br><span class="line">  Student(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> info() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Student -&gt; Name: <span class="subst">$name</span>, Age: <span class="subst">$age</span>&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>打印信息</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> makePersonInfo(IPerson user) =&gt; <span class="built_in">print</span>(user.info());</span><br></pre></td></tr></table></figure><ul><li>实例化</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> t = Teacher(<span class="string">&#x27;ducafecat&#x27;</span>, <span class="number">99</span>);</span><br><span class="line">  makePersonInfo(t);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> s = Student(<span class="string">&#x27;hans&#x27;</span>, <span class="number">66</span>);</span><br><span class="line">  makePersonInfo(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Teacher -&gt; Name: ducafecat, Age: <span class="number">99</span></span><br><span class="line">Student -&gt; Name: hans, Age: <span class="number">66</span></span><br></pre></td></tr></table></figure><h2 id="履行多接口"><a href="#履行多接口" class="headerlink" title="履行多接口"></a>履行多接口</h2><ul><li>定义学校抽象类</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ISchool</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> grade;</span><br><span class="line"></span><br><span class="line">  ISchool(<span class="keyword">this</span>.grade);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> schoolInfo() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Grade: <span class="subst">$grade</span>&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>学生 多继承</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">IPerson</span>, <span class="title">ISchool</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">int</span> age;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">int</span> grade;</span><br><span class="line"></span><br><span class="line">  Student(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age, <span class="keyword">this</span>.grade);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> info() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Student -&gt; Name: <span class="subst">$name</span>, Age: <span class="subst">$age</span>&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> schoolInfo() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;School -&gt; Name: <span class="subst">$name</span>, Age: <span class="subst">$age</span>, Grade: <span class="subst">$grade</span>&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>打印信息</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> makePersonInfo(IPerson user) =&gt; <span class="built_in">print</span>(user.info());</span><br><span class="line"><span class="keyword">void</span> makeSchoolInfo(ISchool user) =&gt; <span class="built_in">print</span>(user.schoolInfo());</span><br></pre></td></tr></table></figure><ul><li>实例化</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> t = Teacher(<span class="string">&#x27;ducafecat&#x27;</span>, <span class="number">99</span>);</span><br><span class="line">  makePersonInfo(t);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> s = Student(<span class="string">&#x27;hans&#x27;</span>, <span class="number">66</span>, <span class="number">5</span>);</span><br><span class="line">  makePersonInfo(s);</span><br><span class="line">  makeSchoolInfo(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Teacher -&gt; Name: ducafecat, Age: <span class="number">99</span></span><br><span class="line">Student -&gt; Name: hans, Age: <span class="number">66</span></span><br><span class="line">School -&gt; Name: hans, Age: <span class="number">66</span>, Grade: <span class="number">5</span></span><br></pre></td></tr></table></figure><h2 id="从一个普通类履行接口"><a href="#从一个普通类履行接口" class="headerlink" title="从一个普通类履行接口"></a>从一个普通类履行接口</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;开机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;关机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidPhone</span> <span class="keyword">implements</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> startup() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;AndroidPhone 开机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> shutdown() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;AndroidPhone 关机&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> p = AndroidPhone();</span><br><span class="line">  p.startup();</span><br><span class="line">  p.shutdown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Dart 可以从一个普通的类履行接口</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>库类接口继承-抽象 abstract</title>
      <link href="/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E6%8A%BD%E8%B1%A1abstract/"/>
      <url>/2022/09/03/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E6%8A%BD%E8%B1%A1abstract/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="抽象"><a href="#抽象" class="headerlink" title="抽象"></a>抽象</h1><h2 id="abstract-类、函数、成员"><a href="#abstract-类、函数、成员" class="headerlink" title="abstract 类、函数、成员"></a>abstract 类、函数、成员</h2><ul><li>普通类前加 abstract</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line">  <span class="keyword">void</span> printName() &#123;</span><br><span class="line">    <span class="built_in">print</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="不能直接-new-实例化"><a href="#不能直接-new-实例化" class="headerlink" title="不能直接 new 实例化"></a>不能直接 new 实例化</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = Person();</span><br><span class="line">p.printName();</span><br><span class="line"></span><br><span class="line">Abstract classes can<span class="string">&#x27;t be instantiated.</span></span><br><span class="line"><span class="string">Try creating an instance of a concrete subtype.</span></span><br></pre></td></tr></table></figure><h2 id="继承方式使用"><a href="#继承方式使用" class="headerlink" title="继承方式使用"></a>继承方式使用</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = Teacher();</span><br><span class="line">p.printName();</span><br><span class="line"></span><br><span class="line">ducafecat</span><br></pre></td></tr></table></figure><h2 id="接口方式使用"><a href="#接口方式使用" class="headerlink" title="接口方式使用"></a>接口方式使用</h2><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">void</span> printName();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line"></span><br><span class="line">  Teacher(<span class="keyword">this</span>.name);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> printName() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Teacher: <span class="subst">$name</span>&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = Teacher(<span class="string">&quot;ducafecat&quot;</span>);</span><br><span class="line">p.printName();</span><br><span class="line"></span><br><span class="line">ducafecat</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-库类接口继承-静态 static</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E9%9D%99%E6%80%81static/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E9%9D%99%E6%80%81static/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="static"><a href="#static" class="headerlink" title="static"></a>static</h1><h2 id="静态变量"><a href="#静态变量" class="headerlink" title="静态变量"></a>静态变量</h2><h3 id="static-定义"><a href="#static-定义" class="headerlink" title="static 定义"></a>static 定义</h3><p>声明</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> name = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用</p><p>静态变量可以通过外部直接访问,不需要将类实例化</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(People.name);</span><br><span class="line"></span><br><span class="line">ducafecat</span><br></pre></td></tr></table></figure><h3 id="函数内部访问"><a href="#函数内部访问" class="headerlink" title="函数内部访问"></a>函数内部访问</h3><p>实例化后的类也可以访问该静态变量</p><p>声明</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> name = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line">  <span class="keyword">void</span> <span class="keyword">show</span>() &#123;</span><br><span class="line">    <span class="built_in">print</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">People().<span class="keyword">show</span>();</span><br><span class="line"></span><br><span class="line">ducafecat</span><br></pre></td></tr></table></figure><h2 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h2><p>静态方法可以通过外部直接访问</p><p>声明</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> name = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> printName() &#123;</span><br><span class="line">    <span class="built_in">print</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">People.printName();</span><br><span class="line"></span><br><span class="line">ducafecat</span><br></pre></td></tr></table></figure><h2 id="业务场景"><a href="#业务场景" class="headerlink" title="业务场景"></a>业务场景</h2><p>EasyLoading 用大量的 static 来方便方法调用</p><p><img src="/assets/20220601095740.png" alt="20220601095740"></p>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-库类接口继承-类 get set</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E7%B1%BBget%E5%92%8Cset/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E7%B1%BBget%E5%92%8Cset/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="get-set"><a href="#get-set" class="headerlink" title="get set"></a>get set</h1><h2 id="定义、使用-get-set"><a href="#定义、使用-get-set" class="headerlink" title="定义、使用 get set"></a>定义、使用 get set</h2><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String?</span> _name;</span><br><span class="line"></span><br><span class="line">  People();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> name(<span class="built_in">String</span> value) &#123;</span><br><span class="line">    _name = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> name &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;people is <span class="subst">$_name</span>&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = People();</span><br><span class="line">p.name = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(p.name);</span><br><span class="line"></span><br><span class="line">people <span class="keyword">is</span> ducafecat</span><br></pre></td></tr></table></figure><h2 id="简化-get-set"><a href="#简化-get-set" class="headerlink" title="简化 get set"></a>简化 get set</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String?</span> _name;</span><br><span class="line"></span><br><span class="line">  People();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> name(<span class="built_in">String</span> value) =&gt; _name = value;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> name =&gt; <span class="string">&#x27;people is <span class="subst">$_name</span>&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="业务场景"><a href="#业务场景" class="headerlink" title="业务场景"></a>业务场景</h2><p>购物车</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// <span class="language-markdown">商品数量</span></span></span><br><span class="line"><span class="built_in">int</span> <span class="keyword">get</span> lineItemsCount =&gt; lineItems.length;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">运费</span></span></span><br><span class="line"><span class="built_in">double</span> <span class="keyword">get</span> shipping =&gt; <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">折扣</span></span></span><br><span class="line"><span class="built_in">double</span> <span class="keyword">get</span> discount =&gt;</span><br><span class="line">    lineCoupons.fold&lt;<span class="built_in">double</span>&gt;(<span class="number">0</span>, (<span class="built_in">double</span> previousValue, CouponsModel element) &#123;</span><br><span class="line">      <span class="keyword">return</span> previousValue + (<span class="built_in">double</span>.parse(element.amount ?? <span class="string">&quot;0&quot;</span>));</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">商品合计价格</span></span></span><br><span class="line"><span class="built_in">double</span> <span class="keyword">get</span> totalItemsPrice =&gt;</span><br><span class="line">    lineItems.fold&lt;<span class="built_in">double</span>&gt;(<span class="number">0</span>, (<span class="built_in">double</span> previousValue, LineItem element) &#123;</span><br><span class="line">      <span class="keyword">return</span> previousValue + <span class="built_in">double</span>.parse(element.total ?? <span class="string">&quot;0&quot;</span>);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><blockquote><p>以前可能会写个方法 <code>getXXX()</code> 当然也适用于赋值操作</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-库类接口继承-类 class</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E7%B1%BBclass/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%BA%93%E7%B1%BB%E6%8E%A5%E5%8F%A3%E7%BB%A7%E6%89%BF-%E7%B1%BBclass/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="类"><a href="#类" class="headerlink" title="类"></a>类</h1><h2 id="定义、使用类"><a href="#定义、使用类" class="headerlink" title="定义、使用类"></a>定义、使用类</h2><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = Point();</span><br></pre></td></tr></table></figure><h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x, y;</span><br><span class="line"></span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">$x</span>, <span class="subst">$y</span>&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = Point(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">print</span>(p);</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>, <span class="number">2</span></span><br></pre></td></tr></table></figure><h2 id="初始化列表"><a href="#初始化列表" class="headerlink" title="初始化列表"></a>初始化列表</h2><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x, y;</span><br><span class="line">  <span class="built_in">Map</span> origin1, origin2;</span><br><span class="line"></span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y)</span><br><span class="line">      : origin1 = &#123;<span class="string">&#x27;x&#x27;</span>: x, <span class="string">&#x27;y&#x27;</span>: y&#125;,</span><br><span class="line">        origin2 = &#123;<span class="string">&#x27;x&#x27;</span>: x + <span class="number">10</span>, <span class="string">&#x27;y&#x27;</span>: y + <span class="number">10</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = Point(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">  <span class="built_in">print</span>(p);</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>, <span class="number">2</span>, &#123;<span class="number">1</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="number">2</span>&#125;, &#123;<span class="number">1</span>: <span class="number">2</span>, <span class="number">2</span>: <span class="number">4</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="命名构造函数"><a href="#命名构造函数" class="headerlink" title="命名构造函数"></a>命名构造函数</h2><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x, y;</span><br><span class="line">  <span class="built_in">Map</span> origin1, origin2;</span><br><span class="line"></span><br><span class="line">  Point.fromJson(<span class="built_in">Map</span> json)</span><br><span class="line">      : x = json[<span class="string">&#x27;x&#x27;</span>],</span><br><span class="line">        y = json[<span class="string">&#x27;y&#x27;</span>],</span><br><span class="line">        origin1 = &#123;<span class="string">&#x27;x&#x27;</span>: json[<span class="string">&#x27;x&#x27;</span>], <span class="string">&#x27;y&#x27;</span>: json[<span class="string">&#x27;y&#x27;</span>]&#125;,</span><br><span class="line">        origin2 = &#123;<span class="string">&#x27;x&#x27;</span>: json[<span class="string">&#x27;x&#x27;</span>] + <span class="number">10</span>, <span class="string">&#x27;y&#x27;</span>: json[<span class="string">&#x27;y&#x27;</span>] + <span class="number">10</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = Point.fromJson(&#123;<span class="string">&quot;x&quot;</span>: <span class="number">1</span>, <span class="string">&quot;y&quot;</span>: <span class="number">2</span>&#125;);</span><br><span class="line"><span class="built_in">print</span>(p);</span><br><span class="line"></span><br><span class="line"><span class="number">10</span>, <span class="number">20</span>, &#123;x: <span class="number">10</span>, y: <span class="number">20</span>&#125;, &#123;x: <span class="number">20</span>, y: <span class="number">30</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="重定向构造函数"><a href="#重定向构造函数" class="headerlink" title="重定向构造函数"></a>重定向构造函数</h2><p>定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="built_in">num</span> x, y;</span><br><span class="line">  <span class="built_in">Map</span> origin1, origin2;</span><br><span class="line"></span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y)</span><br><span class="line">      : origin1 = &#123;<span class="string">&#x27;x&#x27;</span>: x, <span class="string">&#x27;y&#x27;</span>: y&#125;,</span><br><span class="line">        origin2 = &#123;<span class="string">&#x27;x&#x27;</span>: x + <span class="number">10</span>, <span class="string">&#x27;y&#x27;</span>: y + <span class="number">10</span>&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 重定向构造函数</span></span><br><span class="line">  Point.fromJson(<span class="built_in">Map</span> json) : <span class="keyword">this</span>(json[<span class="string">&#x27;x&#x27;</span>], json[<span class="string">&#x27;y&#x27;</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = Point.fromJson(&#123;<span class="string">&quot;x&quot;</span>: <span class="number">1</span>, <span class="string">&quot;y&quot;</span>: <span class="number">2</span>&#125;);</span><br><span class="line"><span class="built_in">print</span>(p);</span><br><span class="line"></span><br><span class="line"><span class="number">10</span>, <span class="number">20</span>, &#123;x: <span class="number">10</span>, y: <span class="number">20</span>&#125;, &#123;x: <span class="number">20</span>, y: <span class="number">30</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="callable"><a href="#callable" class="headerlink" title="callable"></a>callable</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IOSPhone</span> </span>&#123;</span><br><span class="line">  call(<span class="built_in">String</span> <span class="built_in">num</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;phone number is <span class="subst">$num</span>&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> phone = IOSPhone();</span><br><span class="line">  phone(<span class="string">&#x27;911&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">phone number <span class="keyword">is</span> <span class="number">911</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-注释函数表达式-错误处理 err</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E9%87%8A%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86err/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E9%87%8A%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86err/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h1><h2 id="错误的两种类型"><a href="#错误的两种类型" class="headerlink" title="错误的两种类型"></a>错误的两种类型</h2><h3 id="Exception-类"><a href="#Exception-类" class="headerlink" title="Exception 类"></a>Exception 类</h3><p><a href="https://api.dartlang.org/stable/2.17.1/dart-core/Exception-class.html">Exception class</a></p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>DeferredLoadException</td><td>延迟加载错误</td></tr><tr><td>FormatException</td><td>格式错误</td></tr><tr><td>IntegerDivisionByZeroException</td><td>整数除零错误</td></tr><tr><td>IOException</td><td>IO 错误</td></tr><tr><td>IsolateSpawnException</td><td>隔离产生错误</td></tr><tr><td>TimeoutException</td><td>超时错误</td></tr></tbody></table><blockquote><p>可以捕获，可以安全处理</p></blockquote><h3 id="Error-类"><a href="#Error-类" class="headerlink" title="Error 类"></a>Error 类</h3><p><a href="https://api.dartlang.org/stable/2.17.1/dart-core/Error-class.html">Error class</a></p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>AbstractClassInstantiationError</td><td>抽象类实例化错误</td></tr><tr><td>ArgumentError</td><td>参数错误</td></tr><tr><td>AssertionError</td><td>断言错误</td></tr><tr><td>AsyncError</td><td>异步错误</td></tr><tr><td>CastError</td><td>Cast 错误</td></tr><tr><td>ConcurrentModificationError</td><td>并发修改错误</td></tr><tr><td>CyclicInitializationError</td><td>周期初始错误</td></tr><tr><td>FallThroughError</td><td>Fall Through 错误</td></tr><tr><td>JsonUnsupportedObjectError</td><td>json 不支持错误</td></tr><tr><td>NoSuchMethodError</td><td>没有这个方法错误</td></tr><tr><td>NullThrownError</td><td>Null 错误错误</td></tr><tr><td>OutOfMemoryError</td><td>内存溢出错误</td></tr><tr><td>RemoteError</td><td>远程错误</td></tr><tr><td>StackOverflowError</td><td>堆栈溢出错误</td></tr><tr><td>StateError</td><td>状态错误</td></tr><tr><td>UnimplementedError</td><td>未实现的错误</td></tr><tr><td>UnsupportedError</td><td>不支持错误</td></tr></tbody></table><blockquote><p>一般用在不可恢复，容易崩溃的情况</p></blockquote><h2 id="抛出错误"><a href="#抛出错误" class="headerlink" title="抛出错误"></a>抛出错误</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Exception 对象</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> FormatException(<span class="string">&#x27;这是一个格式错误提示&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Error 对象</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 任意对象</span></span><br><span class="line"><span class="keyword">throw</span> <span class="string">&#x27;这是一个异常&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="捕获错误"><a href="#捕获错误" class="headerlink" title="捕获错误"></a>捕获错误</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// throw new FormatException(&#x27;这是一个格式错误提示&#x27;);</span></span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</span><br><span class="line">&#125; <span class="keyword">on</span> OutOfMemoryError &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;没有内存了&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">print</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="重新抛出错误"><a href="#重新抛出错误" class="headerlink" title="重新抛出错误"></a>重新抛出错误</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</span><br><span class="line">&#125; <span class="keyword">on</span> OutOfMemoryError &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;没有内存了&#x27;</span>);</span><br><span class="line">  <span class="keyword">rethrow</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">print</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Finally-执行"><a href="#Finally-执行" class="headerlink" title="Finally 执行"></a>Finally 执行</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</span><br><span class="line">&#125; <span class="keyword">on</span> OutOfMemoryError &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;没有内存了&#x27;</span>);</span><br><span class="line">  <span class="keyword">rethrow</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">print</span>(e);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;end&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DioError</span> <span class="keyword">implements</span> <span class="title">Exception</span> </span>&#123;</span><br><span class="line">  DioError(<span class="keyword">this</span>.message, <span class="keyword">this</span>.type);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> message;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> type;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;DioError&#123;message: <span class="subst">$message</span>, type: <span class="subst">$type</span>&#125;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">throw</span> DioError(<span class="string">&quot;error&quot;</span>, <span class="string">&quot;type&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-注释函数表达式-流程控制 flow</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E9%87%8A%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6flow/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E9%87%8A%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6flow/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h1><h2 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isPrint = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">if</span> (isPrint) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="for"><a href="#for" class="headerlink" title="for"></a>for</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">print</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="while"><a href="#while" class="headerlink" title="while"></a>while</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isDone = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">while</span>(!isDone) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;is not done&#x27;</span>);</span><br><span class="line">  isDone = <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="do-while"><a href="#do-while" class="headerlink" title="do while"></a>do while</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isRunning = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;is running&#x27;</span>);</span><br><span class="line">  isRunning = <span class="keyword">false</span>;</span><br><span class="line">&#125; <span class="keyword">while</span> (isRunning);</span><br></pre></td></tr></table></figure><h2 id="switch-case"><a href="#switch-case" class="headerlink" title="switch case"></a>switch case</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> name = <span class="string">&#x27;cat&#x27;</span>;</span><br><span class="line"><span class="keyword">switch</span> (name) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;cat&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;cat&#x27;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;not find&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="break"><a href="#break" class="headerlink" title="break"></a>break</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">num</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$&#123;i&#125;</span> - run&#x27;</span>);</span><br><span class="line">  i++;</span><br><span class="line">  <span class="keyword">if</span>(i == <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i &lt; <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="continue-指定位置"><a href="#continue-指定位置" class="headerlink" title="continue 指定位置"></a>continue 指定位置</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> command = <span class="string">&quot;close&quot;</span>;</span><br><span class="line"><span class="keyword">switch</span> (command) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;open&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;open&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;close&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;close&quot;</span>);</span><br><span class="line">    <span class="keyword">continue</span> doClear;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;close2&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;close2&quot;</span>);</span><br><span class="line">    <span class="keyword">continue</span> doClear;</span><br><span class="line"></span><br><span class="line">  doClear:</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;doClose&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;doClose&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;other&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-注释函数表达式-操作符 expr</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E9%87%8A%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E6%93%8D%E4%BD%9C%E7%AC%A6expr/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E9%87%8A%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E6%93%8D%E4%BD%9C%E7%AC%A6expr/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h1><h2 id="操作符表"><a href="#操作符表" class="headerlink" title="操作符表"></a>操作符表</h2><table><thead><tr><th>描述</th><th>操作符</th></tr></thead><tbody><tr><td>后缀操作</td><td>expr++ expr– () [] . ?.</td></tr><tr><td>前缀操作</td><td>-expr !expr ~expr ++expr –expr</td></tr><tr><td>乘除</td><td>* / % ~/</td></tr><tr><td>加减</td><td>+ -</td></tr><tr><td>位移</td><td>&lt;&lt; &gt;&gt;</td></tr><tr><td>按位与</td><td>&amp;</td></tr><tr><td>按位异或</td><td>^</td></tr><tr><td>按位或</td><td>|</td></tr><tr><td>类型操作</td><td>&gt;= &gt; &lt;= &lt; as is is!</td></tr><tr><td>相等</td><td>== !=</td></tr><tr><td>逻辑与</td><td>&amp;&amp;</td></tr><tr><td>逻辑或</td><td>||</td></tr><tr><td>是否为空</td><td>??</td></tr><tr><td>三目运算</td><td>expr1 ? expr2 : expr3</td></tr><tr><td>级联</td><td>..</td></tr><tr><td>赋值</td><td>= *= /= ~/= %= += -= &lt;&lt;= &gt;&gt;= &amp;= ^= |= ??=</td></tr></tbody></table><blockquote><p>优先级顺序 <code>上面左边</code> 优先级高于 <code>右边下面</code></p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(x == <span class="number">1</span> &amp;&amp; y == <span class="number">2</span>)&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="算术操作符"><a href="#算术操作符" class="headerlink" title="算术操作符"></a>算术操作符</h2><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>+</td><td>加号</td></tr><tr><td>–</td><td>减号</td></tr><tr><td>-expr</td><td>负号</td></tr><tr><td>*</td><td>乘号</td></tr><tr><td>/</td><td>除号</td></tr><tr><td>~/</td><td>除号，但是返回值为整数</td></tr><tr><td>%</td><td>取模</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">5</span>/<span class="number">2</span>);</span><br><span class="line"><span class="built_in">print</span>(<span class="number">5</span>~/<span class="number">2</span>);</span><br><span class="line"><span class="built_in">print</span>(<span class="number">5</span> % <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h2 id="相等相关的操作符"><a href="#相等相关的操作符" class="headerlink" title="相等相关的操作符"></a>相等相关的操作符</h2><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>==</td><td>相等</td></tr><tr><td>!=</td><td>不等</td></tr><tr><td>&gt;</td><td>大于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&gt;=</td><td>大于等于</td></tr><tr><td>&lt;=</td><td>小于等于</td></tr></tbody></table><h2 id="类型判定操作符"><a href="#类型判定操作符" class="headerlink" title="类型判定操作符"></a>类型判定操作符</h2><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>as</td><td>类型转换</td></tr><tr><td>is</td><td>如果对象是指定的类型返回 True</td></tr><tr><td>is!</td><td>如果对象是指定的类型返回 False</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">String</span> b = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="built_in">String</span> c = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">as</span> <span class="built_in">Object</span>);</span><br><span class="line"><span class="built_in">print</span>(b <span class="keyword">is</span> <span class="built_in">String</span>);</span><br><span class="line"><span class="built_in">print</span>(c <span class="keyword">is</span>! <span class="built_in">String</span>);</span><br></pre></td></tr></table></figure><h2 id="条件表达式"><a href="#条件表达式" class="headerlink" title="条件表达式"></a>条件表达式</h2><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>condition ? expr1 : expr2</td><td>如果 condition 是 true，执行 expr1 (并返回执行的结果)； 否则执行 expr2 并返回其结果。</td></tr><tr><td>expr1 ?? expr2</td><td>如果 expr1 是 non-null，返回其值； 否则执行 expr2 并返回其结果。</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isFinish = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">String</span> txtVal = isFinish ? <span class="string">&#x27;yes&#x27;</span> : <span class="string">&#x27;no&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> isFinish;</span><br><span class="line">isFinish = isFinish ?? <span class="keyword">false</span>;</span><br><span class="line">or</span><br><span class="line">isFinish ??= <span class="keyword">false</span>;</span><br></pre></td></tr></table></figure><h2 id="位和移位操作符"><a href="#位和移位操作符" class="headerlink" title="位和移位操作符"></a>位和移位操作符</h2><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>&amp;</td><td>逻辑与</td></tr><tr><td>|</td><td>逻辑或</td></tr><tr><td>^</td><td>逻辑异或</td></tr><tr><td>~expr</td><td>取反</td></tr><tr><td>&lt;&lt;</td><td>左移</td></tr><tr><td>&gt;&gt;</td><td>右移</td></tr></tbody></table><h2 id="级联操作符"><a href="#级联操作符" class="headerlink" title="级联操作符"></a>级联操作符</h2><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>..</td><td>可以在同一个对象上 连续调用多个函数以及访问成员变量。</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">StringBuffer</span> sb = <span class="built_in">StringBuffer</span>();</span><br><span class="line">sb</span><br><span class="line">..write(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">..write(<span class="string">&#x27;word&#x27;</span>)</span><br><span class="line">..write(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">..writeln(<span class="string">&#x27;doucafecat&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="其他操作符"><a href="#其他操作符" class="headerlink" title="其他操作符"></a>其他操作符</h2><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>()</td><td>使用方法 代表调用一个方法</td></tr><tr><td>[]</td><td>访问 List 访问 list 中特定位置的元素</td></tr><tr><td>.</td><td>访问 Member 访问元素，例如 foo.bar 代表访问 foo 的 bar 成员</td></tr><tr><td>?.</td><td>条件成员访问 和 . 类似，但是左边的操作对象不能为 null，例如 foo?.bar 如果 foo 为 null 则返回 null，否则返回 bar 成员</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> a;</span><br><span class="line"><span class="built_in">print</span>(a?.length);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-注释函数表达式-函数 Function</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E9%87%8A%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E5%87%BD%E6%95%B0Function/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E9%87%8A%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E5%87%BD%E6%95%B0Function/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> add(<span class="built_in">int</span> x) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line">add(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h2 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数"></a>可选参数</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> add(<span class="built_in">int</span> x, [<span class="built_in">int?</span> y, <span class="built_in">int?</span> z]) &#123;</span><br><span class="line">  <span class="keyword">if</span> (y == <span class="keyword">null</span>) &#123;</span><br><span class="line">    y = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (z == <span class="keyword">null</span>) &#123;</span><br><span class="line">    z = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> x + y + z;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h2 id="可选参数-默认值"><a href="#可选参数-默认值" class="headerlink" title="可选参数 默认值"></a>可选参数 默认值</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> add(<span class="built_in">int</span> x, [<span class="built_in">int</span> y = <span class="number">1</span>, <span class="built_in">int</span> z = <span class="number">2</span>]) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line"><span class="built_in">int</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h2 id="命名参数-默认值"><a href="#命名参数-默认值" class="headerlink" title="命名参数 默认值"></a>命名参数 默认值</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> add(&#123;<span class="built_in">int</span> x = <span class="number">1</span>, <span class="built_in">int</span> y = <span class="number">1</span>, <span class="built_in">int</span> z = <span class="number">1</span>&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y + z;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line"><span class="built_in">int</span>(x: <span class="number">1</span>, y: <span class="number">2</span>);</span><br></pre></td></tr></table></figure><h2 id="函数内定义"><a href="#函数内定义" class="headerlink" title="函数内定义"></a>函数内定义</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">  <span class="built_in">int</span> add(<span class="built_in">int</span> x)&#123;</span><br><span class="line">    <span class="keyword">return</span> x + x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">print</span>(add(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Funcation-返回函数对象"><a href="#Funcation-返回函数对象" class="headerlink" title="Funcation 返回函数对象"></a>Funcation 返回函数对象</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span> makeAdd(<span class="built_in">int</span> x) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="built_in">int</span> y) =&gt; x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">调用</span><br><span class="line"><span class="keyword">var</span> add = makeAdd(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">5</span>));</span><br></pre></td></tr></table></figure><h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><p>下面代码定义了只有一个参数 item 且没有参数类型的匿名方法。 List 中的每个元素都会调用这个函数，打印元素位置和值的字符串：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="string">&#x27;apples&#x27;</span>, <span class="string">&#x27;bananas&#x27;</span>, <span class="string">&#x27;oranges&#x27;</span>];</span><br><span class="line">list.forEach((item) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$&#123;list.indexOf(item)&#125;</span>: <span class="subst">$item</span>&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>箭头函数 如果只有一个表达式</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list.forEach((item) =&gt; <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$&#123;list.indexOf(item)&#125;</span>: <span class="subst">$item</span>&#x27;</span>));</span><br></pre></td></tr></table></figure><h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p>下面是一个嵌套函数中变量在多个作用域中的示例：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> topLevel = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> insideMain = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> myFunction() &#123;</span><br><span class="line">    <span class="keyword">var</span> insideFunction = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> nestedFunction() &#123;</span><br><span class="line">      <span class="keyword">var</span> insideNestedFunction = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">assert</span>(topLevel);</span><br><span class="line">      <span class="keyword">assert</span>(insideMain);</span><br><span class="line">      <span class="keyword">assert</span>(insideFunction);</span><br><span class="line">      <span class="keyword">assert</span>(insideNestedFunction);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-注释函数表达式-注释 comments</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E9%87%8A%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E6%B3%A8%E9%87%8Acomments/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E9%87%8A%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E6%B3%A8%E9%87%8Acomments/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><h2 id="单行注释"><a href="#单行注释" class="headerlink" title="单行注释"></a>单行注释</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Symbol libraryName = new Symbol(&#x27;dart.core&#x27;);</span></span><br></pre></td></tr></table></figure><h2 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Symbol</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment">Symbol libraryName = new Symbol(&#x27;dart.core&#x27;);</span></span><br><span class="line"><span class="comment">MirrorSystem mirrorSystem = currentMirrorSystem();</span></span><br><span class="line"><span class="comment">LibraryMirror libMirror = mirrorSystem.findLibrary(libraryName);</span></span><br><span class="line"><span class="comment">libMirror.declarations.forEach((s, d) =&gt; print(&#x27;$s - $d&#x27;));</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><blockquote><p>一般用在需要说明 类 函数 功能 输入 输出</p></blockquote><h2 id="文档注释"><a href="#文档注释" class="headerlink" title="文档注释"></a>文档注释</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// <span class="language-markdown"><span class="code">`main`</span> 函数</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">符号</span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">枚举</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-集合枚举-枚举 enum</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E9%9B%86%E5%90%88%E6%9E%9A%E4%B8%BE-%E6%9E%9A%E4%B8%BEenum/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E9%9B%86%E5%90%88%E6%9E%9A%E4%B8%BE-%E6%9E%9A%E4%B8%BEenum/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>适合用在常量定义，类型比较很方便。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义颜色枚举值</span></span><br><span class="line"><span class="keyword">enum</span> ColorType &#123;</span><br><span class="line">  none,</span><br><span class="line">  red,</span><br><span class="line">  green,</span><br><span class="line">  blue,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// 1 接收输入值 red 字符串</span></span><br><span class="line">  <span class="keyword">var</span> input = <span class="string">&quot;red&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2 将输入值转换为 ColorType 枚举类型</span></span><br><span class="line">  <span class="keyword">var</span> color = ColorType.none;</span><br><span class="line">  <span class="keyword">if</span> (input == <span class="string">&quot;red&quot;</span>) &#123;</span><br><span class="line">    color = ColorType.red;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (input == <span class="string">&quot;green&quot;</span>) &#123;</span><br><span class="line">    color = ColorType.green;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (input == <span class="string">&quot;blue&quot;</span>) &#123;</span><br><span class="line">    color = ColorType.blue;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3 switch 判断，打印输出</span></span><br><span class="line">  <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">    <span class="keyword">case</span> ColorType.red:</span><br><span class="line">      <span class="built_in">print</span>(ColorType.red);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> ColorType.green:</span><br><span class="line">      <span class="built_in">print</span>(ColorType.green);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> ColorType.blue:</span><br><span class="line">      <span class="built_in">print</span>(ColorType.blue);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="built_in">print</span>(ColorType.none);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>定义发帖类型 视频 图片 空</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> PostType &#123; video, image, none &#125;</span><br></pre></td></tr></table></figure><p>业务中判断</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">PostType <span class="keyword">get</span> type &#123;</span><br><span class="line">  <span class="keyword">if</span> (detail.type == POST_TYPE_IMAGE) &#123;</span><br><span class="line">    <span class="keyword">return</span> PostType.image;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (detail.type == POST_TYPE_VIDEO) &#123;</span><br><span class="line">    <span class="keyword">return</span> PostType.video;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> PostType.none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (type == PostType.video &amp;&amp; !_hasDetail) &#123;</span><br><span class="line">  playlist.insert(<span class="number">0</span>, VideoMedia(detail));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (type == PostType.video) &#123;</span><br><span class="line">    <span class="keyword">if</span> (playlist.isEmpty) &#123;</span><br><span class="line">      playlist.add(VideoMedia(detail));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      playlist.first.post = detail;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  _isLoading = <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">if</span> (type == PostType.video &amp;&amp; !_hasDetail) getPostList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-集合枚举-集合 Set</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E9%9B%86%E5%90%88%E6%9E%9A%E4%B8%BE-%E9%9B%86%E5%90%88Set/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E9%9B%86%E5%90%88%E6%9E%9A%E4%B8%BE-%E9%9B%86%E5%90%88Set/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h1><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p><code>Set</code> 是一个元素唯一的有序队列</p><h3 id="松散"><a href="#松散" class="headerlink" title="松散"></a>松散</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">Set</span>();</span><br><span class="line">a.add(<span class="string">&#x27;java&#x27;</span>);</span><br><span class="line">a.add(<span class="string">&#x27;php&#x27;</span>);</span><br><span class="line">a.add(<span class="string">&#x27;python&#x27;</span>);</span><br><span class="line">a.add(<span class="string">&#x27;java&#x27;</span>);</span><br><span class="line">a.add(<span class="string">&#x27;sql&#x27;</span>);</span><br><span class="line">a.add(<span class="string">&#x27;swift&#x27;</span>);</span><br><span class="line">a.add(<span class="string">&#x27;dart&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a);</span><br><span class="line"></span><br><span class="line">&#123;java, php, python, sql, swift, dart&#125;</span><br></pre></td></tr></table></figure><h3 id="强类型"><a href="#强类型" class="headerlink" title="强类型"></a>强类型</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">b.addAll([<span class="string">&#x27;dart&#x27;</span>, <span class="string">&#x27;c#&#x27;</span>, <span class="string">&#x27;j#&#x27;</span>, <span class="string">&#x27;e#&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(b);</span><br><span class="line"></span><br><span class="line">&#123;dart, c#, j#, e#&#125;</span><br></pre></td></tr></table></figure><h3 id="去重-amp-转列表"><a href="#去重-amp-转列表" class="headerlink" title="去重 &amp; 转列表"></a>去重 &amp; 转列表</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ls = [<span class="string">&#x27;dart&#x27;</span>, <span class="string">&#x27;java&#x27;</span>, <span class="string">&#x27;c#&#x27;</span>, <span class="string">&#x27;j#&#x27;</span>, <span class="string">&#x27;e#&#x27;</span>, <span class="string">&#x27;java&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> tags = <span class="built_in">Set</span>();</span><br><span class="line">tags.addAll(ls);</span><br><span class="line"><span class="built_in">print</span>(tags);</span><br><span class="line"><span class="built_in">print</span>(tags.toList());</span><br><span class="line"></span><br><span class="line">&#123;dart, java, c#, j#, e#&#125;</span><br><span class="line">[dart, java, c#, j#, e#]</span><br></pre></td></tr></table></figure><h2 id="基本属性"><a href="#基本属性" class="headerlink" title="基本属性"></a>基本属性</h2><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>isEmpty</td><td>是否为空</td></tr><tr><td>isNotEmpty</td><td>是否不为空</td></tr><tr><td>first</td><td>第一个</td></tr><tr><td>last</td><td>最后一个</td></tr><tr><td>length</td><td>个数</td></tr></tbody></table><h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>addAll</td><td>添加</td></tr><tr><td>contains</td><td>查询单个</td></tr><tr><td>containsAll</td><td>查询多个</td></tr><tr><td>difference</td><td>集合不同</td></tr><tr><td>intersection</td><td>交集</td></tr><tr><td>union</td><td>联合</td></tr><tr><td>lookup</td><td>按对象查询到返回对象</td></tr><tr><td>remove</td><td>删除单个</td></tr><tr><td>removeAll</td><td>删除多个</td></tr><tr><td>clear</td><td>清空</td></tr><tr><td>firstWhere</td><td>按条件正向查询</td></tr><tr><td>lastWhere</td><td>按条件反向查询</td></tr><tr><td>removeWhere</td><td>按条件删除</td></tr><tr><td>retainAll</td><td>只保留几个</td></tr><tr><td>retainWhere</td><td>按条件只保留几个</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b.addAll([&#x27;dart&#x27;, &#x27;c#&#x27;, &#x27;j#&#x27;, &#x27;e#&#x27;]);</span></span><br><span class="line"><span class="comment">// print(b.contains(&#x27;dart&#x27;));</span></span><br><span class="line"><span class="comment">// print(b.containsAll([&#x27;dart&#x27;, &#x27;swift&#x27;]));</span></span><br><span class="line"><span class="comment">// print(&#x27;b =&gt; $b&#x27;);</span></span><br><span class="line"><span class="comment">// print(a.difference(b));</span></span><br><span class="line"><span class="comment">// print(a.intersection(b));</span></span><br><span class="line"><span class="comment">// print(b.lookup(&#x27;dart&#x27;));</span></span><br><span class="line"><span class="comment">// print(b.union(a));</span></span><br><span class="line"><span class="comment">// b.remove(&#x27;dart&#x27;);</span></span><br><span class="line"><span class="comment">// b.removeAll([&#x27;dart&#x27;,&#x27;c#&#x27;]);</span></span><br><span class="line"><span class="comment">// b.clear();</span></span><br><span class="line"><span class="comment">// print(b.firstWhere((it) =&gt; it == &#x27;c#&#x27;));</span></span><br><span class="line"><span class="comment">// print(b.lastWhere((it) =&gt; it == &#x27;c#&#x27;));</span></span><br><span class="line"><span class="comment">// b.removeWhere((it) =&gt; it == &#x27;c#&#x27;);</span></span><br><span class="line"><span class="comment">// b.retainAll([&#x27;e#&#x27;]);</span></span><br><span class="line"><span class="comment">// b.retainWhere((it) =&gt; it == &#x27;e#&#x27;);</span></span><br><span class="line"><span class="comment">// b.retainWhere((it) &#123;</span></span><br><span class="line"><span class="comment">//   bool ret = it == &#x27;e#&#x27;;</span></span><br><span class="line"><span class="comment">//   return ret;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br></pre></td></tr></table></figure><h3 id="交集"><a href="#交集" class="headerlink" title="交集"></a>交集</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fd = &lt;<span class="built_in">String</span>&gt;&#123;<span class="string">&quot;js&quot;</span>, <span class="string">&quot;node&quot;</span>, <span class="string">&quot;dart&quot;</span>, <span class="string">&quot;css&quot;</span>, <span class="string">&quot;html&quot;</span>, <span class="string">&quot;macos&quot;</span>, <span class="string">&quot;docker&quot;</span>, <span class="string">&quot;git&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> ed = &lt;<span class="built_in">String</span>&gt;&#123;<span class="string">&quot;linux&quot;</span>, <span class="string">&quot;docker&quot;</span>, <span class="string">&quot;git&quot;</span>, <span class="string">&quot;go&quot;</span>, <span class="string">&quot;python&quot;</span>, <span class="string">&quot;sql&quot;</span>, <span class="string">&quot;node&quot;</span>, <span class="string">&quot;js&quot;</span>, <span class="string">&quot;aws&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(fd.intersection(ed));</span><br><span class="line"></span><br><span class="line">&#123;js, node, docker, git&#125;</span><br></pre></td></tr></table></figure><h3 id="联合"><a href="#联合" class="headerlink" title="联合"></a>联合</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fd = &lt;<span class="built_in">String</span>&gt;&#123;<span class="string">&quot;js&quot;</span>, <span class="string">&quot;node&quot;</span>, <span class="string">&quot;dart&quot;</span>, <span class="string">&quot;css&quot;</span>, <span class="string">&quot;html&quot;</span>, <span class="string">&quot;macos&quot;</span>, <span class="string">&quot;docker&quot;</span>, <span class="string">&quot;git&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> ed = &lt;<span class="built_in">String</span>&gt;&#123;<span class="string">&quot;linux&quot;</span>, <span class="string">&quot;docker&quot;</span>, <span class="string">&quot;git&quot;</span>, <span class="string">&quot;go&quot;</span>, <span class="string">&quot;python&quot;</span>, <span class="string">&quot;sql&quot;</span>, <span class="string">&quot;node&quot;</span>, <span class="string">&quot;js&quot;</span>, <span class="string">&quot;aws&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(fd.union(ed));</span><br><span class="line"></span><br><span class="line">&#123;js, node, dart, css, html, macos, docker, git, linux, go, python, sql, aws&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-集合枚举-集合 Map</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E9%9B%86%E5%90%88%E6%9E%9A%E4%B8%BE-%E9%9B%86%E5%90%88Map/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E9%9B%86%E5%90%88%E6%9E%9A%E4%B8%BE-%E9%9B%86%E5%90%88Map/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><h2 id="初始"><a href="#初始" class="headerlink" title="初始"></a>初始</h2><p>key value 形式的集合，也叫键值对。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;ducafecat&#x27;</span>, <span class="string">&#x27;web&#x27;</span>: <span class="string">&#x27;www.ducafecat.tech&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a);</span><br><span class="line"></span><br><span class="line">&#123;name: ducafecat, web: www.ducafecat.tech&#125;</span><br></pre></td></tr></table></figure><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><h3 id="松散"><a href="#松散" class="headerlink" title="松散"></a>松散</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">Map</span>();</span><br><span class="line">a[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line">a[<span class="string">&#x27;web&#x27;</span>] = <span class="string">&#x27;www.ducafecat.tech&#x27;</span>;</span><br><span class="line">a[<span class="number">0</span>] = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">a[<span class="number">0</span>] = <span class="string">&#x27;1231231&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a);</span><br><span class="line"></span><br><span class="line">&#123;name: ducafecat, web: www.ducafecat.tech, <span class="number">0</span>: <span class="number">1231231</span>&#125;</span><br></pre></td></tr></table></figure><p>key 相同，覆盖数据</p><h3 id="强类型"><a href="#强类型" class="headerlink" title="强类型"></a>强类型</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">Map</span>&lt;<span class="built_in">int</span>, <span class="built_in">String</span>&gt;();</span><br><span class="line">a[<span class="number">0</span>] = <span class="string">&#x27;java&#x27;</span>;</span><br><span class="line">a[<span class="number">1</span>] = <span class="string">&#x27;python&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a);</span><br><span class="line"></span><br><span class="line">&#123;<span class="number">0</span>: java, <span class="number">1</span>: python&#125;</span><br></pre></td></tr></table></figure><h2 id="基本属性"><a href="#基本属性" class="headerlink" title="基本属性"></a>基本属性</h2><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>isEmpty</td><td>是否为空</td></tr><tr><td>isNotEmpty</td><td>是否不为空</td></tr><tr><td>keys</td><td>key 集合</td></tr><tr><td>values</td><td>values 集合</td></tr><tr><td>length</td><td>个数</td></tr><tr><td>entries</td><td>加工数据入口</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;ducafecat&#x27;</span>, <span class="string">&#x27;web&#x27;</span>: <span class="string">&#x27;www.ducafecat.tech&#x27;</span>&#125;;</span><br><span class="line"><span class="built_in">print</span>(a.isEmpty);</span><br><span class="line"><span class="built_in">print</span>(a.isNotEmpty);</span><br><span class="line"><span class="built_in">print</span>(a.keys);</span><br><span class="line"><span class="built_in">print</span>(a.values);</span><br><span class="line"><span class="built_in">print</span>(a.length);</span><br><span class="line"><span class="built_in">print</span>(a.entries);</span><br><span class="line"></span><br><span class="line"><span class="keyword">false</span></span><br><span class="line"><span class="keyword">true</span></span><br><span class="line">(name, web)</span><br><span class="line">(ducafecat, www.ducafecat.tech)</span><br><span class="line"><span class="number">2</span></span><br><span class="line">(MapEntry(name: ducafecat), MapEntry(web: www.ducafecat.tech))</span><br></pre></td></tr></table></figure><h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>addAll</td><td>添加</td></tr><tr><td>addEntries</td><td>从入口添加</td></tr><tr><td>containsKey</td><td>按 key 查询</td></tr><tr><td>containsValue</td><td>按 value 查询</td></tr><tr><td>clear</td><td>清空</td></tr><tr><td>remove</td><td>删除某个</td></tr><tr><td>removeWhere</td><td>按条件删除</td></tr><tr><td>update</td><td>更新某个</td></tr><tr><td>updateAll</td><td>按条件更新</td></tr></tbody></table><h3 id="addAll"><a href="#addAll" class="headerlink" title="addAll"></a>addAll</h3><p>新增 kv 数据</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b.addAll(&#123;<span class="string">&#x27;first&#x27;</span>: <span class="string">&#x27;java&#x27;</span>, <span class="string">&#x27;second&#x27;</span>: <span class="string">&#x27;python&#x27;</span>&#125;);</span><br></pre></td></tr></table></figure><h3 id="addEntries"><a href="#addEntries" class="headerlink" title="addEntries"></a>addEntries</h3><p>接入另一个 map 集合</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b.addEntries(a.entries);</span><br></pre></td></tr></table></figure><h3 id="containsKey"><a href="#containsKey" class="headerlink" title="containsKey"></a>containsKey</h3><p>检查 key 是否存在</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a.containsKey(<span class="string">&#x27;name&#x27;</span>));</span><br></pre></td></tr></table></figure><h3 id="containsValue"><a href="#containsValue" class="headerlink" title="containsValue"></a>containsValue</h3><p>检查 value 是否存在</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a.containsValue(<span class="string">&#x27;www.ducafecat.tech&#x27;</span>));</span><br></pre></td></tr></table></figure><h3 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h3><p>清空数据</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b.clear();</span><br></pre></td></tr></table></figure><h3 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h3><p>删除数据</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.remove(<span class="string">&#x27;name&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="removeWhere"><a href="#removeWhere" class="headerlink" title="removeWhere"></a>removeWhere</h3><p>按条件删除</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.removeWhere((key,val) =&gt; key == <span class="string">&#x27;name&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="update"><a href="#update" class="headerlink" title="update"></a>update</h3><p>更新数据</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.update(<span class="string">&#x27;name&#x27;</span>, (val) =&gt; <span class="string">&#x27;abc&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="updateAll"><a href="#updateAll" class="headerlink" title="updateAll"></a>updateAll</h3><p>更新批量</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.updateAll((key, val) =&gt; <span class="string">&quot;---<span class="subst">$val</span>---&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>[]</td><td>取值</td></tr><tr><td>[]=</td><td>赋值</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a[<span class="string">&#x27;name&#x27;</span>]);</span><br><span class="line">a[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;abc&#x27;</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-集合枚举-列表 List</title>
      <link href="/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E9%9B%86%E5%90%88%E6%9E%9A%E4%B8%BE-%E5%88%97%E8%A1%A8List/"/>
      <url>/2022/08/28/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E9%9B%86%E5%90%88%E6%9E%9A%E4%B8%BE-%E5%88%97%E8%A1%A8List/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h1><h2 id="初始"><a href="#初始" class="headerlink" title="初始"></a>初始</h2><p>List 是一个有序列表</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><h3 id="自动"><a href="#自动" class="headerlink" title="自动"></a>自动</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; l = [];</span><br><span class="line">l</span><br><span class="line">..add(<span class="number">1</span>)</span><br><span class="line">..add(<span class="number">2</span>)</span><br><span class="line">..add(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><h3 id="定长"><a href="#定长" class="headerlink" title="定长"></a>定长</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l = <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt;.filled(<span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line">l[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">l[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">l[<span class="number">2</span>] = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><h3 id="生成数据"><a href="#生成数据" class="headerlink" title="生成数据"></a>生成数据</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; l = <span class="built_in">List</span>.generate(<span class="number">10</span>, (index) &#123;</span><br><span class="line">  <span class="keyword">return</span> index;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line"></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br></pre></td></tr></table></figure><h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>isEmpty</td><td>是否为空</td></tr><tr><td>isNotEmpty</td><td>是否不为空</td></tr><tr><td>first</td><td>第一个对象</td></tr><tr><td>last</td><td>最后一个对象</td></tr><tr><td>length</td><td>个数</td></tr><tr><td>reversed</td><td>反转</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">print</span>(l.first);</span><br><span class="line"><span class="built_in">print</span>(l.last);</span><br><span class="line"><span class="built_in">print</span>(l.length);</span><br><span class="line"><span class="built_in">print</span>(l.isEmpty);</span><br><span class="line"><span class="built_in">print</span>(l.isNotEmpty);</span><br><span class="line"><span class="built_in">print</span>(l.reversed);</span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="keyword">false</span></span><br><span class="line"><span class="keyword">true</span></span><br><span class="line">(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>add</td><td>添加</td></tr><tr><td>addAll</td><td>添加多个</td></tr><tr><td>insert</td><td>插入</td></tr><tr><td>insertAll</td><td>插入多个</td></tr><tr><td>indexOf</td><td>查询</td></tr><tr><td>indexWhere</td><td>按条件查询</td></tr><tr><td>remove</td><td>删除</td></tr><tr><td>removeAt</td><td>按位置删除</td></tr><tr><td>fillRange</td><td>按区间填充</td></tr><tr><td>getRange</td><td>按区间获取</td></tr><tr><td>shuffle</td><td>随机变换顺序</td></tr><tr><td>sort</td><td>排序</td></tr><tr><td>sublist</td><td>创建子</td></tr></tbody></table><h3 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; l = [];</span><br><span class="line"></span><br><span class="line">l</span><br><span class="line">  ..add(<span class="number">1</span>)</span><br><span class="line">  ..addAll([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line">  ..insert(<span class="number">0</span>, <span class="number">6</span>)</span><br><span class="line">  ..insertAll(<span class="number">6</span>, [<span class="number">6</span>, <span class="number">6</span>])</span><br><span class="line">  ;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line"></span><br><span class="line">[<span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure><h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l = [<span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(l.indexOf(<span class="number">5</span>));</span><br><span class="line"><span class="built_in">print</span>(l.indexWhere((it) =&gt; it == <span class="number">4</span>));</span><br><span class="line"></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l = [<span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line">l.remove(<span class="number">6</span>);</span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line">l.removeAt(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>]</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure><h3 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l = [<span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line">l.fillRange(<span class="number">0</span>, <span class="number">3</span>, <span class="number">9</span>);</span><br><span class="line"><span class="built_in">print</span>(l.getRange(<span class="number">0</span>, <span class="number">5</span>));</span><br><span class="line"></span><br><span class="line">(<span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure><h3 id="洗牌"><a href="#洗牌" class="headerlink" title="洗牌"></a>洗牌</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l = [<span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line">l.shuffle();</span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line">l.shuffle();</span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line"></span><br><span class="line">[<span class="number">2</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">6</span>]</span><br><span class="line">[<span class="number">6</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure><h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><ul><li>数字</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l = [<span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line">l.sort();</span><br><span class="line"><span class="built_in">print</span>(l);</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure><ul><li>日期</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">DateTime</span>&gt; dtList = [];</span><br><span class="line">dtList.addAll([</span><br><span class="line">  <span class="built_in">DateTime</span>.now(),</span><br><span class="line">  <span class="built_in">DateTime</span>.now().add(<span class="keyword">new</span> <span class="built_in">Duration</span>(days: <span class="number">-12</span>)),</span><br><span class="line">  <span class="built_in">DateTime</span>.now().add(<span class="keyword">new</span> <span class="built_in">Duration</span>(days: <span class="number">-2</span>))</span><br><span class="line">  ]);</span><br><span class="line"><span class="built_in">print</span>(dtList);</span><br><span class="line"></span><br><span class="line">dtList.sort((a, b) =&gt; a.compareTo(b));</span><br><span class="line"><span class="built_in">print</span>(dtList);</span><br><span class="line"></span><br><span class="line"><span class="number">9</span></span><br><span class="line">[<span class="number">2022</span><span class="number">-05</span><span class="number">-29</span> <span class="number">16</span>:<span class="number">43</span>:<span class="number">17.802</span>, <span class="number">2022</span><span class="number">-05</span><span class="number">-17</span> <span class="number">16</span>:<span class="number">43</span>:<span class="number">17.802</span>, <span class="number">2022</span><span class="number">-05</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">43</span>:<span class="number">17.802</span>]</span><br><span class="line">[<span class="number">2022</span><span class="number">-05</span><span class="number">-17</span> <span class="number">16</span>:<span class="number">43</span>:<span class="number">17.802</span>, <span class="number">2022</span><span class="number">-05</span><span class="number">-27</span> <span class="number">16</span>:<span class="number">43</span>:<span class="number">17.802</span>, <span class="number">2022</span><span class="number">-05</span><span class="number">-29</span> <span class="number">16</span>:<span class="number">43</span>:<span class="number">17.802</span>]</span><br></pre></td></tr></table></figure><h3 id="复制子列表"><a href="#复制子列表" class="headerlink" title="复制子列表"></a>复制子列表</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l = [<span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> l2 = l.sublist(<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line"><span class="built_in">print</span>(l2);</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><h3 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h3><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>+</td><td>连接</td></tr><tr><td>[]</td><td>取值</td></tr><tr><td>[]=</td><td>赋值</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> l1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> l2 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="built_in">print</span>(l1 + l2);</span><br><span class="line">l1[<span class="number">2</span>] = <span class="number">9</span>;</span><br><span class="line"><span class="built_in">print</span>(l1[<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React项目结构完整版</title>
      <link href="/2022/08/26/React/React%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%AE%8C%E6%95%B4%E7%89%88/"/>
      <url>/2022/08/26/React/React%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%AE%8C%E6%95%B4%E7%89%88/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">root</span><br><span class="line">├─node_modules(项目依赖包文件目录)</span><br><span class="line">├─public(资源目录)</span><br><span class="line">│  ├─configs(存放项目打包后部署需要修改的全局变量 例如：WebSocket地址)</span><br><span class="line">│     ├─assets(存放项目静态文件 例如：图片、3d模型)</span><br><span class="line">│     │   ├─images(图片)</span><br><span class="line">│     │      ├─models(模型3d模型)</span><br><span class="line">│     │      ...</span><br><span class="line">│     ├─docs(文档 系统版本)</span><br><span class="line">│     │    ├-images(修改文档图片目录)</span><br><span class="line">│     │    ├─doc.html(版本介绍、修改内容文档、修改版本号记录)</span><br><span class="line">│     │    ├─软件使用说明.docx</span><br><span class="line">│     │    ...</span><br><span class="line">│     ├─libs(存放需要CDN引入的第三方插件库)</span><br><span class="line">│     │  ...</span><br><span class="line">│     ├─theme(存放系统皮肤less文件，系统存在换肤时存在否则可以删除)</span><br><span class="line">│     │    └─color.less(系统皮肤颜色文件)</span><br><span class="line">│     ├─data(存放系统临时数据文件 例如:data.json)</span><br><span class="line">│     ├─favicon.ico(系统页签小图标)</span><br><span class="line">│     ├─index.html(页面模板页面)</span><br><span class="line">│     ...</span><br><span class="line">├─src(源码目录)</span><br><span class="line">│   ├─pages(系统页面目录、按照系统导航栏进行页面目录搭建)</span><br><span class="line">│   │    ├-home(首页目录)</span><br><span class="line">│   │    │   ├-index.ts</span><br><span class="line">││    │   ├-index.less</span><br><span class="line">│   │    ├-login(登录目录)</span><br><span class="line">│   │    │   ├-index.ts</span><br><span class="line">││    │   ├-index.less</span><br><span class="line">│   │    ...</span><br><span class="line">│   ├-@types(存放系统类型文件)</span><br><span class="line">│   │    ├-global.d.ts</span><br><span class="line">│   │    ├-navMenu.ts</span><br><span class="line">│   │    ...</span><br><span class="line">│   ├-components(存放系统业务组件，组件内部可能含有http请求)</span><br><span class="line">│   ├-constants(存放系统常量)</span><br><span class="line">│   ├-hooks(存放自定义钩子)</span><br><span class="line">│   ├-http(存放http请求方法，axios封装的请求方法，拦截器)</span><br><span class="line">│   ├-routers(存放系统路由文件)</span><br><span class="line">│   │      ├-allComponents.ts(所有页面组件集合)</span><br><span class="line">│   │      ├-MainRouter.tsx(主路由)</span><br><span class="line">│   │      ├-routerConfig.ts(路由配置文件)</span><br><span class="line">│   │      └─SubRouter.tsx(子路由)</span><br><span class="line">│   ├-assets(存放开发静态文件)</span><br><span class="line">│   ├-store(系统通信数据仓库)</span><br><span class="line">│   ├-styles(通用样式目录)</span><br><span class="line">│   ├-theme(换肤目录，系统存在换肤时存在否则可以删除)</span><br><span class="line">│   │    ├-dark.ts</span><br><span class="line">│   │    └─light.ts</span><br><span class="line">│   ├-store(存放系统通信数据仓库)</span><br><span class="line">│   ├-utils(工具类目录)</span><br><span class="line">│   ├-widgets(纯UI组件目录)</span><br><span class="line">│   ├-App.test.tsx(测试文件)</span><br><span class="line">│   ├-App.tsx(应用入口)</span><br><span class="line">│   ├-index.tsx(系统主入口)</span><br><span class="line">│   ...</span><br><span class="line">├-theme(换肤文件生成目录，系统存在换肤时存在否则可以删除)</span><br><span class="line">├-.gitignore(git上传忽略文件)</span><br><span class="line">├-craco.cofig.js(打包，代理配置文件)</span><br><span class="line">├-package.json(依赖包文件)</span><br><span class="line">├-README.md</span><br><span class="line">├-tsconfig.json(ts配置文件)</span><br><span class="line">├-tsconfig.path.json(ts路径配置文件)</span><br><span class="line">└─yarn.lock(yarn安装依赖版本锁文件)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-基础类型-日期时间 Datetime</title>
      <link href="/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4/"/>
      <url>/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="日期时间"><a href="#日期时间" class="headerlink" title="日期时间"></a>日期时间</h1><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><ul><li>当前时间</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">DateTime</span>.now();</span><br><span class="line"><span class="built_in">print</span>(now);</span><br><span class="line"></span><br><span class="line"><span class="number">2022</span><span class="number">-05</span><span class="number">-28</span> <span class="number">20</span>:<span class="number">04</span>:<span class="number">43.607</span></span><br></pre></td></tr></table></figure><ul><li>指定年月日</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">30</span>);</span><br><span class="line"><span class="built_in">print</span>(d);</span><br><span class="line"></span><br><span class="line"><span class="number">2018</span><span class="number">-10</span><span class="number">-10</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">00.000</span></span><br></pre></td></tr></table></figure><h2 id="创建时间-UTC"><a href="#创建时间-UTC" class="headerlink" title="创建时间 UTC"></a>创建时间 UTC</h2><ul><li><a href="https://zh.wikipedia.org/wiki/%E5%8D%8F%E8%B0%83%E4%B8%96%E7%95%8C%E6%97%B6">UTC 协调世界时</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%8E%9F%E5%AD%90%E6%97%B6">原子时</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%8E%9F%E5%AD%90%E9%90%98">原子钟</a></li><li>时区表</li></ul><p><img src="/assets/20220528200356.png" alt="20220528200356"></p><ul><li>创建 utc 时间</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">DateTime</span>.utc(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">30</span>);</span><br><span class="line"><span class="built_in">print</span>(d);</span><br><span class="line"></span><br><span class="line"><span class="number">2018</span><span class="number">-10</span><span class="number">-10</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">00.000</span>Z</span><br></pre></td></tr></table></figure><h2 id="解析时间-IOS-8601"><a href="#解析时间-IOS-8601" class="headerlink" title="解析时间 IOS 8601"></a>解析时间 IOS 8601</h2><ul><li><a href="https://zh.wikipedia.org/wiki/ISO_8601">ISO 8601</a></li><li><a href="https://zh.wikipedia.org/wiki/%E6%97%B6%E5%8C%BA">时区</a></li><li><a href="https://zh.wikipedia.org/wiki/%E6%97%B6%E5%8C%BA%E5%88%97%E8%A1%A8">时区列表</a></li><li>如果时间在零时区</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="built_in">DateTime</span>.parse(<span class="string">&#x27;2018-10-10 09:30:30Z&#x27;</span>);</span><br><span class="line"><span class="built_in">print</span>(d1);</span><br><span class="line"></span><br><span class="line"><span class="number">2018</span><span class="number">-10</span><span class="number">-10</span> <span class="number">09</span>:<span class="number">30</span>:<span class="number">30.000</span>Z</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="built_in">DateTime</span>.parse(<span class="string">&#x27;2018-10-10 09:30:30+0800&#x27;</span>);</span><br><span class="line"><span class="built_in">print</span>(d2);</span><br><span class="line"></span><br><span class="line"><span class="number">2018</span><span class="number">-10</span><span class="number">-10</span> <span class="number">01</span>:<span class="number">30</span>:<span class="number">30.000</span>Z</span><br></pre></td></tr></table></figure><h2 id="时间增减量"><a href="#时间增减量" class="headerlink" title="时间增减量"></a>时间增减量</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="built_in">DateTime</span>.now();</span><br><span class="line"><span class="built_in">print</span>(d1);</span><br><span class="line"><span class="built_in">print</span>(d1.add(<span class="keyword">new</span> <span class="built_in">Duration</span>(minutes: <span class="number">5</span>)));</span><br><span class="line"><span class="built_in">print</span>(d1.add(<span class="keyword">new</span> <span class="built_in">Duration</span>(minutes: <span class="number">-5</span>)));</span><br><span class="line"></span><br><span class="line"><span class="number">2022</span><span class="number">-05</span><span class="number">-28</span> <span class="number">22</span>:<span class="number">09</span>:<span class="number">12.805</span></span><br><span class="line"><span class="number">2022</span><span class="number">-05</span><span class="number">-28</span> <span class="number">22</span>:<span class="number">14</span>:<span class="number">12.805</span></span><br><span class="line"><span class="number">2022</span><span class="number">-05</span><span class="number">-28</span> <span class="number">22</span>:<span class="number">04</span>:<span class="number">12.805</span></span><br></pre></td></tr></table></figure><h2 id="比较时间"><a href="#比较时间" class="headerlink" title="比较时间"></a>比较时间</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">print</span>(d1.isAfter(d2));</span><br><span class="line"><span class="built_in">print</span>(d1.isBefore(d2));</span><br><span class="line"></span><br><span class="line"><span class="keyword">false</span></span><br><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="keyword">var</span> d1 = <span class="built_in">DateTime</span>.now();</span><br><span class="line"><span class="keyword">var</span> d2 = d1.add(<span class="keyword">new</span> <span class="built_in">Duration</span>(milliseconds: <span class="number">30</span>));</span><br><span class="line"><span class="built_in">print</span>(d1.isAtSameMomentAs(d2));</span><br><span class="line"></span><br><span class="line"><span class="keyword">false</span></span><br></pre></td></tr></table></figure><h2 id="时间差"><a href="#时间差" class="headerlink" title="时间差"></a>时间差</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="keyword">new</span> <span class="built_in">DateTime</span>(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">var</span> difference = d1.difference(d2);</span><br><span class="line"><span class="built_in">print</span>([difference.inDays, difference.inHours]);</span><br><span class="line"></span><br><span class="line">[<span class="number">-9</span>, <span class="number">-216</span>]</span><br></pre></td></tr></table></figure><h2 id="时间戳"><a href="#时间戳" class="headerlink" title="时间戳"></a>时间戳</h2><ul><li><a href="https://zh.wikipedia.org/wiki/%E5%85%AC%E5%85%83">公元</a></li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">DateTime</span>.now();</span><br><span class="line"><span class="built_in">print</span>(now.millisecondsSinceEpoch);</span><br><span class="line"><span class="built_in">print</span>(now.microsecondsSinceEpoch);</span><br><span class="line"></span><br><span class="line"><span class="number">1653747090687</span></span><br><span class="line"><span class="number">1653747090687000</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-基础类型-字符串 String</title>
      <link href="/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><h2 id="单引号或者双引号"><a href="#单引号或者双引号" class="headerlink" title="单引号或者双引号"></a>单引号或者双引号</h2><ul><li>赋值</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="built_in">String</span> b = <span class="string">&quot;ducafecat&quot;</span>;</span><br></pre></td></tr></table></figure><ul><li>区别 转义分隔符</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> myString = <span class="string">&#x27;Bob\&#x27;s dog&#x27;</span>;            <span class="comment">// Bob&#x27;s dog</span></span><br><span class="line"><span class="keyword">final</span> myString = <span class="string">&quot;a \&quot;quoted\&quot; word&quot;</span>;     <span class="comment">// a &quot;quoted&quot; word</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> myString = <span class="string">&quot;Bob&#x27;s dog&quot;</span>;             <span class="comment">// Bob&#x27;s dog</span></span><br><span class="line"><span class="keyword">final</span> myString = <span class="string">&#x27;a &quot;quoted&quot; word&#x27;</span>;       <span class="comment">// a &quot;quoted&quot; word</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> value = <span class="string">&#x27;&quot;quoted&quot;&#x27;</span>;                 <span class="comment">// &quot;quoted&quot;</span></span><br><span class="line"><span class="keyword">final</span> myString = <span class="string">&quot;a <span class="subst">$value</span> word&quot;</span>;         <span class="comment">// a &quot;quoted&quot; word</span></span><br></pre></td></tr></table></figure><h2 id="字符串模板"><a href="#字符串模板" class="headerlink" title="字符串模板"></a>字符串模板</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">String</span> b = <span class="string">&#x27;ducafecat : <span class="subst">$&#123;a&#125;</span>&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(b);</span><br></pre></td></tr></table></figure><h2 id="字符串连接"><a href="#字符串连接" class="headerlink" title="字符串连接"></a>字符串连接</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;hello&#x27;</span> + <span class="string">&#x27; &#x27;</span> + <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;hello&#x27;</span><span class="string">&#x27; &#x27;</span><span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;hello&#x27;</span>   <span class="string">&#x27; &#x27;</span>     <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="string">&#x27; &#x27;</span></span><br><span class="line"><span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">hello word</span></span><br><span class="line"><span class="string">this is multi line</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">hello word</span></span><br><span class="line"><span class="string">this is multi line</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a);</span><br></pre></td></tr></table></figure><h2 id="转义符号"><a href="#转义符号" class="headerlink" title="转义符号"></a>转义符号</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;hello word \n this is multi line&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br><span class="line"></span><br><span class="line">hello word</span><br><span class="line"> <span class="keyword">this</span> <span class="keyword">is</span> multi line</span><br></pre></td></tr></table></figure><h2 id="取消转义"><a href="#取消转义" class="headerlink" title="取消转义"></a>取消转义</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">r&#x27;hello word \n this is multi line&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br><span class="line"></span><br><span class="line">hello word \n <span class="keyword">this</span> <span class="keyword">is</span> multi line</span><br></pre></td></tr></table></figure><h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;web site ducafecat.tech&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(a.contains(<span class="string">&#x27;ducafecat&#x27;</span>));</span><br><span class="line"><span class="built_in">print</span>(a.startsWith(<span class="string">&#x27;web&#x27;</span>));</span><br><span class="line"><span class="built_in">print</span>(a.endsWith(<span class="string">&#x27;tech&#x27;</span>));</span><br><span class="line"><span class="built_in">print</span>(a.indexOf(<span class="string">&#x27;site&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><h2 id="提取数据"><a href="#提取数据" class="headerlink" title="提取数据"></a>提取数据</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;web site ducafecat.tech&#x27;</span>;</span><br><span class="line"><span class="comment">// substring截取位置为0~5的字符 不包含5</span></span><br><span class="line"><span class="built_in">print</span>(a.substring(<span class="number">0</span>,<span class="number">5</span>));</span><br><span class="line"><span class="keyword">var</span> b = a.split(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line"><span class="built_in">print</span>(b.length);</span><br><span class="line"><span class="built_in">print</span>(b[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">web s</span><br><span class="line"><span class="number">3</span></span><br><span class="line">web</span><br></pre></td></tr></table></figure><h2 id="大小写转换"><a href="#大小写转换" class="headerlink" title="大小写转换"></a>大小写转换</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;web site ducafecat.tech&#x27;</span>;</span><br><span class="line"><span class="built_in">print</span>(a.toLowerCase());</span><br><span class="line"><span class="built_in">print</span>(a.toUpperCase());</span><br><span class="line"></span><br><span class="line">web site ducafecat.tech</span><br><span class="line">WEB SITE DUCAFECAT.TECH</span><br></pre></td></tr></table></figure><h2 id="裁剪-判断空字符串"><a href="#裁剪-判断空字符串" class="headerlink" title="裁剪 判断空字符串"></a>裁剪 判断空字符串</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;    hello word     &#x27;</span>.trim());</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>.isEmpty);</span><br><span class="line"></span><br><span class="line">hello word</span><br><span class="line"><span class="keyword">true</span></span><br></pre></td></tr></table></figure><h2 id="替换部分字符"><a href="#替换部分字符" class="headerlink" title="替换部分字符"></a>替换部分字符</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello word word!&#x27;</span>.replaceAll(<span class="string">&#x27;word&#x27;</span>, <span class="string">&#x27;ducafecat&#x27;</span>));</span><br><span class="line"></span><br><span class="line">hello ducafecat ducafecat!</span><br></pre></td></tr></table></figure><h2 id="字符串创建"><a href="#字符串创建" class="headerlink" title="字符串创建"></a>字符串创建</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sb = <span class="built_in">StringBuffer</span>();</span><br><span class="line">sb..write(<span class="string">&#x27;hello word!&#x27;</span>)</span><br><span class="line">..write(<span class="string">&#x27;my&#x27;</span>)</span><br><span class="line">..write(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">..writeAll([<span class="string">&#x27;web&#x27;</span>, <span class="string">&#x27;site&#x27;</span>, <span class="string">&#x27;https://ducafecat.tech&#x27;</span>]);</span><br><span class="line"><span class="built_in">print</span>(sb.toString());</span><br><span class="line"></span><br><span class="line">hello word!my websitehttps:<span class="comment">//ducafecat.tech</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-基础类型-布尔 bool</title>
      <link href="/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E5%B8%83%E5%B0%94/"/>
      <url>/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E5%B8%83%E5%B0%94/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="布尔"><a href="#布尔" class="headerlink" title="布尔"></a>布尔</h1><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>为了代表布尔值，Dart 有一个名字为 bool 的类型。 只有两个对象是布尔类型的：true 和 false 所创建的对象， 这两个对象也都是编译时常量。</p><p><a href="https://api.dartlang.org/stable/2.17.1/dart-core/bool-class.html">bool</a></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> a;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br></pre></td></tr></table></figure><h2 id="true-判断"><a href="#true-判断" class="headerlink" title="true 判断"></a>true 判断</h2><p>只有 true 对象才被认为是 true。 所有其他的值都是 flase。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> name = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(name) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;this is name&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="assert-断言"><a href="#assert-断言" class="headerlink" title="assert 断言"></a>assert 断言</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">assert</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">assert</span>(name.isEmpty);</span><br><span class="line"><span class="keyword">assert</span>(name.isNotEmpty);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="built_in">num</span> = <span class="number">0</span> / <span class="number">0</span>;</span><br><span class="line"><span class="keyword">assert</span>(<span class="built_in">num</span>.isNaN);</span><br></pre></td></tr></table></figure><blockquote><p>注意： 断言只在检查模式下运行有效，如果在生产模式 运行，则断言不会执行。</p></blockquote><h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><h3 id="amp-amp-逻辑与"><a href="#amp-amp-逻辑与" class="headerlink" title="&amp;&amp; 逻辑与"></a><code>&amp;&amp;</code> 逻辑与</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> a = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">bool</span> b = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">assert</span>(a &amp;&amp; b);</span><br></pre></td></tr></table></figure><h3 id="逻辑或"><a href="#逻辑或" class="headerlink" title="|| 逻辑或"></a><code>||</code> 逻辑或</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> a = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">bool</span> b = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">assert</span>(a || b);</span><br></pre></td></tr></table></figure><h3 id="逻辑非"><a href="#逻辑非" class="headerlink" title="! 逻辑非"></a><code>!</code> 逻辑非</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> a = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">bool</span> b = !a;</span><br><span class="line"><span class="built_in">print</span>(b);</span><br></pre></td></tr></table></figure><h2 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h2><h3 id="等于"><a href="#等于" class="headerlink" title="== 等于"></a><code>==</code> 等于</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a == b) &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="不等于"><a href="#不等于" class="headerlink" title="!= 不等于"></a><code>!=</code> 不等于</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a != b) &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="gt-大于"><a href="#gt-大于" class="headerlink" title="&gt; 大于"></a><code>&gt;</code> 大于</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a &gt; b) &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="gt-大于或等于"><a href="#gt-大于或等于" class="headerlink" title="&gt;= 大于或等于"></a><code>&gt;=</code> 大于或等于</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a &gt;= b) &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="lt-小于"><a href="#lt-小于" class="headerlink" title="&lt; 小于"></a><code>&lt;</code> 小于</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a &lt; b) &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="lt-小于或等于"><a href="#lt-小于或等于" class="headerlink" title="&lt;= 小于或等于"></a><code>&lt;=</code> 小于或等于</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a &lt;= b) &#123;&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dart语言学习-基础类型-数值 num</title>
      <link href="/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E6%95%B0%E5%80%BC/"/>
      <url>/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E6%95%B0%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="数值"><a href="#数值" class="headerlink" title="数值"></a>数值</h1><h2 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h2><h3 id="int"><a href="#int" class="headerlink" title="int"></a>int</h3><p>整数值，其取值通常位于 -253 和 253 之间。</p><p><a href="https://api.dart.dev/stable/2.17.1/dart-core/int-class.html">int class</a></p><h3 id="double"><a href="#double" class="headerlink" title="double"></a>double</h3><p>64-bit (双精度) 浮点数，符合 IEEE 754 标准。</p><p><a href="https://api.dartlang.org/stable/2.17.1/dart-core/double-class.html">double class</a></p><h3 id="num"><a href="#num" class="headerlink" title="num"></a>num</h3><p>int 和 double 都是 num 的子类。</p><p><a href="https://api.dartlang.org/stable/2.17.1/dart-core/num-class.html">num class</a></p><h2 id="十进制、十六进制"><a href="#十进制、十六进制" class="headerlink" title="十进制、十六进制"></a>十进制、十六进制</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> a = <span class="number">1001</span>;</span><br><span class="line"><span class="built_in">int</span> b = <span class="number">0xF</span>;</span><br><span class="line"><span class="built_in">print</span>([a, b]);</span><br><span class="line"></span><br><span class="line">[<span class="number">1001</span>, <span class="number">15</span>]</span><br></pre></td></tr></table></figure><h2 id="科学计数法"><a href="#科学计数法" class="headerlink" title="科学计数法"></a>科学计数法</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">num</span> a = <span class="number">2e3</span>;</span><br><span class="line"><span class="built_in">print</span>([a]);</span><br><span class="line"></span><br><span class="line">[<span class="number">2000</span>]</span><br></pre></td></tr></table></figure><h2 id="数值转换"><a href="#数值转换" class="headerlink" title="数值转换"></a>数值转换</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// string -&gt; int</span></span><br><span class="line"><span class="comment">// string -&gt; double</span></span><br><span class="line"><span class="built_in">int</span> a = <span class="built_in">int</span>.parse(<span class="string">&#x27;123&#x27;</span>);</span><br><span class="line"><span class="built_in">double</span> b = <span class="built_in">double</span>.parse(<span class="string">&#x27;1.223&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// int -&gt; string</span></span><br><span class="line"><span class="comment">// double -&gt; string</span></span><br><span class="line"><span class="built_in">String</span> a = <span class="number">123.</span>toString();</span><br><span class="line"><span class="built_in">String</span> b = <span class="number">1.223</span>.toString();</span><br><span class="line"><span class="built_in">print</span>([a, b]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// double -&gt; int</span></span><br><span class="line"><span class="built_in">double</span> a = <span class="number">1.8</span>;</span><br><span class="line"><span class="built_in">int</span> b = a.toInt();</span><br><span class="line"><span class="built_in">print</span>(b);</span><br></pre></td></tr></table></figure><h2 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h2><p><a href="https://zh.wikipedia.org/wiki/%E4%BA%8C%E9%80%B2%E7%A2%BC%E5%8D%81%E9%80%B2%E6%95%B8">二进码十进数 8421 码</a></p><h3 id="amp-与运算"><a href="#amp-与运算" class="headerlink" title="&amp; 与运算"></a><code>&amp;</code> 与运算</h3><p>同时 <code>1</code> 才行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1 0 1 0          10</span><br><span class="line">0 0 1 0          2</span><br><span class="line">--------</span><br><span class="line">0 0 1 0          2</span><br><span class="line">var a = 10;</span><br><span class="line">var b = 2;</span><br><span class="line"><span class="built_in">print</span>(a &amp; b);</span><br><span class="line"></span><br><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="或运算"><a href="#或运算" class="headerlink" title="| 或运算"></a><code>|</code> 或运算</h3><p>有一个 <code>1</code> 就行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1 0 1 0          10</span><br><span class="line">0 0 1 0          2</span><br><span class="line">--------</span><br><span class="line">1 0 1 0          10</span><br><span class="line">var a = 10;</span><br><span class="line">var b = 2;</span><br><span class="line"><span class="built_in">print</span>(a | b);</span><br><span class="line"></span><br><span class="line">10</span><br></pre></td></tr></table></figure><p>可以用在常量组合</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> USE_LEFT = <span class="number">0x1</span>;</span><br><span class="line"><span class="keyword">const</span> USE_TOP = <span class="number">0x2</span>;</span><br><span class="line"><span class="keyword">const</span> USE_LEFT_TOP = USE_LEFT | USE_TOP;</span><br><span class="line"><span class="keyword">var</span> result = USE_LEFT | USE_TOP;</span><br><span class="line"><span class="built_in">print</span>(result);</span><br><span class="line"><span class="keyword">assert</span>(USE_LEFT_TOP == result);</span><br></pre></td></tr></table></figure><h3 id="非运算"><a href="#非运算" class="headerlink" title="~ 非运算"></a><code>~</code> 非运算</h3><p>二进制数逐位进行逻辑非运算</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">0 1 0 0 1          +9 二进制 最高位 0 整数 1 负数</span><br><span class="line">0 0 1 1 0          补码</span><br><span class="line">1 1 0 0 1          取反</span><br><span class="line">1 1 0 1 0          加1</span><br><span class="line">--------</span><br><span class="line">1 1 0 1 0          -10</span><br><span class="line">var a = 9;</span><br><span class="line"><span class="built_in">print</span>(~a);</span><br><span class="line"></span><br><span class="line">4294967286</span><br></pre></td></tr></table></figure><h3 id="异或"><a href="#异或" class="headerlink" title="^ 异或"></a><code>^</code> 异或</h3><p>不相同的才出 <code>1</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1 0 1 0          10</span><br><span class="line">0 0 1 0          2</span><br><span class="line">--------</span><br><span class="line">1 0 0 0          8</span><br><span class="line">var a = 10;</span><br><span class="line">var b = 2;</span><br><span class="line"><span class="built_in">print</span>(a ^ b);</span><br><span class="line"></span><br><span class="line">8</span><br></pre></td></tr></table></figure><p>计算机中可以用来取反色</p><h2 id="移位运算符"><a href="#移位运算符" class="headerlink" title="移位运算符"></a>移位运算符</h2><h3 id="lt-lt-左移"><a href="#lt-lt-左移" class="headerlink" title="&lt;&lt; 左移"></a><code>&lt;&lt;</code> 左移</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0 0 0 1          1 二进制</span><br><span class="line">0 0 1 0          左移一位 2</span><br><span class="line">0 1 0 0          左移一位 4</span><br><span class="line">1 0 0 0          左移一位 8</span><br></pre></td></tr></table></figure><p>向左移动一位</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="gt-gt-右移"><a href="#gt-gt-右移" class="headerlink" title="&gt;&gt; 右移"></a><code>&gt;&gt;</code> 右移</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 0 0 0          8 二进制</span><br><span class="line">0 1 0 0          右移一位 4</span><br><span class="line">0 0 1 0          右移一位 2</span><br><span class="line">0 0 0 1          右移一位 1</span><br></pre></td></tr></table></figure><p>向右移动一位</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">8</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-基础类型-常量</title>
      <link href="/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E5%B8%B8%E9%87%8F/"/>
      <url>/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E5%B8%B8%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h1><h2 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h2><h3 id="类型声明可以省略"><a href="#类型声明可以省略" class="headerlink" title="类型声明可以省略"></a>类型声明可以省略</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">String</span> a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="keyword">final</span> a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">String</span> a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="初始后不能再赋值"><a href="#初始后不能再赋值" class="headerlink" title="初始后不能再赋值"></a>初始后不能再赋值</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line">a = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line">a = <span class="string">&#x27;abc&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="不能和-var-同时使用"><a href="#不能和-var-同时使用" class="headerlink" title="不能和 var 同时使用"></a>不能和 var 同时使用</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">var</span> a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">var</span> a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h2><h3 id="需要确定的值"><a href="#需要确定的值" class="headerlink" title="需要确定的值"></a>需要确定的值</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> dt = <span class="built_in">DateTime</span>.now();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dt = <span class="keyword">const</span> <span class="built_in">DateTime</span>.now();</span><br></pre></td></tr></table></figure><h3 id="不可变性可传递"><a href="#不可变性可传递" class="headerlink" title="不可变性可传递"></a>不可变性可传递</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">List</span> ls = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line">ls[<span class="number">1</span>] = <span class="number">44</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">List</span> ls = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>];</span><br><span class="line">ls[<span class="number">1</span>] = <span class="number">44</span>;</span><br></pre></td></tr></table></figure><h3 id="内存中重复创建"><a href="#内存中重复创建" class="headerlink" title="内存中重复创建"></a>内存中重复创建</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> a1 = [<span class="number">11</span> , <span class="number">22</span>];</span><br><span class="line"><span class="keyword">final</span> a2 = [<span class="number">11</span> , <span class="number">22</span>];</span><br><span class="line"><span class="built_in">print</span>(identical(a1, a2));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a1 = [<span class="number">11</span> , <span class="number">22</span>];</span><br><span class="line"><span class="keyword">const</span> a2 = [<span class="number">11</span> , <span class="number">22</span>];</span><br><span class="line"><span class="built_in">print</span>(identical(a1, a2));</span><br></pre></td></tr></table></figure><blockquote><p><code>identical</code> 通过比较两个引用的是否是同一个对象判断是否相等</p></blockquote><h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><h3 id="final-成员变量初始"><a href="#final-成员变量初始" class="headerlink" title="final 成员变量初始"></a>final 成员变量初始</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PlaceholdWidget</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String?</span> assetImagePath;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> PlaceholdWidget(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.assetImagePath,</span><br><span class="line">  &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="const-全局参数"><a href="#const-全局参数" class="headerlink" title="const 全局参数"></a>const 全局参数</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 本地存储key</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> storageFirstOpen = <span class="string">&#x27;first_open&#x27;</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> storageLanguageCode = <span class="string">&#x27;language_code&#x27;</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> storageThemeCode = <span class="string">&#x27;theme_code&#x27;</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> storageToken = <span class="string">&#x27;token&#x27;</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> storageProfile = <span class="string">&#x27;profile&#x27;</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart语言学习-基础类型-变量</title>
      <link href="/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E5%8F%98%E9%87%8F/"/>
      <url>/2022/08/24/Dart/Dart%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-%E5%8F%98%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><h2 id="弱类型"><a href="#弱类型" class="headerlink" title="弱类型"></a>弱类型</h2><h3 id="var"><a href="#var" class="headerlink" title="var"></a>var</h3><p>如果没有初始值，可以变成任何类型</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="comment">// var a = &quot;&quot;; // 一旦赋值，就确定类型，不能随意改动</span></span><br><span class="line">a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line">a = <span class="number">123</span>;</span><br><span class="line">a = <span class="keyword">true</span>;</span><br><span class="line">a = &#123;<span class="string">&#x27;key&#x27;</span>: <span class="string">&#x27;val123&#x27;</span>&#125;;</span><br><span class="line">a = [<span class="string">&#x27;abc&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a);</span><br></pre></td></tr></table></figure><h3 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h3><p>动态任意类型</p><p>编译阶段检查类型</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span> a = <span class="string">&#x27;doucafecat&#x27;</span>;</span><br><span class="line">a = <span class="number">123</span>;</span><br><span class="line">a = [<span class="number">2222</span>];</span><br><span class="line">a.p();</span><br></pre></td></tr></table></figure><h3 id="dynamic"><a href="#dynamic" class="headerlink" title="dynamic"></a>dynamic</h3><p>动态任意类型</p><p>编译阶段不检查检查类型</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dynamic</span> a = <span class="string">&#x27;doucafecat&#x27;</span>;</span><br><span class="line">a = <span class="number">123</span>;</span><br><span class="line">a = [<span class="number">1111</span>];</span><br><span class="line">a.p();</span><br></pre></td></tr></table></figure><h3 id="比较-var-与-dynamic、Object"><a href="#比较-var-与-dynamic、Object" class="headerlink" title="比较 var 与 dynamic、Object"></a>比较 var 与 dynamic、Object</h3><p>唯一区别 var 如果有初始值，类型被锁定</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line"><span class="built_in">dynamic</span> a = <span class="string">&#x27;doucafecat&#x27;</span>;</span><br><span class="line"><span class="built_in">Object</span> a = <span class="string">&#x27;doucafecat&#x27;</span>;</span><br><span class="line">a = <span class="number">123</span>;</span><br></pre></td></tr></table></figure><h2 id="强类型"><a href="#强类型" class="headerlink" title="强类型"></a>强类型</h2><h3 id="申明类型"><a href="#申明类型" class="headerlink" title="申明类型"></a>申明类型</h3><p>声明后，类型被锁定</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> a;</span><br><span class="line">a = <span class="string">&#x27;ducafecat&#x27;</span>;</span><br><span class="line">a = <span class="number">123</span>;</span><br></pre></td></tr></table></figure><h3 id="常见类型"><a href="#常见类型" class="headerlink" title="常见类型"></a>常见类型</h3><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>num</td><td>数字</td></tr><tr><td>int</td><td>整型</td></tr><tr><td>double</td><td>浮点</td></tr><tr><td>bool</td><td>布尔</td></tr><tr><td>String</td><td>字符串</td></tr><tr><td>StringBuffer</td><td>字符串 buffer</td></tr><tr><td>DateTime</td><td>时间日期</td></tr><tr><td>Duration</td><td>时间区间</td></tr><tr><td>List</td><td>列表</td></tr><tr><td>Set</td><td>无重复队列</td></tr><tr><td>Map</td><td>kv 容器</td></tr><tr><td>enum</td><td>枚举</td></tr></tbody></table><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> a = <span class="string">&#x27;doucafecat&#x27;</span>;</span><br><span class="line"><span class="built_in">int</span> i = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">double</span> d = <span class="number">0.12</span>;</span><br><span class="line"><span class="built_in">bool</span> b = <span class="keyword">true</span>;</span><br><span class="line"><span class="built_in">DateTime</span> dt = <span class="keyword">new</span> <span class="built_in">DateTime</span>.now();</span><br><span class="line"><span class="built_in">List</span> l = [ a, i, d, b, dt];</span><br></pre></td></tr></table></figure><h2 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h2><p>变量声明后默认都是 <code>null</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="built_in">String</span> a;</span><br><span class="line"><span class="built_in">print</span>(a);</span><br><span class="line"><span class="keyword">assert</span>(a == <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure><blockquote><p><code>assert</code> 检查点函数，如果不符合条件直接抛出错误并终止程序进程</p></blockquote><h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><h3 id="var-简化定义变量"><a href="#var-简化定义变量" class="headerlink" title="var 简化定义变量"></a>var 简化定义变量</h3><p>不用明确变量类型</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> map = &lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt;&#123;&#125;;</span><br><span class="line">map[<span class="string">&quot;image&quot;</span>] = image;</span><br><span class="line">map[<span class="string">&quot;title&quot;</span>] = title;</span><br><span class="line">map[<span class="string">&quot;desc&quot;</span>] = desc;</span><br></pre></td></tr></table></figure><blockquote><p>这里不用 <code>var</code> ，就要写成 <code>Map&lt;String, dynamic&gt;</code></p></blockquote><h3 id="查询参数定义"><a href="#查询参数定义" class="headerlink" title="查询参数定义"></a>查询参数定义</h3><p>api 查询通用接口封装的时候，我们一般用动态类型</p><p>如一个 api 请求</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;Response&lt;T&gt;&gt; <span class="keyword">get</span>&lt;T&gt;(</span><br><span class="line">  <span class="built_in">String</span> path, &#123;</span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; queryParameters,</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p><code>Map&lt;String, dynamic&gt;? queryParameters</code>, 查询参数值是动态</p></blockquote><h3 id="返回的实例对象"><a href="#返回的实例对象" class="headerlink" title="返回的实例对象"></a>返回的实例对象</h3><p>如分类实例定义</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Category</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> id; <span class="comment">// 数字 id</span></span><br><span class="line">  <span class="built_in">String</span> name; <span class="comment">// 字符串 分类名称</span></span><br><span class="line">  <span class="built_in">String</span> slug;</span><br><span class="line"></span><br><span class="line">  Category(&#123;<span class="keyword">this</span>.id, <span class="keyword">this</span>.name, <span class="keyword">this</span>.slug&#125;);</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>int id;</code> <code>String name;</code> 明确类型</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
          <category> dart </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cesium 时钟(Cesium.Clock)</title>
      <link href="/2022/04/26/Cesium/%E6%97%B6%E9%92%9F/"/>
      <url>/2022/04/26/Cesium/%E6%97%B6%E9%92%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
      
      <categories>
          
          <category> Map(地图) </category>
          
          <category> cesium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Map </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cesium 基础参数</title>
      <link href="/2022/03/29/Cesium/%E5%9F%BA%E7%A1%80%E5%8F%82%E6%95%B0/"/>
      <url>/2022/03/29/Cesium/%E5%9F%BA%E7%A1%80%E5%8F%82%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>创建第一个cesium程序</p><p>下载cesium 可以通过npm或者yarn进行下载，将Build下面的Cesium文件夹拷贝出来，这里面的就是核心包。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install cesium</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">yarn add cesium</span><br></pre></td></tr></table></figure><p>使用可以直接通过script标签嵌入，如果是vue或者react项目可以通过对webpack进行配置，这里就不多阐述了（<code>重点是要引入js文件和css文件</code>）。</p><p>那我们开始第一个示例了：</p><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./Cesium/Widgets/widgets.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./Cesium/Cesium.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    // 自定义全局样式</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="string">&#x27;Segoe UI&#x27;</span>, <span class="string">&#x27;Roboto&#x27;</span>, <span class="string">&#x27;Oxygen&#x27;</span>,</span></span><br><span class="line"><span class="language-css">        <span class="string">&#x27;Ubuntu&#x27;</span>, <span class="string">&#x27;Cantarell&#x27;</span>, <span class="string">&#x27;Fira Sans&#x27;</span>, <span class="string">&#x27;Droid Sans&#x27;</span>, <span class="string">&#x27;Helvetica Neue&#x27;</span>,</span></span><br><span class="line"><span class="language-css">        sans-serif;</span></span><br><span class="line"><span class="language-css">      -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span></span><br><span class="line"><span class="language-css">      -moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#root</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.App</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.map</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">   </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;map&#x27;</span> <span class="attr">className</span>=<span class="string">&#x27;map&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><style>    table th:nth-child(1) {    width: 100px;    }    table th:nth-child(2) {        width: 12em;    }    table th:nth-child(3) {        width: 4em;    }</style><p>index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 该代码就实现了第一个cesium例子了</span></span><br><span class="line"><span class="keyword">let</span> viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="string">&quot;map&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="Viewer"><a href="#Viewer" class="headerlink" title="Viewer"></a>Viewer</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(container, options)</span><br></pre></td></tr></table></figure><h4 id="Container"><a href="#Container" class="headerlink" title="Container"></a>Container</h4><p>container是一个html容器，可以是字符串id，也可以是一个dom元素；</p><h4 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h4><p>Cesium.Viewer.ConstructorOptions是在创建Viewer的时候传入，以下属性都有自己的构造器可以进行<code>new</code>操作，将属性首字母大写就是构造器，具体构造器参数可以复制属性去文档中查看；</p><table><thead><tr><th align="left">参数名称</th><th align="left">参数类型</th><th>属性</th><th>默认</th><th>参数描述</th></tr></thead><tbody><tr><td align="left">animation</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果设置为 false，则不会创建动画小部件。<br />左下角的动画播放组件不会被显示。</td></tr><tr><td align="left">baseLayerPicker</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果设置为 false，则不会创建 BaseLayerPicker 小部件。<br />即地图图层选择按钮不会被显示。</td></tr><tr><td align="left">fullscreenButton</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果设置为 false，则不会创建右下角的全屏按钮小部件。</td></tr><tr><td align="left">vrButton</td><td align="left">布尔值</td><td>可选</td><td>false</td><td>如果设置为 true，将创建 VRButton 小部件。</td></tr><tr><td align="left">geocoder</td><td align="left">布尔值 OR<br />GeocoderService []</td><td>可选</td><td>true</td><td>如果设置为 false，则不会创建 Geocoder 小部件。<br />就是cesium初始化的搜索按钮组件，可以搜索跳转到某个位置。</td></tr><tr><td align="left">homeButton</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果设置为 false，则不会创建 HomeButton 小部件。<br />该按钮功能是定位到初始位置。</td></tr><tr><td align="left">infoBox</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果设置为 false，则不会创建 InfoBox 小部件。<br />双击地图上的实体出现定位框后，侧边弹出的信息。</td></tr><tr><td align="left">sceneModePicker</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果设置为 false，则不会创建 SceneModePicker 小部件。<br />3D、2D、2.5D切换按钮</td></tr><tr><td align="left">selectionIndicator</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果设置为 false，则不会创建 SelectionIndicator 小部件。<br />双击地图上的实体会出现选中的定位框，设置为false则不会出现定位框。</td></tr><tr><td align="left">timeline</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果设置为 false，则不会创建 Timeline 小部件。<br />地图正下方的时间进度条，设置为false则不会显示时间进度条。</td></tr><tr><td align="left">navigationHelpButton</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果设置为 false，则不会创建导航帮助按钮。右上角的问号按钮。</td></tr><tr><td align="left">navigationInstructionsInitiallyVisible</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果导航说明最初应该可见，则为 true，如果在用户明确单击按钮之前不应显示导航说明，则为 false。该属性控制导航说明弹出框在初始状态的显示和隐藏。</td></tr><tr><td align="left">scene3DOnly</td><td align="left">布尔值</td><td>可选</td><td>false</td><td>当 时<code>true</code>，每个几何实例将仅以 3D 渲染以节省 GPU 内存。</td></tr><tr><td align="left">shouldAnimate</td><td align="left">布尔值</td><td>可选</td><td>false</td><td><code>true</code>如果默认情况下时钟应该尝试提前模拟时间，<code>false</code>否则。此选项优先于设置<a href="https://cesium.com/learn/cesiumjs/ref-doc/Viewer.html#clockViewModel"><code>Viewer#clockViewModel</code></a>。</td></tr><tr><td align="left">clockViewModel</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/ClockViewModel.html">ClockViewModel</a></td><td>可选</td><td>new lockViewModel(clock)</td><td>用于控制当前时间的时钟视图模型。</td></tr><tr><td align="left">selectedImageryProviderViewModel</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/ProviderViewModel.html">ProviderViewModel</a></td><td>可选</td><td>–</td><td>当前基础图像层的视图模型，如果未提供，则使用第一个可用基础层。此值仅在 <code>baseLayerPicker</code> 设置为 true 时有效。</td></tr><tr><td align="left">imageryProviderViewModels</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/ProviderViewModel.html">ProviderViewModel</a> []</td><td>可选</td><td>createDefaultImageryProviderViewModels()</td><td>要从 BaseLayerPicker 中选择的 ProviderViewModel 数组。此值仅在 <code>baseLayerPicker</code> 设置为 true 时有效。</td></tr><tr><td align="left">selectedTerrainProviderViewModel</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/ProviderViewModel.html">ProviderViewModel</a></td><td>可选</td><td>–</td><td>当前基础地形图层的视图模型，如果未提供，则使用第一个可用基础图层。此值仅在 <code>baseLayerPicker</code> 设置为 true 时有效。</td></tr><tr><td align="left">terrainProviderViewModels</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/ProviderViewModel.html">ProviderViewModel</a>      []</td><td>可选</td><td>–</td><td>要从 BaseLayerPicker 中选择的 ProviderViewModel 数组。此值仅在 <code>baseLayerPicker</code> 设置为 true 时有效。</td></tr><tr><td align="left">imageryProvider</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/ImageryProvider.html">ImageryProvider</a></td><td>可选</td><td>createWorldImagery()</td><td>要使用的图像提供程序。此值仅在 <code>baseLayerPicker</code> 设置为 false 时有效。</td></tr><tr><td align="left">terrainProvider</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/TerrainProvider.html">TerrainProvider</a></td><td>可选</td><td>new EllipsoidTerrainProvider()</td><td>要使用的地形提供者</td></tr><tr><td align="left">skyBox</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/SkyBox.html">SkyBox</a>  | false</td><td>可选</td><td>–</td><td>天空盒用于渲染星星。当 时<code>undefined</code>，使用默认星号。如果设置为<code>false</code>，则不会添加天空盒、太阳或月亮。</td></tr><tr><td align="left">skyAtmosphere</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/SkyAtmosphere.html">SkyAtmosphere</a>  | false</td><td>可选</td><td>–</td><td>天空大气层，蔚蓝的天空，以及围绕着地球四肢的光芒。设置为<code>false</code>关闭它。</td></tr><tr><td align="left">fullscreenElement</td><td align="left">Element | String</td><td>可选</td><td>document.body</td><td>按下全屏按钮时要置于全屏模式的元素或 id。</td></tr><tr><td align="left">useDefaultRenderLoop</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果此小部件应控制渲染循环，则为 true，否则为 false。</td></tr><tr><td align="left">targetFrameRate</td><td align="left">数字</td><td>可选</td><td>–</td><td>使用默认渲染循环时的目标帧速率。</td></tr><tr><td align="left">showRenderLoopErrors</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果为 true，如果出现渲染循环错误，此小部件将自动向用户显示包含错误的 HTML 面板。当出现渲染错误时会弹出红色的错误框。</td></tr><tr><td align="left">useBrowserRecommendedResolution</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果为 true，则以浏览器推荐的分辨率渲染并忽略<code>window.devicePixelRatio</code>.</td></tr><tr><td align="left">automaticallyTrackDataSourceClocks</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果为 true，此小部件将自动跟踪新添加的 DataSource 的时钟设置，并在 DataSource 的时钟更改时更新。如果要独立配置时钟，请将其设置为 false。</td></tr><tr><td align="left">contextOptions</td><td align="left">Object</td><td>可选</td><td>–</td><td>Context 和 WebGL 创建属性对应于<code>options</code>传递给<a href="https://cesium.com/learn/cesiumjs/ref-doc/Scene.html"><code>Scene</code></a>.</td></tr><tr><td align="left">sceneMode</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/global.html#SceneMode">SceneMode</a></td><td>可选</td><td>SceneMode.SCENE3D</td><td>初始场景模式。</td></tr><tr><td align="left">mapProjection</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/MapProjection.html">MapProjection</a></td><td>可选</td><td>new GeographicProjection()</td><td>在 2D 和 Columbus View 模式中使用的地图投影。</td></tr><tr><td align="left">globe</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/Globe.html">Globe</a>  | false</td><td>可选</td><td>new Globe(mapProjection.ellipsoid)</td><td>场景中使用的地球仪。如果设置为<code>false</code>，则不会添加地球。</td></tr><tr><td align="left">orderIndependentTranslucency</td><td align="left">布尔值</td><td>可选</td><td>true</td><td>如果为 true 并且配置支持它，请使用与顺序无关的半透明。</td></tr><tr><td align="left">creditContainer</td><td align="left">Element | String</td><td>可选</td><td>–</td><td>将包含<a href="https://cesium.com/learn/cesiumjs/ref-doc/CreditDisplay.html"><code>CreditDisplay</code></a>. 如果未指定，积分将添加到小部件本身的底部。</td></tr><tr><td align="left">creditViewport</td><td align="left">Element | String</td><td>可选</td><td>–</td><td>将包含由<a href="https://cesium.com/learn/cesiumjs/ref-doc/CreditDisplay.html"><code>CreditDisplay</code></a>. 如果未指定，它将出现在小部件本身之上。</td></tr><tr><td align="left">dataSources</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/DataSourceCollection.html">DataSourceCollection</a></td><td>可选</td><td>new DataSourceCollection()</td><td>小部件可视化的数据源集合。如果提供此参数，则假定实例由调用者拥有，并且在viewer被销毁时不会被销毁。</td></tr><tr><td align="left">shadows</td><td align="left">布尔值</td><td>可选</td><td>false</td><td>确定阴影是否由光源投射。</td></tr><tr><td align="left">terrainShadows</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/global.html#ShadowMode">ShadowMode</a></td><td>可选</td><td>ShadowMode.RECEIVE_ONLY</td><td>确定地形是否投射或接收来自光源的阴影。</td></tr><tr><td align="left">mapMode2D</td><td align="left"><a href="https://cesium.com/learn/cesiumjs/ref-doc/global.html#MapMode2D">MapMode2D</a></td><td>可选</td><td>MapMode2D.INFINITE_SCROLL</td><td>确定 2D 地图是可旋转的还是可以在水平方向上无限滚动。</td></tr><tr><td align="left">projectionPicker</td><td align="left">布尔值</td><td>可选</td><td>false</td><td>如果设置为 true，将创建 ProjectionPicker 小部件。</td></tr><tr><td align="left">requestRenderMode</td><td align="left">布尔值</td><td>可选</td><td>false</td><td>如果为 true，则仅在需要时才会渲染帧，具体取决于场景内的变化。启用会减少应用程序的 CPU/GPU 使用率并在移动设备上使用更少的电池，但需要<a href="https://cesium.com/learn/cesiumjs/ref-doc/Scene.html#requestRender"><code>Scene#requestRender</code></a>在此模式下显式渲染新帧。在对 API 的其他部分中的场景进行更改后，这在许多情况下是必要的。请参阅<a href="https://cesium.com/blog/2018/01/24/cesium-scene-rendering-performance/">使用显式渲染提高性能</a>。</td></tr><tr><td align="left">maximumRenderTimeChange</td><td align="left">数字</td><td>可选</td><td>0.0</td><td>如果 requestRenderMode 为 true，则此值定义在请求渲染之前允许的模拟时间的最大变化。请参阅<a href="https://cesium.com/blog/2018/01/24/cesium-scene-rendering-performance/">使用显式渲染提高性能</a>。</td></tr><tr><td align="left">depthPlaneEllipsoidOffset</td><td align="left">数字</td><td>可选</td><td>0.0</td><td>调整 DepthPlane 以解决椭球零海拔以下的渲染伪影。</td></tr><tr><td align="left">msaaSamples</td><td align="left">数字</td><td>可选</td><td>1.0</td><td>如果提供，此值控制多重采样抗锯齿的速率。典型的多重采样率为每像素 2、4 甚至有时 8 个样本。更高的 MSAA 采样率可能会影响性能以换取改进的视觉质量。此值仅适用于支持多样本渲染目标的 WebGL2 上下文。</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Map(地图) </category>
          
          <category> cesium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Map </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>threejs学习之四大组件</title>
      <link href="/2022/03/17/Threejs/%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6/"/>
      <url>/2022/03/17/Threejs/%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><p>场景就是舞台，你可以把任何要显示的东西放在场景中的任何位置。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">THREE</span>.<span class="property">Scene</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; &#125;</span><br></pre></td></tr></table></figure><h3 id="相机"><a href="#相机" class="headerlink" title="相机"></a>相机</h3><p>相机就是现实生活中的相机，我们最终能够在浏览器中看到的景象，就是相机拍摄出来的。</p><h4 id="两大相机"><a href="#两大相机" class="headerlink" title="两大相机"></a>两大相机</h4><p>透视相机：透视投影符合人们的心里习惯，即离视点近的物体大，离视点远的物体小，远到极点即为小时，成为灭点。perspective(透视)  camera(相机)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">THREE</span>.<span class="property">PerspectiveCamera</span> = <span class="keyword">function</span>(<span class="params">fov,aspect,near,far</span>)&#123;&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/threejs_camera_1.jpg" alt="threejs_camera_1"></p><p>先来明确这个图里涉及的概念。很多人人都认为这些概念很简单，不需要讲解，但是其实正是这些简单的东西让很多初学者不明白。所以我一直想把这些简单的内容给解释清楚，以至于大家不在这个上面花费过多的时间。</p><p>1、视角<code>fov</code>：这个最难理解，我的解释是，眼睛睁开的角度，即视角的大小，如果设置为0，相当于你闭上了眼睛了，所以什么也看不见，如果为180，那么可以认为你的视界很广阔，但是在180度的时候，往往物体很小，因为他在你的整个可视区域的比例变小了。</p><p>2、纵横比<code>aspect</code>:实际窗口的纵横比，即宽度除以高度。这个值越大，说明你的宽度越大，那么你可能看到的是宽荧幕电影了，如果这个之小于1，那么你看的就是高度很高的LED屏幕了。</p><p>3、近平面<code>near</code>:表示你近处的裁面的举例，也可以认为是眼睛距离近出的距离，假设为10米远，请不要设置为负值，Three.js就傻了，不知道该怎么算了。</p><p>4、远平面<code>far</code>:表示你远处的裁面。</p><p>简单的看一下下面的例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> camera = <span class="keyword">new</span> <span class="variable constant_">HTREE</span>.<span class="title class_">PerspectiveCamera</span>(<span class="number">45</span>,width/height,<span class="number">1</span>,<span class="number">1000</span>);</span><br><span class="line">camera.<span class="property">posiotion</span>.<span class="property">x</span> = <span class="number">0</span>;</span><br><span class="line">camera.<span class="property">posiotion</span>.<span class="property">y</span> = <span class="number">0</span>;</span><br><span class="line">camera.<span class="property">posiotion</span>.<span class="property">z</span> = <span class="number">6000</span>;</span><br><span class="line">camera.<span class="property">up</span>.<span class="property">x</span> = <span class="number">0</span>;</span><br><span class="line">camera.<span class="property">up</span>.<span class="property">y</span> = <span class="number">1</span>;</span><br><span class="line">camera.<span class="property">up</span>.<span class="property">z</span> = <span class="number">0</span>;</span><br><span class="line">camera.<span class="title function_">lookAt</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>:<span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>:<span class="number">0</span>,</span><br><span class="line">    <span class="attr">z</span>:<span class="number">0</span></span><br><span class="line">&#125;);</span><br><span class="line">scene.<span class="title function_">add</span>(camera);</span><br></pre></td></tr></table></figure><p>上面的例子相机视角45°，纵横比(width/height)和容器宽高比，近平面1米，远平面1000米；</p><p>正投影相机：就是远处的和近处的是一样大。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">THREE</span>.<span class="property">OrthographicCamera</span> = <span class="keyword">function</span> (<span class="params">left = -<span class="number">1</span>, right = <span class="number">1</span>, top = <span class="number">1</span>, bottom = -<span class="number">1</span>, near = <span class="number">0.1</span>, far = <span class="number">2000</span></span>)&#123;&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/OrthographicCamera.png" alt="OrthographicCamera"></p><p>1、左平面<code>left</code>:相机距离左边的距离；</p><p>2、右平面<code>ringht</code>:相机距离右边的距离；</p><p>3、上平面<code>top</code>:相机距离上边的距离；</p><p>4、下平面<code>bottom</code>:相机距离下边的距离；</p><p>5、近平面<code>near</code>:表示你近处的裁面；</p><p>6、远平面<code>far</code>:表示你远处的裁面；</p><h3 id="渲染器"><a href="#渲染器" class="headerlink" title="渲染器"></a>渲染器</h3><p>渲染器决定了画家怎么将眼前的场景画到屏幕上。把我们放到场景的东西最终通过程序计算，这个计算的过程叫做渲染。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">THREE</span>.<span class="property">WebGLRenderer</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 渲染即调用上面函数</span></span><br><span class="line"><span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>();</span><br></pre></td></tr></table></figure><h3 id="几何体"><a href="#几何体" class="headerlink" title="几何体"></a>几何体</h3><p>几何体就是要显示在场景中的对象，也可以通俗的理解为网格模型。网格模型需要一个几何体以及一个或者多个材质；</p><p>基础例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var scene = new THREE.Scene();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// var render = new THREE.WebGLRenderer();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// render.setSize(window.innerWidth, window.innerHeight);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// document.body.appendChild(render.domElement);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// var gometry = new THREE.CubeGeometry(2, 2, 2); // CubeGeometry 该属性已经在新版本中移除</span></span><br><span class="line"><span class="comment">// var material = new THREE.MeshBasicMaterial(&#123; color: 0xff0000 &#125;);</span></span><br><span class="line"><span class="comment">// var cube = new THREE.Mesh(geometry, material);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1、创建场景</span></span><br><span class="line"><span class="keyword">var</span> scene = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Scene</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、创建相机</span></span><br><span class="line"><span class="keyword">var</span> camera = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">PerspectiveCamera</span>(<span class="number">75</span>, <span class="variable language_">window</span>.<span class="property">innerWidth</span> / <span class="variable language_">window</span>.<span class="property">innerHeight</span>, <span class="number">1</span>, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3、创建渲染器</span></span><br><span class="line"><span class="keyword">var</span> renderer = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4、设置渲染器宽高</span></span><br><span class="line">renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="variable language_">window</span>.<span class="property">innerHeight</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5、将渲染器计算的结果放入dom元素</span></span><br><span class="line"><span class="keyword">let</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;container&quot;</span>);</span><br><span class="line">container.<span class="title function_">appendChild</span>(renderer.<span class="property">domElement</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 6、创建几何体</span></span><br><span class="line"><span class="keyword">var</span> geometry = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BoxGeometry</span>(<span class="number">10</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建材质</span></span><br><span class="line"><span class="keyword">var</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(<span class="string">&quot;#fff&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个网格体需要一个几何体，以及一个或多个材质</span></span><br><span class="line"><span class="keyword">var</span> cube = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(geometry, material);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7、将几何体加入场景</span></span><br><span class="line">scene.<span class="title function_">add</span>(cube);</span><br><span class="line"></span><br><span class="line">camera.<span class="property">position</span>.<span class="property">z</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  cube.<span class="property">rotation</span>.<span class="property">y</span> += <span class="number">0.01</span>;</span><br><span class="line">  cube.<span class="property">rotation</span>.<span class="property">z</span> += <span class="number">0.01</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 8、渲染器执行渲染结果</span></span><br><span class="line">  renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">  <span class="title function_">requestAnimationFrame</span>(render);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>();</span><br></pre></td></tr></table></figure><p>相关问题：</p><p><img src="/assets/threejs_question_01.png" alt="threejs_question_01"></p><p>通过控制打印出来结果：</p><p><img src="/assets/threejs_answer_01.png" alt="threejs_answer_01"></p><p>结果表明：</p><p>scene 默认位置是原点(x=0 y=0 z=0 );</p><p>camera  默认位置是原点(x=0 y=0 z=0 ); 相机位置是注释了 // camera.position.z = 100;该代码显示的；</p><p>cube 几何体 默认位置是原点(x=0 y=0 z=0 );</p><p><strong>问题：</strong></p><p>1.坐标原点是在近平面上还是在哪个位置？</p><p>2.setClearColorHex与setClearColor的区别？</p><p>答：setClearColorHex与setClearColor的区别在于版本问题，新版本去掉了setClearColorHex后面的Hex。</p>]]></content>
      
      
      <categories>
          
          <category> Threejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Threejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Threejs学习之环境搭建</title>
      <link href="/2022/03/16/Threejs/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
      <url>/2022/03/16/Threejs/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="资源连接"><a href="#资源连接" class="headerlink" title="资源连接"></a>资源连接</h4><p><a href="https://github.com/mrdoob/three.js">https://github.com/mrdoob/three.js</a></p><h4 id="官网链接"><a href="#官网链接" class="headerlink" title="官网链接"></a>官网链接</h4><p><a href="https://threejs.org/">https://threejs.org/</a></p><p><img src="/assets/threejs_download.png" alt="threejs_download"></p><p>点击上图 Download ZIP 下载到本地解压即可；</p><h4 id="简单例子"><a href="#简单例子" class="headerlink" title="简单例子"></a>简单例子</h4><h5 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h5><p><img src="/assets/threejs_menu.png" alt="threejs_menu"></p><h5 id="基础代码"><a href="#基础代码" class="headerlink" title="基础代码"></a>基础代码</h5><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./libs/three.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      * &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">canvas</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./src/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>src/index.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">PerspectiveCamera</span>(<span class="number">70</span>, <span class="variable language_">window</span>.<span class="property">innerWidth</span> / <span class="variable language_">window</span>.<span class="property">innerHeight</span>, <span class="number">0.01</span>, <span class="number">10</span>);</span><br><span class="line">camera.<span class="property">position</span>.<span class="property">z</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Scene</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">BoxGeometry</span>(<span class="number">0.2</span>, <span class="number">0.2</span>, <span class="number">0.2</span>);</span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshNormalMaterial</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(geometry, material);</span><br><span class="line">scene.<span class="title function_">add</span>(mesh);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">WebGLRenderer</span>(&#123; <span class="attr">antialias</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">renderer.<span class="title function_">setSize</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>, <span class="variable language_">window</span>.<span class="property">innerHeight</span>);</span><br><span class="line">renderer.<span class="title function_">setAnimationLoop</span>(animation);</span><br><span class="line"><span class="keyword">let</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;container&quot;</span>);</span><br><span class="line">container.<span class="title function_">appendChild</span>(renderer.<span class="property">domElement</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// animation</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">animation</span>(<span class="params">time</span>) &#123;</span><br><span class="line"></span><br><span class="line">  mesh.<span class="property">rotation</span>.<span class="property">x</span> = time / <span class="number">2000</span>;</span><br><span class="line">  mesh.<span class="property">rotation</span>.<span class="property">y</span> = time / <span class="number">1000</span>;</span><br><span class="line">  renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">animation</span>();</span><br></pre></td></tr></table></figure><h5 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h5><p><img src="/assets/threejs%E7%AC%AC%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90%E6%95%88%E6%9E%9C.png" alt="threejs第一个例子效果"></p>]]></content>
      
      
      <categories>
          
          <category> Threejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Threejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>openlayers 封装</title>
      <link href="/2022/03/06/Openlayers/%E5%B0%81%E8%A3%85(OOP)/"/>
      <url>/2022/03/06/Openlayers/%E5%B0%81%E8%A3%85(OOP)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Map类</p><p>1、target</p><p>2、layers</p><p>3、view</p><p>4、controls</p><p>5、interactions</p><p>6、overlays</p>]]></content>
      
      
      <categories>
          
          <category> Map(地图) </category>
          
          <category> openlayers </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Map </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Typescript 项目初始化</title>
      <link href="/2022/03/04/React/Typescript%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96/"/>
      <url>/2022/03/04/React/Typescript%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><center><font size="5">从零开始搭建一个React TypeScript项目</font></center><p>最近开始使用 React 和 TypeScript 开发项目了，顺便整理一下 react-ts 项目的创建过程。</p><p>node/npm 这些基本的东西就不再赘述了，没有的自行安装一下。</p><h3 id="全局安装-create-react-app脚手架"><a href="#全局安装-create-react-app脚手架" class="headerlink" title="全局安装 create-react-app脚手架"></a>全局安装 create-react-app脚手架</h3><p>如果很久之前安装过，建议卸载重新安装 npm uninstall -g create-react-app</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g create-react-app</span><br></pre></td></tr></table></figure><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app my-app --template typescript</span><br></pre></td></tr></table></figure><h3 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h3><p>执行npm run eject 放开配置项，个人不是很建议使用craco.config.js；</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run eject</span><br></pre></td></tr></table></figure><h4 id="配置less"><a href="#配置less" class="headerlink" title="配置less"></a>配置less</h4><p>1、安装 less less-loader</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add less less-loader -D</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">npm install less less-loader -D</span><br></pre></td></tr></table></figure><p>2、修改webpack.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// style files regexes</span></span><br><span class="line"><span class="keyword">const</span> cssRegex = <span class="regexp">/\.(css|less)$/</span>; <span class="comment">// 加上less选项</span></span><br><span class="line"><span class="keyword">const</span> cssModuleRegex = <span class="regexp">/\.module\.(css|less)$/</span>; <span class="comment">// 加上less选项</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">webpackEnv</span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">        <span class="attr">extensions</span>: paths.<span class="property">moduleFileExtensions</span></span><br><span class="line">            .<span class="title function_">map</span>(<span class="function"><span class="params">ext</span> =&gt;</span> <span class="string">`.<span class="subst">$&#123;ext&#125;</span>`</span>)</span><br><span class="line">            .<span class="title function_">filter</span>(<span class="function"><span class="params">ext</span> =&gt;</span> useTypeScript || !ext.<span class="title function_">includes</span>(<span class="string">&#x27;ts&#x27;</span>)),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">test</span>: cssRegex,</span><br><span class="line">              <span class="attr">exclude</span>: cssModuleRegex,</span><br><span class="line">              <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(&#123;</span><br><span class="line">                <span class="attr">importLoaders</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">sourceMap</span>: isEnvProduction</span><br><span class="line">                  ? shouldUseSourceMap</span><br><span class="line">                  : isEnvDevelopment,</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="string">&#x27;less-loader&#x27;</span>),  <span class="comment">// 加上 less-loader</span></span><br><span class="line">              <span class="comment">// Don&#x27;t consider CSS imports dead code even if the</span></span><br><span class="line">              <span class="comment">// containing package claims to have no side effects.</span></span><br><span class="line">              <span class="comment">// Remove this when webpack adds a warning or an error for this.</span></span><br><span class="line">              <span class="comment">// See https://github.com/webpack/webpack/issues/6571</span></span><br><span class="line">              <span class="attr">sideEffects</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// Adds support for CSS Modules (https://github.com/css-modules/css-modules)</span></span><br><span class="line">            <span class="comment">// using the extension .module.css</span></span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">test</span>: cssModuleRegex,</span><br><span class="line">              <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(&#123;</span><br><span class="line">                <span class="attr">importLoaders</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">sourceMap</span>: isEnvProduction</span><br><span class="line">                  ? shouldUseSourceMap</span><br><span class="line">                  : isEnvDevelopment,</span><br><span class="line">                <span class="attr">modules</span>: &#123;</span><br><span class="line">                  <span class="attr">getLocalIdent</span>: getCSSModuleLocalIdent,</span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="string">&#x27;less-loader&#x27;</span>),  <span class="comment">//加上 less-loader</span></span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="webpack-进度条"><a href="#webpack-进度条" class="headerlink" title="webpack 进度条"></a>webpack 进度条</h4><p>1、安装 webpackbar</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add webpackbar -D</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">npm install webpackbar -D</span><br></pre></td></tr></table></figure><p>2、修改webpack.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">WebpackBar</span> = <span class="built_in">require</span>(<span class="string">&quot;webpackbar&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">webpackEnv</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">   <span class="attr">plugins</span>:[</span><br><span class="line">       <span class="keyword">new</span> <span class="title class_">WebpackBar</span>(&#123; <span class="attr">profile</span>: <span class="literal">true</span> &#125;),</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="兼容IE-11"><a href="#兼容IE-11" class="headerlink" title="兼容IE 11"></a>兼容IE 11</h4><p>1、安装 @babel/preset-env  @babel/polyfill</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @babel/preset-env @babel/polyfill core-js -S</span><br></pre></td></tr></table></figure><p>2、修改package.json</p><p>修改浏览器配置列表browserslist，将<code>&quot;ie &gt; 8&quot;</code>加到下面两个数组中；</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;production&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;&gt;0.2%&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;not dead&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;not op_mini all&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;ie &gt; 8&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;development&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;last 1 chrome version&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;last 1 firefox version&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;last 1 safari version&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;ie &gt; 8&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>3、添加兼容代码</p><p>src/index.js 或者 src/index.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@babel/polyfill&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;core-js/es/map&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> reportWebVitals <span class="keyword">from</span> <span class="string">&#x27;./reportWebVitals&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line"><span class="title function_">reportWebVitals</span>();</span><br></pre></td></tr></table></figure><p>4、修改webpack.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">//webpack配置</span></span><br><span class="line">    <span class="attr">webpack</span>: &#123;</span><br><span class="line">        <span class="attr">entry</span>: [<span class="string">&quot;@babel/polyfill&quot;</span>, paths.<span class="property">appIndexJs</span>],</span><br><span class="line">        <span class="comment">// 配置别名</span></span><br><span class="line">        <span class="attr">alias</span>: &#123;<span class="comment">//设置别名是为了让后续引用的地方减少路径的复杂度</span></span><br><span class="line">            <span class="string">&quot;@&quot;</span>: path.<span class="title function_">resolve</span>(<span class="string">&quot;src&quot;</span>),</span><br><span class="line">            <span class="string">&quot;@utils&quot;</span>: path.<span class="title function_">resolve</span>(<span class="string">&quot;src/utils&quot;</span>),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5、babel配置</p><p>修改package.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;babel&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    presets<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;react-app&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;@babel/preset-env&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="添加装饰器-decorators"><a href="#添加装饰器-decorators" class="headerlink" title="添加装饰器(decorators)"></a>添加装饰器(decorators)</h3><p>1、安装插件 @babel/plugin-proposal-decorators</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @babel/plugin-proposal-decorators -D</span><br></pre></td></tr></table></figure><p>2、修改package.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;babel&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   plugins<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">     <span class="punctuation">[</span><span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span> legacy<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">   <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="antd按需导入"><a href="#antd按需导入" class="headerlink" title="antd按需导入"></a>antd按需导入</h3><p>style : true  设置为true即是less，当设置为true的时候可能会报错，如下图所示：</p><p><img src="/assets/antd_less.png" alt="antd_less"></p><p>建议使用css style : “css”;</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add babel-plugin-import -D</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">npm install babel-plugin-import -D</span><br></pre></td></tr></table></figure><p>修改package.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;babel&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   plugins<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">[</span></span><br><span class="line">          <span class="string">&quot;import&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;libraryName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;antd&quot;</span><span class="punctuation">,</span></span><br><span class="line">              <span class="attr">&quot;libraryDirectory&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es&quot;</span><span class="punctuation">,</span></span><br><span class="line">              <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;css&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">   <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="antd主题色修改"><a href="#antd主题色修改" class="headerlink" title="antd主题色修改"></a>antd主题色修改</h3><p>1、根目录创建 theme 文件夹，包含一下文件，如下图所示：</p><p><img src="/assets/theme20220305.png" alt="theme20220305"></p><p>2、安装 antd-theme-generator</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add antd-theme-generator -D</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">npm install antd-theme-generator -D</span><br></pre></td></tr></table></figure><p>3、index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; themeVariables &#125; = <span class="built_in">require</span>(<span class="string">&#x27;./themeVariables&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; generateTheme &#125; = <span class="built_in">require</span>(<span class="string">&#x27;antd-theme-generator&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">    <span class="attr">stylesDir</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;../src/styles&#x27;</span>),</span><br><span class="line">    <span class="attr">antDir</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;../node_modules/antd&#x27;</span>),</span><br><span class="line">    <span class="attr">varFile</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;../src/styles/variables.less&#x27;</span>),</span><br><span class="line">    <span class="attr">mainLessFile</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;../src/styles/index.less&#x27;</span>),</span><br><span class="line">    <span class="comment">//需要动态切换的主题变量</span></span><br><span class="line">    themeVariables,</span><br><span class="line">    <span class="attr">indexFileName</span>: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">    <span class="attr">outputFilePath</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;../public/theme/color.less&#x27;</span>) <span class="comment">//页面引入的主题变量文件</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">generateTheme</span>(options).<span class="title function_">then</span>(<span class="function"><span class="params">less</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Theme generated successfully&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Error&#x27;</span>, error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>4、themeVariables.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">themeVariables</span> = [</span><br><span class="line">    <span class="string">&#x27;@primary-color&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@secondary-color&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@text-select&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@text-color-secondary&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@heading-color&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@layout-body-background&#x27;</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>5、在src下面创建 styles</p><p>通用样式放index.less 变量样式 variables.less</p><p>variables.less</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;~antd/lib/style/themes/default.less&#x27;</span>; <span class="comment">//引入antd的变量文件，实现变量的覆盖</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 标题颜色</span></span><br><span class="line"><span class="variable">@title:</span> <span class="number">#1f1f1f</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正文颜色</span></span><br><span class="line"><span class="variable">@text:</span> <span class="number">#3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文字框选颜色</span></span><br><span class="line"><span class="variable">@text-select:</span> <span class="number">#a6d997</span>;</span><br></pre></td></tr></table></figure><p>6、public文件夹</p><p>1).在public下面创建libs，再在libs创建less文件夹将less.js放到less文件夹中，less版本必须为低版本，这里用的v2.7.2  public/libs/less/less.js 版本v2.7.2</p><p>2).修改public/index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;%PUBLIC_URL%/favicon.ico&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;theme-color&quot;</span> <span class="attr">content</span>=<span class="string">&quot;#000000&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;description&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;Web site created using create-react-app&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;apple-touch-icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;%PUBLIC_URL%/logo192.png&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;manifest&quot;</span> <span class="attr">href</span>=<span class="string">&quot;%PUBLIC_URL%/manifest.json&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>来也文旅<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--这里link放在哪，style生成在哪里，注意样式被覆盖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet/less&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/theme/color.less&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// production  development</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="property">less</span> = &#123; <span class="attr">async</span>: <span class="literal">false</span>, <span class="attr">env</span>: <span class="string">&#x27;production&#x27;</span> &#125;;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span>You need to enable JavaScript to run this app.<span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/libs/less/less.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3).在public下面创建 theme文件夹 生成的color.less 会放到该文件夹下面；</p><p>4).修改启动项package.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node theme &amp;&amp; node scripts/start.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node theme &amp;&amp; node scripts/build.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node scripts/test.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>5).在页面中使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">less</span>.<span class="title function_">modifyVars</span>(&#123;</span><br><span class="line">    <span class="string">&quot;@text-select&quot;</span>: <span class="string">&quot;#00ffe7&quot;</span></span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;改变主题失败！！！&quot;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>6).less在修改的时候会将body的样式设置为display:none;导致获取宽高可能出问题，所以我们可以在自定义样式中设置以下样式：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:none !importent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react兼容IE11</title>
      <link href="/2022/02/15/React/react%E5%85%BC%E5%AE%B9/"/>
      <url>/2022/02/15/React/react%E5%85%BC%E5%AE%B9/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><center>react ie9版本以上兼容问题</center><h4 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @babel/preset-env @babel/polyfill -S</span><br></pre></td></tr></table></figure><h4 id="修改package-json"><a href="#修改package-json" class="headerlink" title="修改package.json"></a>修改package.json</h4><p>修改浏览器配置列表browserslist</p><p>将<code>&quot;ie &gt; 8&quot;</code>加到下面两个数组中</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;production&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;&gt;0.2%&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;not dead&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;not op_mini all&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;ie &gt; 8&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;development&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;last 1 chrome version&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;last 1 firefox version&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;last 1 safari version&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;ie &gt; 8&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><h4 id="添加兼容代码"><a href="#添加兼容代码" class="headerlink" title="添加兼容代码"></a>添加兼容代码</h4><p>src/index.js</p><p>必须在index.js中的首行添加兼容导入代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@babel/polyfill&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;core-js/es/map&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> reportWebVitals <span class="keyword">from</span> <span class="string">&#x27;./reportWebVitals&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line"><span class="title function_">reportWebVitals</span>();</span><br></pre></td></tr></table></figure><h4 id="webpack配置"><a href="#webpack配置" class="headerlink" title="webpack配置"></a>webpack配置</h4><p>craco.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">//webpack配置</span></span><br><span class="line">    <span class="attr">webpack</span>: &#123;</span><br><span class="line">        <span class="attr">entry</span>: [<span class="string">&quot;@babel/polyfill&quot;</span>, <span class="string">&quot;./src/index.js&quot;</span>],</span><br><span class="line">        <span class="comment">// 配置别名</span></span><br><span class="line">        <span class="attr">alias</span>: &#123;<span class="comment">//设置别名是为了让后续引用的地方减少路径的复杂度</span></span><br><span class="line">            <span class="string">&quot;@&quot;</span>: path.<span class="title function_">resolve</span>(<span class="string">&quot;src&quot;</span>),</span><br><span class="line">            <span class="string">&quot;@utils&quot;</span>: path.<span class="title function_">resolve</span>(<span class="string">&quot;src/utils&quot;</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// webpack插件</span></span><br><span class="line">        <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">WebpackBar</span>(&#123; <span class="attr">profile</span>: <span class="literal">true</span> &#125;),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">CircularDependencyPlugin</span>(&#123;</span><br><span class="line">                <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                <span class="attr">include</span>: <span class="regexp">/src/</span>,</span><br><span class="line">                <span class="attr">failOnError</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">allowAsyncCycles</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">cwd</span>: process.<span class="title function_">cwd</span>()</span><br><span class="line">            &#125;),</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="babel配置"><a href="#babel配置" class="headerlink" title="babel配置"></a>babel配置</h4><p>craco.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">presets</span>: [</span><br><span class="line">        <span class="string">&quot;@babel/preset-env&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="comment">//支持装饰器</span></span><br><span class="line">        [<span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>, &#123; <span class="attr">legacy</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">        <span class="comment">// antd按需导入</span></span><br><span class="line">        [</span><br><span class="line">            <span class="string">&quot;import&quot;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;libraryName&quot;</span>: <span class="string">&quot;antd&quot;</span>,</span><br><span class="line">                <span class="string">&quot;libraryDirectory&quot;</span>: <span class="string">&quot;es&quot;</span>,</span><br><span class="line">                <span class="string">&quot;style&quot;</span>: <span class="literal">true</span> <span class="comment">//设置为true即是less 这里用的是css</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>craco.config.js</title>
      <link href="/2022/01/28/React/craco-config-js/"/>
      <url>/2022/01/28/React/craco-config-js/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="配置步骤"><a href="#配置步骤" class="headerlink" title="配置步骤"></a>配置步骤</h3><p>1、首先，使用 <code>create-react-app</code> 创建一个项目，这里我们命名为 <code>my-app</code>;</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app my-app</span><br></pre></td></tr></table></figure><p>2、进入项目目录，安装基本依赖</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add antd @craco/craco @babel/plugin-proposal-decorators babel-plugin-import -D</span><br></pre></td></tr></table></figure><p><strong>注意：npm 安装回出现问题，这里建议用yarn进行安装依赖</strong></p><p>3、修改 <code>package.json</code> 中的 <code>scripts</code></p><p>原来的<code>package.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-scripts start&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-scripts build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-scripts test&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>修改后的<code>package.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;craco start&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;craco build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;craco test&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>4、项目根目录创建 <code>craco.config.js</code> 文件</p><p><a href="https://github.com/gsoft-inc/craco/tree/master/packages/craco">craco.config.js官方链接</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; when, whenDev, whenProd, whenTest, <span class="variable constant_">ESLINT_MODES</span>, <span class="variable constant_">POSTCSS_MODES</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;@craco/craco&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">reactScriptsVersion</span>: <span class="string">&quot;react-scripts&quot;</span> <span class="comment">/* (default value) */</span>,</span><br><span class="line">  <span class="attr">style</span>: &#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">      <span class="attr">localIdentName</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">css</span>: &#123;</span><br><span class="line">      <span class="attr">loaderOptions</span>: &#123; <span class="comment">/* Any css-loader configuration options: https://github.com/webpack-contrib/css-loader. */</span> &#125;,</span><br><span class="line">      <span class="attr">loaderOptions</span>: <span class="function">(<span class="params">cssLoaderOptions, &#123; env, paths &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> cssLoaderOptions; &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">sass</span>: &#123;</span><br><span class="line">      <span class="attr">loaderOptions</span>: &#123; <span class="comment">/* Any sass-loader configuration options: https://github.com/webpack-contrib/sass-loader. */</span> &#125;,</span><br><span class="line">      <span class="attr">loaderOptions</span>: <span class="function">(<span class="params">sassLoaderOptions, &#123; env, paths &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> sassLoaderOptions; &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">postcss</span>: &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&quot;extends&quot;</span> <span class="comment">/* (default value) */</span> || <span class="string">&quot;file&quot;</span>,</span><br><span class="line">      <span class="attr">plugins</span>: [<span class="built_in">require</span>(<span class="string">&#x27;plugin-to-append&#x27;</span>)], <span class="comment">// Additional plugins given in an array are appended to existing config.</span></span><br><span class="line">      <span class="attr">plugins</span>: <span class="function">(<span class="params">plugins</span>) =&gt;</span> [<span class="built_in">require</span>(<span class="string">&#x27;plugin-to-prepend&#x27;</span>)].<span class="title function_">concat</span>(plugins), <span class="comment">// Or you may use the function variant.</span></span><br><span class="line">      <span class="attr">env</span>: &#123;</span><br><span class="line">        <span class="attr">autoprefixer</span>: &#123; <span class="comment">/* Any autoprefixer options: https://github.com/postcss/autoprefixer#options */</span> &#125;,</span><br><span class="line">        <span class="attr">stage</span>: <span class="number">3</span>, <span class="comment">/* Any valid stages: https://cssdb.org/#staging-process. */</span></span><br><span class="line">        <span class="attr">features</span>: &#123; <span class="comment">/* Any CSS features: https://preset-env.cssdb.org/features. */</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">loaderOptions</span>: &#123; <span class="comment">/* Any postcss-loader configuration options: https://github.com/postcss/postcss-loader. */</span> &#125;,</span><br><span class="line">      <span class="attr">loaderOptions</span>: <span class="function">(<span class="params">postcssLoaderOptions, &#123; env, paths &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> postcssLoaderOptions; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">eslint</span>: &#123;</span><br><span class="line">    <span class="attr">enable</span>: <span class="literal">true</span> <span class="comment">/* (default value) */</span>,</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&quot;extends&quot;</span> <span class="comment">/* (default value) */</span> || <span class="string">&quot;file&quot;</span>,</span><br><span class="line">    <span class="attr">configure</span>: &#123; <span class="comment">/* Any eslint configuration options: https://eslint.org/docs/user-guide/configuring */</span> &#125;,</span><br><span class="line">    <span class="attr">configure</span>: <span class="function">(<span class="params">eslintConfig, &#123; env, paths &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> eslintConfig; &#125;,</span><br><span class="line">    <span class="attr">pluginOptions</span>: &#123; <span class="comment">/* Any eslint plugin configuration options: https://github.com/webpack-contrib/eslint-webpack-plugin#options. */</span> &#125;,</span><br><span class="line">    <span class="attr">pluginOptions</span>: <span class="function">(<span class="params">eslintOptions, &#123; env, paths &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> eslintOptions; &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">babel</span>: &#123;</span><br><span class="line">    <span class="attr">presets</span>: [],</span><br><span class="line">    <span class="attr">plugins</span>: [],</span><br><span class="line">    <span class="attr">loaderOptions</span>: &#123; <span class="comment">/* Any babel-loader configuration options: https://github.com/babel/babel-loader. */</span> &#125;,</span><br><span class="line">    <span class="attr">loaderOptions</span>: <span class="function">(<span class="params">babelLoaderOptions, &#123; env, paths &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> babelLoaderOptions; &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">typescript</span>: &#123;</span><br><span class="line">    <span class="attr">enableTypeChecking</span>: <span class="literal">true</span> <span class="comment">/* (default value)  */</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">webpack</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">plugins</span>: &#123;</span><br><span class="line">      <span class="attr">add</span>: [], <span class="comment">/* An array of plugins */</span></span><br><span class="line">      <span class="attr">add</span>: [</span><br><span class="line">        plugin1,</span><br><span class="line">        [plugin2, <span class="string">&quot;append&quot;</span>],</span><br><span class="line">        [plugin3, <span class="string">&quot;prepend&quot;</span>], <span class="comment">/* Specify if plugin should be appended or prepended */</span></span><br><span class="line">      ], <span class="comment">/* An array of plugins */</span></span><br><span class="line">      <span class="attr">remove</span>: [],  <span class="comment">/* An array of plugin constructor&#x27;s names (i.e. &quot;StyleLintPlugin&quot;, &quot;ESLintWebpackPlugin&quot; ) */</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">configure</span>: &#123; <span class="comment">/* Any webpack configuration options: https://webpack.js.org/configuration */</span> &#125;,</span><br><span class="line">    <span class="attr">configure</span>: <span class="function">(<span class="params">webpackConfig, &#123; env, paths &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> webpackConfig; &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">jest</span>: &#123;</span><br><span class="line">    <span class="attr">babel</span>: &#123;</span><br><span class="line">      <span class="attr">addPresets</span>: <span class="literal">true</span>, <span class="comment">/* (default value) */</span></span><br><span class="line">      <span class="attr">addPlugins</span>: <span class="literal">true</span>  <span class="comment">/* (default value) */</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">configure</span>: &#123; <span class="comment">/* Any Jest configuration options: https://jestjs.io/docs/en/configuration */</span> &#125;,</span><br><span class="line">    <span class="attr">configure</span>: <span class="function">(<span class="params">jestConfig, &#123; env, paths, resolve, rootDir &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> jestConfig; &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">devServer</span>: &#123; <span class="comment">/* Any devServer configuration options: https://webpack.js.org/configuration/dev-server/#devserver */</span> &#125;,</span><br><span class="line">  <span class="attr">devServer</span>: <span class="function">(<span class="params">devServerConfig, &#123; env, paths, proxy, allowedHost &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> devServerConfig; &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">plugin</span>: &#123;</span><br><span class="line">        <span class="attr">overrideCracoConfig</span>: <span class="function">(<span class="params">&#123; cracoConfig, pluginOptions, context: &#123; env, paths &#125; &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> cracoConfig; &#125;,</span><br><span class="line">        <span class="attr">overrideWebpackConfig</span>: <span class="function">(<span class="params">&#123; webpackConfig, cracoConfig, pluginOptions, context: &#123; env, paths &#125; &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> webpackConfig; &#125;,</span><br><span class="line">        <span class="attr">overrideDevServerConfig</span>: <span class="function">(<span class="params">&#123; devServerConfig, cracoConfig, pluginOptions, context: &#123; env, paths, proxy, allowedHost &#125; &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> devServerConfig; &#125;,</span><br><span class="line">        <span class="attr">overrideJestConfig</span>: <span class="function">(<span class="params">&#123; jestConfig, cracoConfig, pluginOptions, context: &#123; env, paths, resolve, rootDir &#125; &#125;</span>) =&gt;</span> &#123; <span class="keyword">return</span> jestConfig &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">options</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="配置webpack"><a href="#配置webpack" class="headerlink" title="配置webpack"></a>配置webpack</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">   <span class="attr">webpack</span>: &#123;<span class="comment">//webpack配置</span></span><br><span class="line">    <span class="comment">// 配置别名</span></span><br><span class="line">    <span class="attr">alias</span>: &#123;<span class="comment">//设置别名是为了让后续引用的地方减少路径的复杂度</span></span><br><span class="line">      <span class="string">&quot;@&quot;</span>: path.<span class="title function_">resolve</span>(<span class="string">&quot;src&quot;</span>),</span><br><span class="line">      <span class="string">&quot;@utils&quot;</span>: path.<span class="title function_">resolve</span>(<span class="string">&quot;src/utils&quot;</span>),</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="安装webpack插件"><a href="#安装webpack插件" class="headerlink" title="安装webpack插件"></a>安装webpack插件</h4><p>安装插件 WebpackBar 打包进度条</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add webpackbar -D</span><br></pre></td></tr></table></figure><p>安装插件 circular-dependency-plugin依赖插件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add circular-dependency-plugin -D</span><br></pre></td></tr></table></figure><h4 id="配置插件"><a href="#配置插件" class="headerlink" title="配置插件"></a>配置插件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">WebpackBar</span> = <span class="built_in">require</span>(<span class="string">&quot;webpackbar&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CircularDependencyPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;circular-dependency-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// webpack配置</span></span><br><span class="line">  <span class="attr">webpack</span>: &#123;</span><br><span class="line">    <span class="comment">// 配置别名，设置别名是为了让后续引用的地方减少路径的复杂度</span></span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&quot;@&quot;</span>: path.<span class="title function_">resolve</span>(<span class="string">&quot;src&quot;</span>),</span><br><span class="line">      <span class="string">&quot;@utils&quot;</span>: path.<span class="title function_">resolve</span>(<span class="string">&quot;src/utils&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// webpack插件</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">WebpackBar</span>(&#123; <span class="attr">profile</span>: <span class="literal">true</span> &#125;),</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CircularDependencyPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">include</span>: <span class="regexp">/src/</span>,</span><br><span class="line">        <span class="attr">failOnError</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">allowAsyncCycles</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">cwd</span>: process.<span class="title function_">cwd</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="配置babel"><a href="#配置babel" class="headerlink" title="配置babel"></a>配置babel</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">babel</span>: &#123;</span><br><span class="line">    <span class="attr">presets</span>: [<span class="string">&quot;@babel/preset-env&quot;</span>],</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      <span class="comment">//支持装饰器</span></span><br><span class="line">      [<span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>, &#123; <span class="attr">legacy</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">      <span class="comment">// antd按需导入</span></span><br><span class="line">      [</span><br><span class="line">        <span class="string">&quot;import&quot;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;libraryName&quot;</span>: <span class="string">&quot;antd&quot;</span>,</span><br><span class="line">          <span class="string">&quot;libraryDirectory&quot;</span>: <span class="string">&quot;es&quot;</span>,</span><br><span class="line">          <span class="string">&quot;style&quot;</span>: <span class="string">&#x27;css&#x27;</span> <span class="comment">//设置为true即是less 这里用的是css</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="配置module-loader"><a href="#配置module-loader" class="headerlink" title="配置module(loader)"></a>配置module(loader)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [ <span class="comment">//规则，在写style.module.scss的时候发现引入后缀为.scss会报错，在这里配置一下即可</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/.scss$/</span>,</span><br><span class="line">        <span class="attr">loaders</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>],</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="配置devServer"><a href="#配置devServer" class="headerlink" title="配置devServer"></a>配置devServer</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">8888</span>,</span><br><span class="line">    <span class="comment">// 配置代理解决跨域</span></span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&quot;/api&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://XXXXXXXX:8888&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="craco插件"><a href="#craco插件" class="headerlink" title="craco插件"></a>craco插件</h3><h4 id="less支持"><a href="#less支持" class="headerlink" title="less支持"></a>less支持</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add less less-loader craco-less -D</span><br></pre></td></tr></table></figure><h4 id="配置less"><a href="#配置less" class="headerlink" title="配置less"></a>配置less</h4><p>craco.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">CracoLessPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;craco-less&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">plugin</span>: <span class="title class_">CracoLessPlugin</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">lessLoaderOptions</span>: &#123;</span><br><span class="line">          <span class="attr">lessOptions</span>: &#123;</span><br><span class="line">            <span class="attr">modifyVars</span>: &#123;&#125;,</span><br><span class="line">            <span class="attr">javascriptEnabled</span>: <span class="literal">true</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="最终craco-config-js"><a href="#最终craco-config-js" class="headerlink" title="最终craco.config.js"></a>最终craco.config.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">WebpackBar</span> = <span class="built_in">require</span>(<span class="string">&quot;webpackbar&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CircularDependencyPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;circular-dependency-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CracoLessPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;craco-less&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// webpack配置</span></span><br><span class="line">  <span class="attr">webpack</span>: &#123;</span><br><span class="line">    <span class="comment">// 配置别名，设置别名是为了让后续引用的地方减少路径的复杂度</span></span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&quot;@&quot;</span>: path.<span class="title function_">resolve</span>(<span class="string">&quot;src&quot;</span>),</span><br><span class="line">      <span class="string">&quot;@utils&quot;</span>: path.<span class="title function_">resolve</span>(<span class="string">&quot;src/utils&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// webpack插件</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">WebpackBar</span>(&#123; <span class="attr">profile</span>: <span class="literal">true</span> &#125;),</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CircularDependencyPlugin</span>(&#123;</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">include</span>: <span class="regexp">/src/</span>,</span><br><span class="line">        <span class="attr">failOnError</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">allowAsyncCycles</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">cwd</span>: process.<span class="title function_">cwd</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">babel</span>: &#123;</span><br><span class="line">    <span class="attr">presets</span>: [<span class="string">&quot;@babel/preset-env&quot;</span>],</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      <span class="comment">//支持装饰器</span></span><br><span class="line">      [<span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>, &#123; <span class="attr">legacy</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">      <span class="comment">// antd按需导入</span></span><br><span class="line">      [</span><br><span class="line">        <span class="string">&quot;import&quot;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;libraryName&quot;</span>: <span class="string">&quot;antd&quot;</span>,</span><br><span class="line">          <span class="string">&quot;libraryDirectory&quot;</span>: <span class="string">&quot;es&quot;</span>,</span><br><span class="line">          <span class="string">&quot;style&quot;</span>: <span class="string">&#x27;css&#x27;</span> <span class="comment">//设置为true即是less 这里用的是css</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [ <span class="comment">//规则，在写style.module.scss的时候发现引入后缀为.scss会报错，在这里配置一下即可</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/.scss$/</span>,</span><br><span class="line">        <span class="attr">loaders</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>],</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">8888</span>,</span><br><span class="line">    <span class="comment">// 配置代理解决跨域</span></span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&quot;/api&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://XXXXXXXX:8888&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// 配置less支持</span></span><br><span class="line">      <span class="attr">plugin</span>: <span class="title class_">CracoLessPlugin</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">lessLoaderOptions</span>: &#123;</span><br><span class="line">          <span class="attr">lessOptions</span>: &#123;</span><br><span class="line">            <span class="attr">modifyVars</span>: &#123;&#125;,</span><br><span class="line">            <span class="attr">javascriptEnabled</span>: <span class="literal">true</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>词法作用域和动态作用域</title>
      <link href="/2022/01/27/JavaScript/%E4%BD%9C%E7%94%A8%E5%9F%9F/"/>
      <url>/2022/01/27/JavaScript/%E4%BD%9C%E7%94%A8%E5%9F%9F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p>作用域是指程序源代码中定义变量的区域。</p><p>作用域规定了如何查找变量，也就是确定当前执行代码对变量的访问权限。</p><p>JavaScript 采用词法作用域(lexical scoping)，也就是静态作用域。</p><h3 id="静态作用域"><a href="#静态作用域" class="headerlink" title="静态作用域"></a>静态作用域</h3><p><strong>静态作用域</strong>又叫做词法作用域，采用词法作用域的变量叫<strong>词法变量</strong>。词法变量有一个在编译时静态确定的作用域。词法变量的作用域可以是一个函数或一段代码，该变量在这段代码区域内可见（visibility）；在这段区域以外该变量不可见（或无法访问）。词法作用域里，取变量的值时，会检查函数定义时的文本环境，捕捉函数定义时对该变量的绑定。</p><p>大多数现在程序设计语言都是采用静态作用域规则，如<a href="https://zh.wikipedia.org/wiki/C/C%2B%2B">C/C++</a>、<a href="https://zh.wikipedia.org/wiki/C%E2%99%AF">C#</a>、<a href="https://zh.wikipedia.org/wiki/Python">Python</a>、<a href="https://zh.wikipedia.org/wiki/Java">Java</a>、<a href="https://zh.wikipedia.org/wiki/JavaScript">JavaScript</a>……</p><h3 id="动态作用域"><a href="#动态作用域" class="headerlink" title="动态作用域"></a>动态作用域</h3><p><strong>动态作用域</strong>的变量叫做<strong>动态变量</strong>。只要程序正在执行定义了动态变量的代码段，那么在这段时间内，该变量一直存在；代码段执行结束，该变量便消失。这意味着如果有个函数<code>f</code>，里面调用了函数<code>g</code>，那么在执行<code>g</code>的时候，<code>f</code>里的所有局部变量都会被<code>g</code>访问到。而在静态作用域的情况下，<code>g</code>不能访问<code>f</code>的变量。动态作用域里，取变量的值时，会由内向外逐层检查函数的调用链，并打印第一次遇到的那个绑定的值。显然，最外层的绑定即是全局状态下的那个值。采用动态作用域的语言有<a href="https://zh.wikipedia.org/wiki/Pascal">Pascal</a>、<a href="https://zh.wikipedia.org/wiki/Emacs_Lisp">Emacs Lisp</a>、<a href="https://zh.wikipedia.org/wiki/Common_Lisp">Common Lisp</a>（兼有静态作用域）、<a href="https://zh.wikipedia.org/wiki/Perl">Perl</a>（兼有静态作用域）。C/C++是静态作用域语言，但在宏中用到的名字，也是动态作用域。</p><h2 id="静态作用域与动态作用域"><a href="#静态作用域与动态作用域" class="headerlink" title="静态作用域与动态作用域"></a>静态作用域与动态作用域</h2><p>因为 JavaScript 采用的是词法作用域，函数的作用域在函数定义的时候就决定了。</p><p>而与词法作用域相对的是动态作用域，函数的作用域是在函数调用的时候才决定的。</p><p>让我们认真看个例子就能明白之间的区别：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="number">2</span>;</span><br><span class="line">  <span class="title function_">foo</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">bar</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果是 ???</span></span><br></pre></td></tr></table></figure><p>假设 JavaScript 采用静态作用域，让我们分析下执行过程：</p><p>执行 foo 函数，先从 foo 函数内部查找是否有局部变量 value，如果没有，就根据书写的位置，查找上面一层的代码，也就是 value 等于 1，所以结果会打印 1。</p><p>假设 JavaScript 采用动态作用域，让我们分析下执行过程：</p><p>执行 foo 函数，依然是从 foo 函数内部查找是否有局部变量 value。如果没有，就从调用函数的作用域，也就是 bar 函数内部查找 value 变量，所以结果会打印 2。</p><p>前面我们已经说了，JavaScript 采用的是静态作用域，所以这个例子的结果是 1。</p><h2 id="动态作用域-1"><a href="#动态作用域-1" class="headerlink" title="动态作用域"></a>动态作用域</h2><p>也许你会好奇什么语言是动态作用域？</p><p>bash 就是动态作用域，不信的话，把下面的脚本存成例如 scope.bash，然后进入相应的目录，用命令行执行 <code>bash ./scope.bash</code>，看看打印的值是多少。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">value=<span class="number">1</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span> (<span class="params"></span>) &#123;</span><br><span class="line">    echo $value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bar</span> (<span class="params"></span>) &#123;</span><br><span class="line">    local value=<span class="number">2</span>;</span><br><span class="line">    foo;</span><br><span class="line">&#125;</span><br><span class="line">bar</span><br></pre></td></tr></table></figure><p>这个文件也可以在 <a href="https://github.com/mqyqingfeng/Blog/blob/master/demos/scope/scope.bash">Github 博客仓库</a>中找到。</p><h2 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a>思考题</h2><p>最后，让我们看一个《JavaScript 权威指南》中的例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scope = <span class="string">&#x27;global scope&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkscope</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> scope = <span class="string">&#x27;local scope&#x27;</span>;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> scope;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">f</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">checkscope</span>();</span><br><span class="line"><span class="keyword">var</span> scope = <span class="string">&#x27;global scope&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkscope</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> scope = <span class="string">&#x27;local scope&#x27;</span>;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> scope;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">checkscope</span>()();</span><br></pre></td></tr></table></figure><p>猜猜两段代码各自的执行结果是多少？</p><p>这里直接告诉大家结果，两段代码都会打印：<code>local scope</code>。</p><p>原因也很简单，因为 JavaScript 采用的是词法作用域，函数的作用域基于函数创建的位置。</p><p>而引用《JavaScript 权威指南》的回答就是：</p><p>JavaScript 函数的执行用到了作用域链，这个作用域链是在函数定义的时候创建的。嵌套的函数 f() 定义在这个作用域链里，其中的变量 scope 一定是局部变量，不管何时何地执行函数 f()，这种绑定在执行 f() 时依然有效。</p><p>但是在这里真正想让大家思考的是：</p><p>虽然两段代码执行的结果一样，但是两段代码究竟有哪些不同呢？请去查看<a href="http://www.zhqiu.cn/2022/01/14/JavaScript%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6/">JavaScript 执行机制</a>这篇文章；</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript参数理解（如果参数是引用对象）</title>
      <link href="/2022/01/26/JavaScript/JavaScript%E5%8F%82%E6%95%B0%E7%90%86%E8%A7%A3/"/>
      <url>/2022/01/26/JavaScript/JavaScript%E5%8F%82%E6%95%B0%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="一道JavaScript题引出的关于JavaScript的函数参数问题？"><a href="#一道JavaScript题引出的关于JavaScript的函数参数问题？" class="headerlink" title="一道JavaScript题引出的关于JavaScript的函数参数问题？"></a>一道JavaScript题引出的关于JavaScript的函数参数问题？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">a</span>)&#123;</span><br><span class="line">  a[<span class="number">100</span>] = <span class="number">3</span></span><br><span class="line">  a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f</span>(a)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure><p>执行到 a[100] = 3这行代码的时候，a的值为(101) [1, empty × 99, 3] ，此时参数地址和全局变量地址一样，如下图：</p><p><img src="/assets/image-20220126170031286.png" alt="image-20220126170031286"></p><p>当执行a = [1,2,3]，此时参数的地址发生变化如下图：</p><p><img src="/assets/image-20220126170442812.png" alt="image-20220126170442812"></p><p>全局变量a的地址还是之前的地址（<strong>0x200007a4</strong>）其值为[1, empty × 99, 3]，但是f函数执行上下文中的a地址变成了<strong>0x200007a6</strong>，其值为[1, 2, 3]；所以最后在全局打印的时候打印的是[1, empty × 99, 3]；</p><p><strong>总结：<font color="red">参数变量只会影响函数作用域，而不会影响全局作用域<font color="blue">(引用类型在不改变引用的情况下会影响该变量)</font>，而且随着局部作用域的消失而消失；</font></strong></p><h3 id="参数类型"><a href="#参数类型" class="headerlink" title="参数类型"></a>参数类型</h3><ul><li>基本类型</li><li>引用类型</li><li>函数类型(该类型包含在引用类型中，因其特殊性将其单独拎出来)</li></ul><h4 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h4><p>基本类型存储在栈内存（stack）中的简单数据段，也就是说，它们的值直接存储在变量访问的位置，参数会直接将值接收到，从而不会影响传入的值。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">a</span>)&#123;</span><br><span class="line">  a = <span class="number">2</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 打印的是2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f</span>(a)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 打印的是1</span></span><br></pre></td></tr></table></figure><h4 id="引用类型"><a href="#引用类型" class="headerlink" title="引用类型"></a>引用类型</h4><p>引用类型存储在堆内存（heap）中的对象，也就是说，存储在变量处的值是一个指针，指向堆中的对象，所以在参数中如果改变了该参数的引用，该参数的修改或者赋值就和原来传入进来的值没有任何关系了，这就是上面题所出现的问题。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">a</span>)&#123;</span><br><span class="line">  a[<span class="number">100</span>] = <span class="number">3</span></span><br><span class="line">  a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 打印的是[1,2,3]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f</span>(a)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 打印的是[1, empty × 99, 3]</span></span><br></pre></td></tr></table></figure><h4 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h4><p>将函数作为参数进行值的传递，我们将这种方式称之为回调函数，关于回调函数后面会单独讲解一次。</p><h3 id="默认参数值"><a href="#默认参数值" class="headerlink" title="默认参数值"></a>默认参数值</h3><p><strong>函数默认参数</strong>允许在没有值或<code>undefined</code>被传入时使用默认形参。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">multiply</span>(<span class="params">a, b = <span class="number">1</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">multiply</span>(<span class="number">5</span>, <span class="number">2</span>));</span><br><span class="line"><span class="comment">// expected output: 10</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">multiply</span>(<span class="number">5</span>));</span><br><span class="line"><span class="comment">// expected output: 5</span></span><br></pre></td></tr></table></figure><h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><blockquote><p>function [name]([param1[ = defaultValue1 ][, …, paramN[ = defaultValueN ]]]) {<br>    statements<br>}</p></blockquote><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>JavaScript 中函数的参数默认是<code>undefined</code>。然而，在某些情况下可能需要设置一个不同的默认值。这是默认参数可以帮助的地方。</p><p>以前，一般设置默认参数的方法是在函数体测试参数是否为<code>undefined</code>，如果是的话就设置为默认的值。</p><p>下面的例子中，如果在调用<code>multiply</code>时，参数<code>b</code>的值没有提供，那么它的值就为<code>undefined</code>。如果直接执行<code>a * b</code>，函数会返回 <code>NaN</code>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">multiply</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">multiply</span>(<span class="number">5</span>, <span class="number">2</span>); <span class="comment">// 10</span></span><br><span class="line"><span class="title function_">multiply</span>(<span class="number">5</span>);    <span class="comment">// NaN !</span></span><br></pre></td></tr></table></figure><h3 id="Arguments对象"><a href="#Arguments对象" class="headerlink" title="Arguments对象"></a>Arguments对象</h3><p><strong><code>arguments</code></strong> 是一个对应于传递给函数的参数的类数组对象，<code>arguments</code>对象不是一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a> 。它类似于<code>Array</code>，但除了length属性和索引元素之外没有任何<code>Array</code>属性。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">func1</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>[<span class="number">0</span>]);</span><br><span class="line">  <span class="comment">// expected output: 1</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>[<span class="number">1</span>]);</span><br><span class="line">  <span class="comment">// expected output: 2</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>[<span class="number">2</span>]);</span><br><span class="line">  <span class="comment">// expected output: 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">func1</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure><blockquote><p>注意：</p><p>1、如果您正在编写与 ES6 兼容的代码，则应首选使用剩余参数。</p><p>2、“类数组”意味着参数具有长度属性和从零开始索引的属性，但它没有数组的内置方法，如 forEach() 和 map()。 如要使用数组的方法需要将其转换成数组。</p></blockquote><h3 id="剩余参数"><a href="#剩余参数" class="headerlink" title="剩余参数"></a>剩余参数</h3><p><strong>剩余参数</strong>语法允许我们将一个不定数量的参数表示为一个数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">...theArgs</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> theArgs.<span class="title function_">reduce</span>(<span class="function">(<span class="params">previous, current</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> previous + current;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line"><span class="comment">// expected output: 6</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br><span class="line"><span class="comment">// expected output: 10</span></span><br></pre></td></tr></table></figure><h4 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h4><blockquote><p>function(a, b, …theArgs) {<br>  // …<br>}</p></blockquote><h4 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h4><p>如果函数的最后一个命名参数以<code>...</code>为前缀，则它将成为一个由剩余参数组成的真数组，其中从<code>0</code>（包括）到<code>theArgs.length</code>（排除）的元素由传递给函数的实际参数提供。</p><p>在上面的例子中，<code>theArgs</code>将收集该函数的第三个参数（因为第一个参数被映射到<code>a</code>，而第二个参数映射到<code>b</code>）和所有后续参数。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Rest_parameters#%E5%89%A9%E4%BD%99%E5%8F%82%E6%95%B0%E5%92%8C_arguments%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8C%BA%E5%88%AB">剩余参数和 <code>arguments</code>对象的区别</a></p><p>剩余参数和 <code>arguments</code>对象之间的区别主要有三个：</p><ul><li>剩余参数只包含那些没有对应形参的实参，而 <code>arguments</code> 对象包含了传给函数的所有实参。</li><li><code>arguments</code>对象不是一个真正的数组，而剩余参数是真正的 <code>Array</code>实例，也就是说你能够在它上面直接使用所有的数组方法，比如 <code>sort</code>，<code>map</code>，<code>forEach</code>或<code>pop</code>。</li><li><code>arguments</code>对象还有一些附加的属性 （如<code>callee</code>属性）。</li></ul><h3 id="解构剩余参数"><a href="#解构剩余参数" class="headerlink" title="解构剩余参数"></a>解构剩余参数</h3><p>剩余参数可以被解构，这意味着他们的数据可以被解包到不同的变量中。请参阅<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">解构赋值</a>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">...[a, b, c]</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>(<span class="number">1</span>)          <span class="comment">// NaN (b and c are undefined)</span></span><br><span class="line"><span class="title function_">f</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)    <span class="comment">// 6</span></span><br><span class="line"><span class="title function_">f</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>) <span class="comment">// 6 (the fourth parameter is not destructured)</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>28个辅助学习网站</title>
      <link href="/2022/01/25/%E5%89%8D%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99/"/>
      <url>/2022/01/25/%E5%89%8D%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>今天来给大家推荐28个辅助你学习巩固知识的网站，让你边玩边学边记！</p><p>本文大致的目录结构如下：</p><ul><li>CSS相关的学习网站</li><li>JavaScript相关的学习网站</li><li>其它学习网站</li></ul><p>因为这些网站大多都是国外的大佬们做的，所以网页大多都是英文，为了更好地使用，给你们推荐两个翻译的方式：</p><ul><li>使用Chrome浏览器自带的翻译功能，可以中英随意切换</li></ul><p><img src="/assets/chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%B8%A6%E7%9A%84%E7%BF%BB%E8%AF%91%E5%8A%9F%E8%83%BD.png" alt="chrome浏览器自带的翻译功能"></p><ul><li>下一个<code>&quot;Google 翻译&quot;</code>插件，遇到不懂的英文直接选中点击翻译即可插件划词翻译</li></ul><p><img src="/assets/%E6%8F%92%E4%BB%B6%E5%88%92%E8%AF%8D%E7%BF%BB%E8%AF%91.jpg" alt="插件划词翻译"></p><p>好了，希望英文的存在不要成为你学习的障碍（更重要的还是要私底下多背单词，提升自己的英语水平，毕竟程序员免不了看英文文档）</p><h2 id="一、CSS学习网站"><a href="#一、CSS学习网站" class="headerlink" title="一、CSS学习网站"></a>一、CSS学习网站</h2><h3 id="1-Flex-Box-冒险游戏"><a href="#1-Flex-Box-冒险游戏" class="headerlink" title="1. Flex Box 冒险游戏"></a>1. Flex Box 冒险游戏</h3><p>网址：<strong>Flex Box 冒险游戏</strong>[1]</p><p>简介：这是一个通过使用 <code>flex box</code> 相关知识来完成闯关的冒险游戏，一共24个关卡，更生动地带你体验 <code>Flex</code> 的真实应用场景</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21Z8BVibvkEed0TYATPtibxicgq6brHCtpBFRuibhkNvJiafTzCR14II8nVqw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">Flex Box 冒险游戏</p><h3 id="2-Flexbox-格子骑士"><a href="#2-Flexbox-格子骑士" class="headerlink" title="2. Flexbox 格子骑士"></a>2. Flexbox 格子骑士</h3><p>网址：<strong>Flexbox 格子骑士</strong>[2]</p><p>简介：这个游戏能帮助你学习不同层面的<code>Flex Box</code>规范，一共有18个关卡，并且你在该游戏中写CSS类时，不是用原生写的，而是用Tailwind，一举两得，技能学习Flex，又能学习Tailwind</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片">Flexbox 格子骑士</p><h3 id="3-Flex-Box-青蛙"><a href="#3-Flex-Box-青蛙" class="headerlink" title="3. Flex Box 青蛙"></a>3. Flex Box 青蛙</h3><p>网址：<strong>Flex Box 青蛙</strong>[3]</p><p>简介：游戏中每个青蛙对应不同的关卡难度，每个难度对应着Flex相关的知识点</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片"></p><p>Flex Box 青蛙</p><h3 id="4-Flex-Box-打僵尸"><a href="#4-Flex-Box-打僵尸" class="headerlink" title="4. Flex Box 打僵尸"></a>4. Flex Box 打僵尸</h3><p>网址：<strong>Flex Box 打僵尸</strong>[4]</p><p>简介：这是个学习Flex语法的游戏，每一关会有一个打僵尸的情节，并给你输送一个 Flex 相关知识，你可以用该知识进行游戏的存活</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn214GFemvNfzY3y8WglKkFyiaWbfH9rPKGNDEt5Z9UhUrb1uyvyqb6TK0A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">Flex Box 打僵尸</p><h3 id="5-Flex-Box-保卫战"><a href="#5-Flex-Box-保卫战" class="headerlink" title="5. Flex Box 保卫战"></a>5. Flex Box 保卫战</h3><p>网址：<strong>Flex Box 保卫战</strong>[5]</p><p>简介：这是一款塔防战略游戏，它教会你使用 Flexbox 语法来阻止敌人越过你的防线。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21PgaSmyPqfkfWlTNqAibXXIqb0g0fEgN6DacoeAGeN1kQCcSoRQQ03cw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">Flex Box 保卫战</p><h3 id="6-Flex语法操纵台"><a href="#6-Flex语法操纵台" class="headerlink" title="6. Flex语法操纵台"></a>6. Flex语法操纵台</h3><p>网址：<strong>Flex语法操纵台</strong>[6]</p><p>简介：该网站给你提供了一个完整的Flex语法修改的操作区，让你随心所欲地尝试Flex语法</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片"></p><p>Flex语法操纵台</p><h3 id="7-Grid-花园"><a href="#7-Grid-花园" class="headerlink" title="7. Grid 花园"></a>7. Grid 花园</h3><p>网址：<strong>Grid 花园</strong>[7]</p><p>简介：这款游戏包括28个不同的关卡，致力于教会你 CSS Grid 布局</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21QImPgs3n0VyygmSiahpL3hsic8zVcdSppAr4ia2IsBOMDB3oeHNghG7yQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">Grid 花园</p><h3 id="8-CSS-Grid-备忘清单"><a href="#8-CSS-Grid-备忘清单" class="headerlink" title="8. CSS Grid 备忘清单"></a>8. CSS Grid 备忘清单</h3><p>网址：<strong>CSS Grid 备忘清单</strong>[8]</p><p>简介：这是一个可视化和交互式的备忘清单，能帮助你理解 CSS Grid。在右侧网格中选择一个框，然后使用左边栏中的选项和设置来调整网格布局的不同部分。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21RwQDibqkQIHj3wQBlbZVtraWqY41JpaibgNT2PaGUSs8Dq6FT63dwJibA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">CSS Grid 备忘清单</p><h3 id="9-Grid-攻击"><a href="#9-Grid-攻击" class="headerlink" title="9. Grid 攻击"></a>9. Grid 攻击</h3><p>网址：<strong>Grid 攻击</strong>[9]</p><p>简介：该游戏包含80个关卡，带你体验类似真实场景下的网格布局情况</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21AwRmyKJ1hovBUzBoZzj35iceP9eVFPs0ibxbwCwCw65iaWb90cHXrsQIA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">Grid 攻击</p><h3 id="10-CSS-选择器备忘清单"><a href="#10-CSS-选择器备忘清单" class="headerlink" title="10. CSS 选择器备忘清单"></a>10. CSS 选择器备忘清单</h3><p>网址：<strong>CSS 选择器备忘清单</strong>[10]</p><p>简介：该网站是用来测试你对 CSS 选择器的理解。前面的几个相当简单，但是随着进入更高级的选择器(如使用较少的伪类) ，练习的难度会增加。</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片">CSS 选择器备忘清单</p><h3 id="11-CSS-动画"><a href="#11-CSS-动画" class="headerlink" title="11. CSS 动画"></a>11. CSS 动画</h3><p>网址：<strong>CSS 动画</strong>[11]</p><p>简介：该网站是一个功能齐全的学习和测试不同 CSS 动画规范的平台。总共32个部分的课程，有很多预先建立的图形，在课程中用作动画的基础，非常有趣的带我们学习了 <code>keyframe</code> 动画</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21BGGtIO1x9gGPskMCdibozlhXVhUyTTatff7rVvH4RIchZrHUtAW6ONg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">CSS 动画</p><h3 id="12-混合滤镜"><a href="#12-混合滤镜" class="headerlink" title="12. 混合滤镜"></a>12. 混合滤镜</h3><p>网址：<strong>混合滤镜</strong>[12]</p><p>简介：它允许您使用 CSS 的<code>mix-blend-mode</code>、<code>background-blend-mode</code>和<code>filter</code>。你可以在图层中添加一个或多个你自己的图片，同时添加一个背景颜色，然后调整设置，看看不同的值效果如何</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21MyuR7txErWsnVdV9RsKYbd3j7rZLYwEdNHXMuqA47dVLfabRWAafCw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">混合滤镜</p><h3 id="13-CSS晚餐"><a href="#13-CSS晚餐" class="headerlink" title="13. CSS晚餐"></a>13. CSS晚餐</h3><p>网址：<strong>CSS晚餐</strong>[13]</p><p>简介：这个网站对于 CSS 初学者或者那些不熟悉高级 CSS 选择器的人来说是很好的。它允许你随意使用 CSS 选择器，并且能看到dom和css的具体情况，这样你就可以看到图像和css代码之间的关系。</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片">CSS晚餐</p><h2 id="二、JavaScript学习网站"><a href="#二、JavaScript学习网站" class="headerlink" title="二、JavaScript学习网站"></a>二、JavaScript学习网站</h2><h3 id="1-TypeScript-练习"><a href="#1-TypeScript-练习" class="headerlink" title="1. TypeScript 练习"></a>1. TypeScript 练习</h3><p>网址：<strong>TypeScript 练习</strong>[14]</p><p>简介：这是一个在线的ts练习网站，可以练习使用ts的特性，适合入门以及进阶的同学</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片">TypeScript 练习</p><h3 id="2-设计模式游戏"><a href="#2-设计模式游戏" class="headerlink" title="2. 设计模式游戏"></a>2. 设计模式游戏</h3><p>网址：<strong>设计模式游戏</strong>[15]</p><p>简介：专门为懂js但从没学过JavaScript设计模式的同学设计的网站</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21UH6NLialP5bsKicGCvojK61AuSbxVb5w9sEuSRbRWBmw55aiaMpMhLyCw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">设计模式游戏</p><h3 id="3-React-教程"><a href="#3-React-教程" class="headerlink" title="3. React 教程"></a>3. React 教程</h3><p>网址：<strong>React 教程</strong>[16]</p><p>简介：现在有很多地方可以学习react，但此次推荐的这个网站也是一个很不错的选择，这个网站的独特的地方在于它是从一些 JavaScript 概念开始的，这些概念对于理解它们很重要，以便更有效地学习理解 React。此外，页内编辑器还提供代码补全提示功能</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片">React 教程</p><h3 id="4-Untrusted"><a href="#4-Untrusted" class="headerlink" title="4. Untrusted"></a>4. Untrusted</h3><p>网址：<strong>Untrusted</strong>[17]</p><p>简介：这是一个 JavaScript 的冒险游戏，你必须引导一个名叫 Eval 博士的角色穿越不同的迷宫。您可以通过更改和重新执行当前挑战中使用的代码来完成任务，锻炼你js能力的时候到了</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片">Untrusted</p><h3 id="5-Promisees"><a href="#5-Promisees" class="headerlink" title="5. Promisees"></a>5. Promisees</h3><p>网址：<strong>Promisees</strong>[18]</p><p>简介：该网站帮你学习Promise相关知识。您可以使用这个小应用程序来可视化出promise是如何工作的，以及它们在真正的代码库中是如何使用的。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21YTBmAZ1vgRO1U9dtsQZpr1ZCoh0oARDoRHibgibicyqDVzJLBAWricGmGA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">Promisees</p><h3 id="6-JSchallenger"><a href="#6-JSchallenger" class="headerlink" title="6. JSchallenger"></a>6. JSchallenger</h3><p>网址：<strong>JSchallenger</strong>[19]</p><p>简介：这网站可以让你通过解决不同的编码难题来学习 JavaScript。同时这里有一个“最受欢迎”和“最失败”挑战的快速列表，更便于你筛选</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21Z7GEXbqhykSkf8uRKAOrdGjib51DFux7EfeDjQKsEHDABqa0iaPoA9CA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">JSchallenger</p><h3 id="7-Service-Workies"><a href="#7-Service-Workies" class="headerlink" title="7. Service Workies"></a>7. Service Workies</h3><p>网址：<strong>Service Workies</strong>[20]</p><p>简介：该网站用于学习开发渐进式 Web 应用程序(PWAs)的各种功能</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片">Service Workies</p><h2 id="三、其它"><a href="#三、其它" class="headerlink" title="三、其它"></a>三、其它</h2><h3 id="1-Git分支学习"><a href="#1-Git分支学习" class="headerlink" title="1. Git分支学习"></a>1. Git分支学习</h3><p>网址：<strong>Git分支学习</strong>[21]</p><p>简介：在学习 Git 这样的命令行工具时，常常缺少可视化内容。该网站旨在通过使用 Git 仓库可视化工具、 沙箱 和一系列教育性教程和挑战，以可视化和交互式的方式对 Git 的不同特性进行遍历，从而解决这个问题。</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片">Git分支学习</p><h3 id="2-Select-Star-SQL"><a href="#2-Select-Star-SQL" class="headerlink" title="2. Select Star SQL"></a>2. Select Star SQL</h3><p>网址：<strong>Select Star SQL</strong>[22]</p><p>简介：这个网站可以让您学习 SQL 的概念。这是通过以下指令来完成的，这些指令针对一个真实的数据集运行 SQL 查询，通过5个章节来完成，每个章节大约需要30分钟来完成。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21r0hMtuwcTtpXryLwsME0DjREVLq0ybpsCiavyFoz21e6CZgaTefG90Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">Select Star SQL</p><h3 id="3-正则"><a href="#3-正则" class="headerlink" title="3. 正则"></a>3. 正则</h3><p>网址：<strong>Select Star SQL</strong>[23]</p><p>简介：其类似于正则表达式的 JSFiddle，但是有一些额外的特性可以帮助我们学习构建正则表达式。它包括一个 正则表达式 编辑器、一个由社区编写的正则表达式库、一个语法的快速参考，甚至还有一个交互式测试。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21xgXKWVn28JpuUYbwcUrxsS7jsicRKAAOkxLADGSb0REYljluyphTqjg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">正则</p><h3 id="4-SQL-警察局"><a href="#4-SQL-警察局" class="headerlink" title="4. SQL 警察局"></a>4. SQL 警察局</h3><p>网址：<strong>SQL警察局</strong>[24]</p><p>简介：该网站让您通过解决犯罪游戏学习 SQL 语法</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn21I7B0rMDsU8Fy2kk6QrHzns3Ef0SdzfbONg1RiapMEoCEicricwiaJHk2Bg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">SQL 警察局</p><h3 id="5-CodinGame"><a href="#5-CodinGame" class="headerlink" title="5. CodinGame"></a>5. CodinGame</h3><p>网址：<strong>CodinGame</strong>[25]</p><p>简介：这是一个功能齐全的学习平台，允许您学习25种以上的编程语言，同时解决有趣的挑战。</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片">CodinGame</p><h3 id="6-OpenVim"><a href="#6-OpenVim" class="headerlink" title="6. OpenVim"></a>6. OpenVim</h3><p>网址：<strong>CodinGame</strong>[26]</p><p>简介：该网站教你如何使用 Vim，这是一个在 Unix 用户中很流行的多平台文本编辑器</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn213nsD7O4e3nU6ic0q6IbqcTUXxdV11LE6oW7BMTMMfJj4YqiahRSE16EA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">OpenVim</p><h3 id="7-正则填字游戏"><a href="#7-正则填字游戏" class="headerlink" title="7. 正则填字游戏"></a>7. 正则填字游戏</h3><p>网址：<strong>正则填字游戏</strong>[27]</p><p>简介：该游戏基于填字游戏的挑战来帮助您学习正则表达式语法。每个关卡中，你必须输入一个字符串，该字符串与表达式相匹配</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片">正则填字游戏</p><h3 id="8-RegexOne"><a href="#8-RegexOne" class="headerlink" title="8. RegexOne"></a>8. RegexOne</h3><p>网址：<strong>RegexOne</strong>[28]</p><p>简介：该网站使用约25个练习和问题来练习正则表达式语法。还包括5种不同编程语言的正则表达式指南</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/lgHVurTfTcyDNqTcUvCmKv6xRA3Tpn2100T5cw37RZJCWPo6CiaHNNZcsAj46LKZ5ibU3jY2icibHeUcHQJ7AoHnfQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">RegexOne</p><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p>[1]Flex Box 冒险游戏: <a href="https://codingfantasy.com/games/flexboxadventure">https://codingfantasy.com/games/flexboxadventure</a></p><p>[2]Flexbox 格子骑士: <a href="https://knightsoftheflexboxtable.com/">https://knightsoftheflexboxtable.com/</a></p><p>[3]Flex Box 青蛙: <a href="https://flexboxfroggy.com/">https://flexboxfroggy.com/</a></p><p>[4]Flex Box 打僵尸: <a href="https://geddski.teachable.com/p/flexbox-zombies">https://geddski.teachable.com/p/flexbox-zombies</a></p><p>[5]Flex Box 保卫战: <a href="http://www.flexboxdefense.com/">http://www.flexboxdefense.com/</a></p><p>[6]Flex语法操纵台: <a href="https://the-echoplex.net/flexyboxes/">https://the-echoplex.net/flexyboxes/</a></p><p>[7]Grid 花园: <a href="https://cssgridgarden.com/">https://cssgridgarden.com/</a></p><p>[8]CSS Grid 备忘清单: <a href="https://alialaa.github.io/css-grid-cheat-sheet/">https://alialaa.github.io/css-grid-cheat-sheet/</a></p><p>[9]Grid 攻击: <a href="https://codingfantasy.com/games/css-grid-attack">https://codingfantasy.com/games/css-grid-attack</a></p><p>[10]CSS 选择器备忘清单: <a href="https://frontend30.com/css-selectors-cheatsheet/">https://frontend30.com/css-selectors-cheatsheet/</a></p><p>[11]CSS 动画: <a href="https://css-animations.io/">https://css-animations.io/</a></p><p>[12]混合滤镜: <a href="https://ilyashubin.github.io/FilterBlend/">https://ilyashubin.github.io/FilterBlend/</a></p><p>[13]CSS晚餐: <a href="https://flukeout.github.io/">https://flukeout.github.io/</a></p><p>[14]TypeScript 练习: <a href="https://typescript-exercises.github.io/">https://typescript-exercises.github.io/</a></p><p>[15]设计模式游戏: <a href="https://designpatternsgame.com/">https://designpatternsgame.com/</a></p><p>[16]React 教程: <a href="https://react-tutorial.app/">https://react-tutorial.app/</a></p><p>[17]Untrusted: <a href="https://alexnisnevich.github.io/untrusted/">https://alexnisnevich.github.io/untrusted/</a></p><p>[18]Promisees: <a href="https://bevacqua.github.io/promisees/">https://bevacqua.github.io/promisees/</a></p><p>[19]JSchallenger: <a href="https://www.jschallenger.com/">https://www.jschallenger.com/</a></p><p>[20]Service Workies: <a href="https://serviceworkies.com/">https://serviceworkies.com/</a></p><p>[21]Git分支学习: <a href="https://learngitbranching.js.org/">https://learngitbranching.js.org/</a></p><p>[22]Select Star SQL: <a href="https://selectstarsql.com/">https://selectstarsql.com/</a></p><p>[23]Select Star SQL: <a href="https://selectstarsql.com/">https://selectstarsql.com/</a></p><p>[24]SQL警察局: <a href="https://sqlpd.com/">https://sqlpd.com/</a></p><p>[25]CodinGame: <a href="https://www.codingame.com/">https://www.codingame.com/</a></p><p>[26]CodinGame: <a href="https://www.codingame.com/">https://www.codingame.com/</a></p><p>[27]正则填字游戏: <a href="https://regexcrossword.com/">https://regexcrossword.com/</a></p><p>[28]RegexOne: <a href="https://regexone.com/">https://regexone.com/</a></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> 网站收集 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual Studio Code plugins</title>
      <link href="/2022/01/20/VisualStudioCode/vscode-plugins/"/>
      <url>/2022/01/20/VisualStudioCode/vscode-plugins/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="Todo-Tree"><a href="#Todo-Tree" class="headerlink" title="Todo Tree"></a>Todo Tree</h3><p>此扩展快速搜索（使用<a href="https://github.com/BurntSushi/ripgrep">ripgrep</a>）您的工作区以查找 TODO 和 FIXME 等注释标签，并将它们显示在活动栏中的树视图中。可以将视图从活动栏拖到资源管理器窗格中（或您希望的任何其他位置）。单击树中的 TODO 将打开文件并将光标放在包含 TODO 的行上。找到的 TODO 也可以在打开的文件中突出显示。</p><p><img src="/../assets/screenshot.png" alt="screenshot"></p><h3 id="TODO-Highlight"><a href="#TODO-Highlight" class="headerlink" title="TODO Highlight"></a>TODO Highlight</h3><p>Highlight和代码<code>TODO</code>中<code>FIXME</code>的其他注释。</p><p>有时，在将代码发布到生产环境之前，您会忘记查看在编码时添加的 TODO。所以我一直想要一个扩展来突出它们并提醒我还有笔记或尚未完成的事情。希望这个扩展也能帮助你。</p><p><em>注意</em>许多人报告该<code>List highlighted annotations</code>命令不起作用，请确保您通过<code>todohighlight.include</code>.</p><p><img src="/../assets/image-20220120220935001.png" alt="image-20220120220935001"></p><h3 id="Git-Graph"><a href="#Git-Graph" class="headerlink" title="Git Graph"></a>Git Graph</h3><p>查看存储库的 Git 图表，并从图表轻松执行 Git 操作。可配置为您想要的方式！</p><p><img src="/../assets/demo.gif" alt="demo"></p><h3 id="Chinese-Simplified-简体中文"><a href="#Chinese-Simplified-简体中文" class="headerlink" title="Chinese (Simplified) (简体中文)"></a>Chinese (Simplified) (简体中文)</h3><p>通过使用“Configure Display Language”命令显式设置 VS Code 显示语言，可以替代默认 UI 语言。 按下“Ctrl+Shift+P”组合键以显示“命令面板”，然后键入“display”以筛选并显示“Configure Display Language”命令。按“Enter”，然后会按区域设置显示安装的语言列表，并突出显示当前语言设置。选择另一个“语言”以切换 UI 语言。 请参阅<a href="https://go.microsoft.com/fwlink/?LinkId=761051">文档</a>并获取更多信息。</p><h3 id="vscode-icons"><a href="#vscode-icons" class="headerlink" title="vscode-icons"></a>vscode-icons</h3><p>将图标带入您的<a href="https://code.visualstudio.com/">Visual Studio 代码</a>（**支持的最低版本<code>1.40.2</code>**：）</p><p><img src="/../assets/screenshot.gif" alt="screenshot"></p><h3 id="Live-Server"><a href="#Live-Server" class="headerlink" title="Live Server"></a>Live Server</h3><p><img src="/../assets/vscode-live-server-animated-demo.gif" alt="vscode-live-server-animated-demo"></p><h3 id="Document-This"><a href="#Document-This" class="headerlink" title="Document This"></a>Document This</h3><p><img src="/../assets/demo-16426884665242.gif" alt="demo"></p><h3 id="Auto-Close-Tag"><a href="#Auto-Close-Tag" class="headerlink" title="Auto Close Tag"></a>Auto Close Tag</h3><p>自动添加 HTML/XML 关闭标记，与 Visual Studio IDE 或 Sublime Text 相同。</p><h3 id="Auto-Rename-Tag"><a href="#Auto-Rename-Tag" class="headerlink" title="Auto Rename Tag"></a>Auto Rename Tag</h3><p>自动重命名成对的 HTML/XML 标记，与 Visual Studio IDE 相同。</p><h3 id="Quokka-js"><a href="#Quokka-js" class="headerlink" title="Quokka.js"></a>Quokka.js</h3><p>安装此<a href="https://link.segmentfault.com/?enc=6hNRBznSJUcx2+eNwS7akg==.A4U1v13EhQ5M0r+lWH0vGvz20e15g6OUcJhU1umWsueC91f3qpxpemGi/FcmCWlIqyF/KwXcLU5BCjSYDDwJ76PbDAB1pB6kiCGB5lkbLKI=">扩展</a>后，可以按Ctrl / Cmd（⌘）+ Shift + P显示编辑器的命令选项板，然后键入 Quokka 以查看可用命令的列表。选择并运行 “New JavaScript File”命令。你也可以按（⌘+ K + J）直接打开文件。在此文件中输入的任何内容都会立即执行。</p><p><img src="/../assets/demo-16426928874311.gif" alt="demo"></p><h3 id="Bracket-Pair-Colorizer"><a href="#Bracket-Pair-Colorizer" class="headerlink" title="Bracket Pair Colorizer"></a>Bracket Pair Colorizer</h3><p>每个人都喜欢对代码着色，<a href="https://link.segmentfault.com/?enc=ofMCNLyzKvbEysNH6R2/Qw==.wxbBqAqUd9hdMMyjeKbp2y3+TniF4J3O4+HduXqW5p3CQaiRppHaIAvvQiIn0NGewWQL+/K6VYOfGg1vJWYiRP+M10mhyb6cgpDcj0yzYtNhv86u0AAp1agpfpoBl5UR">Bracket Pair Colorizer</a>提供了匹配颜色的左括号和右括号，从而更容易知道哪些括号属于谁。</p><p>还可以配置自定义括号字符，你也可以为活动范围添加背景颜色。</p><p><img src="/../assets/bracket_pair_colorizer.png" alt="bracket_pair_colorizer"></p><h3 id="Turbo-Console-Log"><a href="#Turbo-Console-Log" class="headerlink" title="Turbo Console Log"></a>Turbo Console Log</h3><p>自动创建有意义的日志消息，该<a href="https://link.segmentfault.com/?enc=JVuF+H3i8/4ueCHbORbfMA==.POZA7fxykEkwZtA5qGRs9/KEiUjHKQN5vlo0P8ls9KBHA6rw06f+bnapd/dAegoI5o/6NANV73WESPnDmPm+M9UOr2vmOEgcTbdkNJnx+itxNi8rwNAiOmYLS1fvMju1">控制台显示日志</a>\插件自动创建一个有意义的日志信息的过程。它使调试更容易，因为你将有一些有用的控制台输出来找出问题所在。</p><p><img src="/../assets/turbo_console_log.gif" alt="turbo_console_log"></p><h3 id="Regex-Previewer"><a href="#Regex-Previewer" class="headerlink" title="Regex Previewer"></a>Regex Previewer</h3><p>创建正则表达式的预览，正则表达式可能是一个很困难的难题。<a href="https://link.segmentfault.com/?enc=gfHYLOmk7kWcgdxd5OEw0w==.GxBC+h11m0hd2GUmtDyBVR2DLwLittDyQA4om4twMyYr4XjTb4oTm8Nmy6mJOfko+oIjjkPoDK2lPwjoPSNQ/db0kWtDW/diYlQMqm0e4Ms=">Regex Previewer</a>为你提供与你的正则表达式匹配的辅助文档。</p><p>该插件提供了多个示例进行匹配，因此为各种用例快速准确地编写正则表达式变得更加容易</p><p><img src="/../assets/regex_previewer.gif" alt="regex_previewer"></p><h3 id="Bookmarks"><a href="#Bookmarks" class="headerlink" title="Bookmarks"></a>Bookmarks</h3><p>为你的代码添加书签，尽管 VSCode 有行号，但<a href="https://link.segmentfault.com/?enc=Uugnew+GZCTGT6N+ovwC+Q==.IZfACruiCvQspp6sPfrlVmv4mwGmcGL/BP3hXEN/0y+dkrSa/VWxMnHVX9n1vbB5XL9detkzM72gOTSDoyD2qRwfaoW0dMzbS6pZyC5nThs=">Bookmarks</a>允许你在代码中添加书签，帮助你快速导航并轻松来回跳转。</p><p><img src="/../assets/Bookmarks.png" alt="Bookmarks"></p><h3 id="HTML-CSS-JavaScript-Snippets"><a href="#HTML-CSS-JavaScript-Snippets" class="headerlink" title="HTML/CSS/JavaScript Snippets"></a>HTML/CSS/JavaScript Snippets</h3><p>只需输入前缀名称，就会自动完成完整的代码片段。</p><h3 id="Javascript-Code-Snippets"><a href="#Javascript-Code-Snippets" class="headerlink" title="Javascript Code Snippets"></a>Javascript Code Snippets</h3><p>提供很多 JS 代码块提示，虽然 VSCode 包括内置的 JS IntelliSense，但<a href="https://link.segmentfault.com/?enc=mFOjADr7Vno3leQ2NKsYCw==.zWnYC7LsFoU+h2ElMK6vav9vSzKXnQtVVLSmEufc4L9x2ncjQoqOu2wZk2gSj0czMxdM6HRc8ca9SRBaTtIM5vMZMvVuWuSsIvxzggBpk00=">JS 代码片段插件</a>通过添加大量导入、导出触发器、类助手和方法触发器来增强这种体验。</p><p>该插件支持 JS、TypeScript、JS React、TS React、HTML 和 Vue。在 VSCode Marketplace 中，也可以轻松获得其他风格（例如 Angular）的代码片段。</p><p><img src="/../assets/Javascript_Code_Snippets.png" alt="Javascript_Code_Snippets"></p><h3 id="CSS-Peek"><a href="#CSS-Peek" class="headerlink" title="CSS Peek"></a>CSS Peek</h3><p>插件你的 HTML 文件以查看你的 CSS 代码</p><p>这个插件对于前端开发人员来说是无价的。受 IDE Brackets 中类似功能的启发，<a href="https://link.segmentfault.com/?enc=+0UQVBSg5NA3+X0C2P8IHA==.nQtCHn54OZBj/gf2HLrgLTezje2xb54AlrxZoyigFxOs18PKvPoi1an/7Z3R2k5d2U6cxHQTJBMzbfw+Yi2jpmH/Hlxp3Ytn/MF+7GyBkoc=">CSS Peek</a>允许你插件 HTML 和 ejs 文件以在源代码中显示 CSS/SCSS/LESS 代码。</p><p>如果你知道类或 ID 名称，它还允许你快速跳转到对应 CSS 代码的位置。</p><p><img src="/../assets/CSS_Peek.gif" alt="CSS_Peek"></p><h3 id="Svg-Preview"><a href="#Svg-Preview" class="headerlink" title="Svg Preview"></a>Svg Preview</h3><p>现在图标基本上都是 svg 能预览还是很重要</p><p><a href="https://marketplace.visualstudio.com/items?itemName=SimonSiefke.svg-preview">https://marketplace.visualstudio.com/items?itemName=SimonSiefke.svg-preview</a></p><p><img src="/../assets/20220608141120.png" alt="20220608141120"></p><h3 id="Path-Intellisense"><a href="#Path-Intellisense" class="headerlink" title="Path Intellisense"></a>Path Intellisense</h3><p>自动完成文件路径</p><p><a href="https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense">https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense</a></p><p><img src="/../assets/20220608153647.png" alt="20220608153647"></p><h3 id="GitHub-Theme"><a href="#GitHub-Theme" class="headerlink" title="GitHub Theme"></a>GitHub Theme</h3><p>随着环境不同，你可以切换配色来让眼睛舒服。</p><p><a href="https://marketplace.visualstudio.com/items?itemName=GitHub.github-vscode-theme">https://marketplace.visualstudio.com/items?itemName=GitHub.github-vscode-theme</a></p><p><img src="/../assets/20220608140649.png" alt="20220608140649"></p><p><img src="/../assets/20220608140656.png" alt="20220608140656"></p><h3 id="Material-Icon-Theme"><a href="#Material-Icon-Theme" class="headerlink" title="Material Icon Theme"></a>Material Icon Theme</h3><p>通过图标快速识别文件作用</p><p><a href="https://marketplace.visualstudio.com/items?itemName=PKief.material-icon-theme">https://marketplace.visualstudio.com/items?itemName=PKief.material-icon-theme</a></p><p><img src="/../assets/20220608140942.png" alt="20220608140942"></p><h3 id="Comment-Translate"><a href="#Comment-Translate" class="headerlink" title="Comment Translate"></a>Comment Translate</h3><p>注释翻译</p><p><a href="https://marketplace.visualstudio.com/items?itemName=intellsmi.comment-translate">https://marketplace.visualstudio.com/items?itemName=intellsmi.comment-translate</a></p><p><img src="/../assets/image-20220621113346445.png" alt="image-20220621113346445"></p><h3 id="Iconify-IntelliSense"><a href="#Iconify-IntelliSense" class="headerlink" title="Iconify IntelliSense"></a>Iconify IntelliSense</h3><p>前端图标识别插件 iconfont 系列，能更直观的查看该图标结构。</p><p><img src="/../assets/Iconify_IntelliSense.png" alt="Iconify_IntelliSense"></p><center><font size="30">Flutter开发插件</font></center><h3 id="Flutter"><a href="#Flutter" class="headerlink" title="Flutter"></a>Flutter</h3><p><a href="https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter">https://marketplace.visualstudio.com/items?itemName=Dart-Code.flutter</a></p><p><img src="/../assets/20220617160834.png" alt="20220617160834"></p><h3 id="Dart"><a href="#Dart" class="headerlink" title="Dart"></a>Dart</h3><p><a href="https://marketplace.visualstudio.com/items?itemName=Dart-Code.dart-code">https://marketplace.visualstudio.com/items?itemName=Dart-Code.dart-code</a></p><p><img src="/../assets/dart_plugins.png" alt="dart_plugins"></p><h3 id="Awesome-Flutter-Snippets"><a href="#Awesome-Flutter-Snippets" class="headerlink" title="Awesome Flutter Snippets"></a>Awesome Flutter Snippets</h3><p>代码片段快捷</p><p><a href="https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets">https://marketplace.visualstudio.com/items?itemName=Nash.awesome-flutter-snippets</a></p><p><img src="/../assets/20220608140434.png" alt="20220608140434"></p><h3 id="Flutter-Widget-Snippets"><a href="#Flutter-Widget-Snippets" class="headerlink" title="Flutter Widget Snippets"></a>Flutter Widget Snippets</h3><p>又一个代码片段快捷</p><p><a href="https://marketplace.visualstudio.com/items?itemName=alexisvt.flutter-snippets">https://marketplace.visualstudio.com/items?itemName=alexisvt.flutter-snippets</a></p><p><img src="/../assets/20220608141304.png" alt="20220608141304"></p><h3 id="Json-to-Dart-Model"><a href="#Json-to-Dart-Model" class="headerlink" title="Json to Dart Model"></a>Json to Dart Model</h3><p>根据 json 数据格式自动生成 entity 类</p><p><a href="https://marketplace.visualstudio.com/items?itemName=hirantha.json-to-dart">https://marketplace.visualstudio.com/items?itemName=hirantha.json-to-dart</a></p><p><img src="/../assets/20220608140815.png" alt="20220608140815"></p><h3 id="GetX-Snippets"><a href="#GetX-Snippets" class="headerlink" title="GetX Snippets"></a>GetX Snippets</h3><p>getx 代码提示</p><p><a href="https://marketplace.visualstudio.com/items?itemName=get-snippets.get-snippets">https://marketplace.visualstudio.com/items?itemName=get-snippets.get-snippets</a></p><p><img src="/../assets/20220608144324.png" alt="20220608144324"></p><h3 id="Flutter-GetX-Generator-猫哥"><a href="#Flutter-GetX-Generator-猫哥" class="headerlink" title="Flutter GetX Generator - 猫哥"></a>Flutter GetX Generator - 猫哥</h3><p>猫哥写的插件，很多快捷方式，非常实用</p><p><a href="https://marketplace.visualstudio.com/items?itemName=ducafecat.getx-template">https://marketplace.visualstudio.com/items?itemName=ducafecat.getx-template</a></p><p><img src="/../assets/20220608144436.png" alt="20220608144436"></p><h3 id="Visual-Studio-Code-配置"><a href="#Visual-Studio-Code-配置" class="headerlink" title="Visual Studio Code 配置"></a>Visual Studio Code 配置</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 编辑器字体</span></span><br><span class="line">    <span class="attr">&quot;editor.fontFamily&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#x27;Fira Code&#x27;, &#x27;微软雅黑&#x27;,Consolas, &#x27;Courier New&#x27;, monospace&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.fontLigatures&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.fontSize&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.lineHeight&quot;</span><span class="punctuation">:</span> <span class="number">22</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// &quot;editor.letterSpacing&quot;: 0.5,</span></span><br><span class="line">    <span class="attr">&quot;editor.wordWrap&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;files.trimTrailingWhitespace&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.fontWeight&quot;</span><span class="punctuation">:</span> <span class="string">&quot;450&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.cursorStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;line&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.cursorWidth&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.cursorBlinking&quot;</span><span class="punctuation">:</span> <span class="string">&quot;solid&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;security.workspace.trust.untrustedFiles&quot;</span><span class="punctuation">:</span> <span class="string">&quot;open&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.mouseWheelZoom&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundCover.imagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;f:\\pictures\\123036.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundCover.opacity&quot;</span><span class="punctuation">:</span> <span class="number">0.05</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;workbench.iconTheme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vscode-icons&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;less.scannerExclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;**/.git&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;**/node_modules&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;**/bower_components&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;**/public&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;source.fixAll&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// 自动修复 all</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;explorer.fileNesting.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;explorer.fileNesting.patterns&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pubspec.yaml&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.packages, pubspec.lock, .flutter-plugins, .flutter-plugins-dependencies, .metadata, analysis_options.yaml, dartdoc_options.yaml&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.guides.bracketPairs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;redhat.telemetry.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.unicodeHighlight.allowedLocales&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;tr&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;[vue]&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;editor.defaultFormatter&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Vue.volar&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;json.schemaDownload.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;yaml.schemaStore.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dart.showInspectorNotificationsForWidgetErrors&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dart.debugExternalPackageLibraries&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dart.debugSdkLibraries&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vsicons.dontShowNewVersionMessage&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;workbench.colorTheme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Default Dark+&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.tabSize&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Visual Studio Code </category>
          
          <category> vscode 插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Visual Studio Code </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 执行机制</title>
      <link href="/2022/01/14/JavaScript/JavaScript%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6/"/>
      <url>/2022/01/14/JavaScript/JavaScript%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong><center><font size="5">JavaScript 执行机制</font></center></strong></p><p>JavaScript是一种弱类型的解释语言，所以JavaScript在从一段代码到输出结果会经过两个阶段：</p><ul><li>预编译阶段</li><li>执行阶段</li></ul><p>以代码块为范围，即每遇到一个代码块都会进行  <code>预编译</code> —&gt; <code>执行</code></p><h4 id="预编译阶段"><a href="#预编译阶段" class="headerlink" title="预编译阶段"></a>预编译阶段</h4><p>在其他诸如 Java 语言中，程序的执行需要编译。JavaScript中也有类似的“预编译阶段”（JavaScript预编译到代码块<code>&lt;script&gt;&lt;/script&gt;</code>，即每一个代码块都会执行<code>预编译</code>—-&gt;<code>执行</code>），了解 JavaScript 引擎的实现机制，有助于总结 JS 代码过程中的思想。首先，JavaScript中的两个声明，<code>var</code>和<code>function</code>，前者声明变量，后者声明方法。</p><p>在预编译中，JavaScript 对这两条语句做了两种处理方案。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;1&quot;</span>; <span class="comment">// Declare the variable a</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>  <span class="title function_">b</span> (<span class="params"></span>) &#123;<span class="comment">// declaration method b</span></span><br><span class="line">  <span class="title function_">alert</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">function</span>(<span class="params"></span>) &#123;<span class="comment">// declared variable c</span></span><br><span class="line">  <span class="title function_">alert</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述代码块中，a、c为赋值，b为函数声明，执行上述代码时，</p><p>首先进入预编译阶段，</p><p>对于赋值a，c会在内存中打开一个内存空间，指向内存中的变量名，并赋值为undefined</p><p>对于函数声明，也会打开内存空间，但是会直接处理函数体，即使用函数声明，在预编译阶段就已经完成了函数的创建。</p><ul><li>预编译阶段<strong>（PS：不管变量和声明函数的声明顺序，都是在预编译阶段先声明变量，再声明函数。所以通常的情况下函数和变量声明重复后函数会覆盖变量。）</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="title function_">alert</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>执行阶段</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">c = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="title function_">alert</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上代码执行步骤</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="title function_">alert</span>();</span><br><span class="line">&#125;</span><br><span class="line">a = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">c = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="title function_">alert</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>exp：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a =<span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="title function_">alert</span>(a); <span class="comment">// a为undefined! 这个a并不是全局变量，这是因为在function scope里已经声明了（函数体倒数第4行）一个重名的局部变量,所以全局变量a被覆盖了，这说明了Javascript在执行前会对整个脚本文件的定义部分做完整分析,所以在函数test()执行前,  函数体中的变量a就被指向内部的局部变量.而不是指向外部的全局变量. 但这时a只有声明，还没赋值，所以输出undefined。</span></span><br><span class="line">  a = <span class="number">4</span>;</span><br><span class="line">  <span class="title function_">alert</span>(a);  <span class="comment">// a为4,没悬念了吧？ 这里的a还是局部变量哦！</span></span><br><span class="line">  <span class="keyword">var</span> a;     <span class="comment">// 局部变量a在这行声明</span></span><br><span class="line">  <span class="title function_">alert</span>(a);  <span class="comment">// a还是为4,这是因为之前已把4赋给a了</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>();</span><br><span class="line"><span class="title function_">alert</span>(a); <span class="comment">// a为1，这里并不在function scope内，a的值为全局变量的值</span></span><br></pre></td></tr></table></figure><p>PS：相对与window环境下的变量、函数声明，每一个作用域都会对其下的变量和函数进行先声明;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Hello</span>();</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Hello</span>();</span><br></pre></td></tr></table></figure><p>我们会看到这样的结果：连续输出了两次Hello World。而非我们想象中的Hello和Hello World。这是因为Javascript并非完全的按顺序解释执行，而是在解释之前会对Javascript进行一次“预编译”，在预编译的过程中，会把定义式的函数优先执行，也会把所有var变量创建，默认值为undefined，以提高程序的执行效率。也就是说上面的一段代码其实被JS引擎预编译为这样的形式。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Hello</span>();</span><br><span class="line"><span class="title class_">Hello</span>();</span><br></pre></td></tr></table></figure><p>我们可以通过上面的代码很清晰地看到，其实函数也是数据，也是变量，我们也可以对“函数“进行赋值（重赋值）。</p><p>当JavaScript引擎解析脚本时，它会在预编译期对所有声明的变量和函数进行处理。<br>做如下处理：</p><ul><li>在执行前会进行类似“预编译”的操作：首先会创建一个当前执行环境下的活动对象，并将那些用var申明的变量设置为活动对象的属性，但是此时这些变量的赋值都是<strong>undefined</strong>，<strong>并将那些以function定义的函数也添加为活动对象的属性，而且它们的值正是函数的定义。</strong></li><li>在解释执行阶段，遇到变量需要解析时，会首先从当前执行环境的活动对象中查找，如果没有找到而且该执行环境的拥有者有prototype属性时则会从prototype链中查找，否则将会按照作用域链查找。<strong>遇到var a = …这样的语句时会给相应的变量进行赋值（注意：变量的赋值是在解释执行阶段完成的，如果在这之前使用变量，它的值会是undefined）</strong>所以，就会出现当JavaScript解释器执行下面脚本时不会报错：</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">alert</span>(a);    <span class="comment">// 返回值undefined</span></span><br><span class="line"><span class="keyword">var</span> a =<span class="number">1</span>;</span><br><span class="line"><span class="title function_">alert</span>(a);    <span class="comment">// 返回值1</span></span><br></pre></td></tr></table></figure><p>由于变量声明是在预编译期被处理的，所以在执行期间对于所有代码来说，都是可见的。但是，你也会看到，执行上面代码，提示的值是undefined，而不是1。这是因为，变量初始化过程发生在执行期，而不是预编译期。在执行期，JavaScript解释器是按着代码先后顺序进行解析的，如果在前面代码行中没有为变量赋值，则JavaScript解释器会使用默认值undefined。由于在第二行中为变量a赋值了，所以在第三行代码中会提示变量a的值为1，而不是undefined</p><ul><li>从如下结果中我们知道先是连续两次输出Hello Wrold!，最后连续两次输出test，得出这样的结果是因为javascript并非是完全按照顺序执行的，而是在执行之前先进行一个预编译，预编译 时声明式函数被提取出来，优先执行，而且相同的函数会进行覆盖，再执行赋值式函数。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">test</span>();                    <span class="comment">//输出Hello World!</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;　　　　　　</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>);　　　　　<span class="comment">//声明式函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>();                    <span class="comment">//输出Hello World!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> test=<span class="keyword">function</span>(<span class="params"></span>)&#123;　　　　<span class="comment">//赋值式函数</span></span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>();                    <span class="comment">//输出test</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;　　　　　　<span class="comment">//声明式函数</span></span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;Hello World!&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>();                    <span class="comment">//输出test</span></span><br></pre></td></tr></table></figure><p>实际执行顺序：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test=<span class="literal">undefined</span>；</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;　　　　　　</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>);　　　　　<span class="comment">//声明式函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;　　　　　　<span class="comment">//声明式函数</span></span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;Hello World!&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>();                    <span class="comment">//输出Hello World!</span></span><br><span class="line"><span class="title function_">test</span>();                    <span class="comment">//输出Hello World!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> test=<span class="keyword">function</span>(<span class="params"></span>)&#123;　　　　<span class="comment">//赋值式函数</span></span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>();                    <span class="comment">//输出test</span></span><br><span class="line"><span class="title function_">test</span>();                    <span class="comment">//输出test</span></span><br></pre></td></tr></table></figure><ul><li>下面代码显示显示hello，再显示hello world！，这是因为javascript中的给个代码块是相互独立的，当脚本遇到第一个script标签时，则javascript 解析器会等这个代码块加载完成后，先对它进行预编译，然后再执行之，然后javascript解析器准备解析下一个代码块，由于javascript是按 块执行的，所有一个javascript调用下一个块的函数或者变量时，会出现错误:</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>);                <span class="comment">//显示hello</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">test</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(<span class="string">&#x27;hello world!&#x27;</span>);        <span class="comment">//显示hello world！</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">test</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>虽然javascript是按块执行的，但不同的块却属于相同的全局作用域，不同的块的变量和函数式可以相互使用的，也就是某个块可以使用前面块的变量和函数，却不可以使用它之后的块的变量和函数。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">alert</span>(name);                    <span class="comment">//显示undefined</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> name=<span class="string">&#x27;Jude&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">fun</span>();                            <span class="comment">//不能调用下一个块的函数</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">alert</span>(name);           <span class="comment">//可以调用上一个块的变量，显示Jude</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">test</span>();                <span class="comment">//可以调用上一个块的函数，显示hello</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(<span class="string">&#x27;fun&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>综上所述，javascript在执行时的步骤是：</p><ol><li><p>先读入第一段代码块</p></li><li><p>对代码块进行语法分析，如果出现语法错误，直接执行第5步骤</p></li><li><p>对var变量和function定义的函数进行“预编译处理”（赋值式函数是不会进行预编译处理的）</p></li><li><p>执行代码块，有错则报错</p></li><li><p>如果还有下一段代码块，则读入下一段代码块，重复步骤2</p></li></ol><h4 id="执行阶段"><a href="#执行阶段" class="headerlink" title="执行阶段"></a>执行阶段</h4><p>JavaScript在完成预编译后开始执行阶段，执行阶段具体有变量的赋值，函数的执行，执行的时候会创建JavaScript的执行上下文。</p><h4 id="什么是执行上下文？"><a href="#什么是执行上下文？" class="headerlink" title="什么是执行上下文？"></a>什么是执行上下文？</h4><p>简而言之，执行上下文是评估和执行 JavaScript 代码的环境的抽象概念。每当 Javascript 代码在运行的时候，它都是在执行上下文中运行。</p><h4 id="执行上下文的类型"><a href="#执行上下文的类型" class="headerlink" title="执行上下文的类型"></a>执行上下文的类型</h4><p>JavaScript 中有三种执行上下文类型。</p><ul><li><strong>全局执行上下文</strong> — 这是默认或者说基础的上下文，任何不在函数内部的代码都在全局上下文中。它会执行两件事：创建一个全局的 window 对象（浏览器的情况下），并且设置 <code>this</code> 的值等于这个全局对象。一个程序中只会有一个全局执行上下文。</li><li><strong>函数执行上下文</strong> — 每当一个函数被调用时, 都会为该函数创建一个新的上下文。每个函数都有它自己的执行上下文，不过是在函数被调用时创建的。函数上下文可以有任意多个。每当一个新的执行上下文被创建，它会按定义的顺序（将在后文讨论）执行一系列步骤。</li><li><strong>Eval 函数执行上下文</strong> — 执行在 <code>eval</code> 函数内部的代码也会有它属于自己的执行上下文，但由于 JavaScript 开发者并不经常使用 <code>eval</code>，所以在这里我不会讨论它。</li></ul><h5 id="执行栈"><a href="#执行栈" class="headerlink" title="执行栈"></a>执行栈</h5><p>执行栈，也就是在其它编程语言中所说的“调用栈”，是一种拥有 LIFO（后进先出）数据结构的栈，被用来存储代码运行时创建的所有执行上下文。</p><p>当 JavaScript 引擎第一次遇到你的脚本时，它会创建一个全局的执行上下文并且压入当前执行栈。每当引擎遇到一个函数调用，它会为该函数创建一个新的执行上下文并压入栈的顶部。</p><p>引擎会执行那些执行上下文位于栈顶的函数。当该函数执行结束时，执行上下文从栈中弹出，控制流程到达当前栈中的下一个上下文。</p><p>让我们通过下面的代码示例来理解：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;Hello World!&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">first</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Inside first function&#x27;</span>);</span><br><span class="line">  <span class="title function_">second</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Again inside first function&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">second</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Inside second function&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">first</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Inside Global Execution Context&#x27;</span>);</span><br></pre></td></tr></table></figure><p><img src="/assets/%E4%B8%8A%E8%BF%B0%E4%BB%A3%E7%A0%81%E7%9A%84%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E5%A0%86%E6%A0%88.png" alt="上述代码的执行上下文堆栈"></p><center>上述代码的执行上下文堆栈</center><p>当上述代码在浏览器中加载时，Javascript 引擎会创建一个全局执行上下文并将其推送到当前执行堆栈。当遇到调用<code>first()</code>时，Javascript 引擎会为该函数创建一个新的执行上下文，并将其推送到当前执行堆栈的顶部。</p><p>当从<code>second()</code>函数内部调用<code>first()</code>函数时，Javascript 引擎会为该函数创建一个新的执行上下文，并将其推送到当前执行堆栈的顶部。当<code>second()</code>函数结束时，它的执行上下文从当前栈中弹出，控件到达它下面的执行上下文，也就是<code>first()</code>函数执行上下文。</p><p>当<code>first()</code>完成时，它的执行堆栈从堆栈中移除并且控制到达全局执行上下文。执行完所有代码后，JavaScript 引擎会从当前堆栈中删除全局执行上下文。</p><h5 id="全局执行上下文"><a href="#全局执行上下文" class="headerlink" title="全局执行上下文"></a>全局执行上下文</h5><p>JavaScript 引擎创建了执行上下文栈（Execution context stack，ECS）来管理执行上下文</p><p>为了模拟执行上下文栈的行为，让我们定义执行上下文栈是一个数组：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ECStack</span> = [];</span><br></pre></td></tr></table></figure><p>试想当 JavaScript 开始要解释执行代码的时候，最先遇到的就是全局代码，所以初始化的时候首先就会向执行上下文栈压入一个全局执行上下文，我们用 globalContext 表示它，并且只有当整个应用程序结束的时候，ECStack 才会被清空，所以程序结束之前， ECStack 最底部永远有个 globalContext：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ECStack</span> = [ globalContext ];</span><br></pre></td></tr></table></figure><h5 id="函数执行上下文"><a href="#函数执行上下文" class="headerlink" title="函数执行上下文"></a>函数执行上下文</h5><p>现在 JavaScript 遇到下面的这段代码了：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun3</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fun3&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">fun3</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">fun2</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fun1</span>();</span><br></pre></td></tr></table></figure><p>当执行一个函数的时候，就会创建一个执行上下文，并且压入执行上下文栈，当函数执行完毕的时候，就会将函数的执行上下文从栈中弹出。知道了这样的工作原理，让我们来看看如何处理上面这段代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 伪代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fun1()</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">push</span>(&lt;fun1&gt; functionContext);</span><br><span class="line"></span><br><span class="line"><span class="comment">// fun1中竟然调用了fun2，还要创建fun2的执行上下文</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">push</span>(&lt;fun2&gt; functionContext);</span><br><span class="line"></span><br><span class="line"><span class="comment">// fun2还调用了fun3！</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">push</span>(&lt;fun3&gt; functionContext);</span><br><span class="line"></span><br><span class="line"><span class="comment">// fun3执行完毕</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">pop</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// fun2执行完毕</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">pop</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// fun1执行完毕</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">pop</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// javascript接着执行下面的代码，但是ECStack底层永远有个globalContext</span></span><br></pre></td></tr></table></figure><h5 id="Eval-函数执行上下文"><a href="#Eval-函数执行上下文" class="headerlink" title="Eval 函数执行上下文"></a>Eval 函数执行上下文</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span>(<span class="string">&#x27;var x = 10&#x27;</span>);</span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="built_in">eval</span>(<span class="string">&#x27;var y = 20&#x27;</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(x); <span class="comment">// 10</span></span><br><span class="line"><span class="title function_">alert</span>(y); <span class="comment">// &quot;y&quot; 提示没有声明</span></span><br><span class="line"><span class="title class_">ECStack</span>的变化过程：</span><br><span class="line"></span><br><span class="line"><span class="title class_">ECStack</span> = [globalContext];</span><br><span class="line"></span><br><span class="line"><span class="comment">// eval(&#x27;var x = 10&#x27;);</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">  evalContext,</span><br><span class="line">  <span class="attr">callingContext</span>: globalContext</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// eval exited context</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">pop</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// foo funciton call</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">push</span>(&lt;foo&gt; functionContext);</span><br><span class="line"></span><br><span class="line"><span class="comment">// eval(&#x27;var y = 20&#x27;);</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">  evalContext,</span><br><span class="line">  <span class="attr">callingContext</span>: &lt;foo&gt; functionContext</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// return from eval</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">pop</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// return from foo</span></span><br><span class="line"><span class="title class_">ECStack</span>.<span class="title function_">pop</span>();</span><br></pre></td></tr></table></figure><h4 id="执行上下文是如何创建的？"><a href="#执行上下文是如何创建的？" class="headerlink" title="执行上下文是如何创建的？"></a>执行上下文是如何创建的？</h4><p>到目前为止，我们已经了解了 JavaScript 引擎是如何管理执行上下文的，现在让我们了解一下 JavaScript 引擎是如何创建执行上下文的。</p><p>执行上下文在两个阶段中创建：<strong>1）创建阶段</strong>、<strong>2）执行阶段。</strong></p><h4 id="创建阶段"><a href="#创建阶段" class="headerlink" title="创建阶段"></a>创建阶段</h4><p>在 JavaScript 代码执行前，执行上下文将经历创建阶段。在创建阶段会发生三件事：</p><ol><li><strong>this</strong> 值的决定，即我们所熟知的 <strong>This 绑定</strong>。</li><li>创建<strong>词法环境</strong>组件。</li><li>创建<strong>变量环境</strong>组件。</li></ol><p>所以执行上下文在概念上表示如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ExecutionContext</span> = &#123;</span><br><span class="line">  <span class="title class_">ThisBinding</span> = <span class="language-xml"><span class="tag">&lt;<span class="name">this</span> <span class="attr">value</span>&gt;</span>,</span></span><br><span class="line"><span class="language-xml">  LexicalEnvironment = &#123; ... &#125;,</span></span><br><span class="line"><span class="language-xml">  VariableEnvironment = &#123; ... &#125;,</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure><h5 id="This-绑定"><a href="#This-绑定" class="headerlink" title="This 绑定"></a>This 绑定</h5><p>在全局执行上下文中，<code>this</code> 的值指向全局对象。(在浏览器中，<code>this</code>引用 Window 对象)。</p><p>在函数执行上下文中，<code>this</code> 的值取决于该函数是如何被调用的。如果它被一个引用对象调用，那么 <code>this</code> 会被设置成那个对象，否则 <code>this</code> 的值被设置为全局对象或者 <code>undefined</code>（在严格模式下）。例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = &#123;</span><br><span class="line">  <span class="attr">baz</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo.<span class="title function_">baz</span>();   <span class="comment">// &#x27;this&#x27; 引用 &#x27;foo&#x27;, 因为 &#x27;baz&#x27; 被对象 &#x27;foo&#x27; 调用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bar = foo.<span class="property">baz</span>;</span><br><span class="line"><span class="title function_">bar</span>();       <span class="comment">// &#x27;this&#x27; 指向全局 window 对象，因为没有指定引用对象</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="词法环境"><a href="#词法环境" class="headerlink" title="词法环境"></a>词法环境</h5><p><a href="https://link.juejin.cn/?target=http://ecma-international.org/ecma-262/6.0/">官方的 ES6</a> 文档把词法环境定义为</p><blockquote><p><strong>词法环境</strong>是一种规范类型，基于 ECMAScript 代码的词法嵌套结构来定义<strong>标识符</strong>和具体变量和函数的关联。一个词法环境由环境记录器和一个可能的引用<strong>外部</strong>词法环境的空值组成。</p></blockquote><p>简单来说<strong>词法环境</strong>是一种持有<strong>标识符—变量映射</strong>的结构。（这里的<strong>标识符</strong>指的是变量/函数的名字，而<strong>变量</strong>是对实际对象[包含函数类型对象]或原始数据的引用）。</p><p>现在，在词法环境的<strong>内部</strong>有两个组件：(1) <strong>环境记录器</strong>和 (2) 一个<strong>外部环境的引用</strong>。</p><ol><li><strong>环境记录器</strong>是存储变量和函数声明的实际位置。</li><li><strong>外部环境的引用</strong>意味着它可以访问其父级词法环境（作用域）。</li></ol><p><strong>词法环境</strong>有两种类型：</p><ul><li><strong>全局环境</strong>（在全局执行上下文中）是没有外部环境引用的词法环境。全局环境的外部环境引用是 <strong>null</strong>。它拥有内建的 Object/Array/等、在环境记录器内的原型函数（关联全局对象，比如 window 对象）还有任何用户定义的全局变量，并且 <code>this</code>的值指向全局对象。</li><li>在<strong>函数环境</strong>中，函数内部用户定义的变量存储在<strong>环境记录器</strong>中。并且引用的外部环境可能是全局环境，或者任何包含此内部函数的外部函数。</li></ul><p><strong>环境记录器</strong>也有两种类型（如上！）：</p><ol><li><strong>声明式环境记录器</strong>存储变量、函数和参数。</li><li><strong>对象环境记录器</strong>用来定义出现在<strong>全局上下文</strong>中的变量和函数的关系。</li></ol><p>简而言之，</p><ul><li>在<strong>全局环境</strong>中，环境记录器是对象环境记录器。</li><li>在<strong>函数环境</strong>中，环境记录器是声明式环境记录器。</li></ul><p><strong>注意 —</strong> 对于<strong>函数环境</strong>，<strong>声明式环境记录器</strong>还包含了一个传递给函数的 <code>arguments</code> 对象（此对象存储索引和参数的映射）和传递给函数的参数的 <strong>length</strong>。</p><p>抽象地讲，词法环境在伪代码中看起来像这样：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">GlobalExectionContext</span> = &#123;</span><br><span class="line">  <span class="title class_">LexicalEnvironment</span>: &#123;</span><br><span class="line">    <span class="title class_">EnvironmentRecord</span>: &#123;</span><br><span class="line">      <span class="title class_">Type</span>: <span class="string">&quot;Object&quot;</span>,</span><br><span class="line">      <span class="comment">// 在这里绑定标识符</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">outer</span>: &lt;<span class="literal">null</span>&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">FunctionExectionContext</span> = &#123;</span><br><span class="line">  <span class="title class_">LexicalEnvironment</span>: &#123;</span><br><span class="line">    <span class="title class_">EnvironmentRecord</span>: &#123;</span><br><span class="line">      <span class="title class_">Type</span>: <span class="string">&quot;Declarative&quot;</span>,</span><br><span class="line">      <span class="comment">// 在这里绑定标识符</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">outer</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Global</span> <span class="attr">or</span> <span class="attr">outer</span> <span class="attr">function</span> <span class="attr">environment</span> <span class="attr">reference</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  &#125;</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure><h5 id="变量环境"><a href="#变量环境" class="headerlink" title="变量环境"></a>变量环境</h5><p>它同样是一个词法环境，其环境记录器持有<strong>变量声明语句</strong>在执行上下文中创建的绑定关系。</p><p>如上所述，变量环境也是一个词法环境，所以它有着上面定义的词法环境的所有属性。</p><p>在 ES6 中，<strong>词法环境</strong>组件和<strong>变量环境</strong>的一个不同就是前者被用来存储函数声明和变量（<code>let</code> 和 <code>const</code>）绑定，而后者只用来存储 <code>var</code> 变量绑定。</p><p>我们看点样例代码来理解上面的概念：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">var</span> c;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">multiply</span>(<span class="params">e, f</span>) &#123;</span><br><span class="line"> <span class="keyword">var</span> g = <span class="number">20</span>;</span><br><span class="line"> <span class="keyword">return</span> e * f * g;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">c = <span class="title function_">multiply</span>(<span class="number">20</span>, <span class="number">30</span>);</span><br></pre></td></tr></table></figure><p>执行上下文看起来像这样：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">GlobalExectionContext</span> = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">ThisBinding</span>: &lt;Global Object&gt;,</span><br><span class="line"></span><br><span class="line">  LexicalEnvironment: &#123;</span><br><span class="line">    EnvironmentRecord: &#123;</span><br><span class="line">      Type: &quot;Object&quot;,</span><br><span class="line">      // 在这里绑定标识符</span><br><span class="line">      a: &lt; uninitialized &gt;,</span><br><span class="line">      b: &lt; uninitialized &gt;,</span><br><span class="line">      multiply: &lt; func &gt;</span><br><span class="line">    &#125;</span><br><span class="line">    outer: &lt;null&gt;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  VariableEnvironment: &#123;</span><br><span class="line">    EnvironmentRecord: &#123;</span><br><span class="line">      Type: &quot;Object&quot;,</span><br><span class="line">      // 在这里绑定标识符</span><br><span class="line">      c: undefined,</span><br><span class="line">    &#125;</span><br><span class="line">    outer: &lt;null&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">FunctionExectionContext = &#123;</span><br><span class="line">  ThisBinding: &lt;Global Object&gt;,</span><br><span class="line"></span><br><span class="line">  LexicalEnvironment: &#123;</span><br><span class="line">    EnvironmentRecord: &#123;</span><br><span class="line">      Type: &quot;Declarative&quot;,</span><br><span class="line">      // 在这里绑定标识符</span><br><span class="line">      Arguments: &#123;0: 20, 1: 30, length: 2&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    outer: &lt;GlobalLexicalEnvironment&gt;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">VariableEnvironment: &#123;</span><br><span class="line">    EnvironmentRecord: &#123;</span><br><span class="line">      Type: &quot;Declarative&quot;,</span><br><span class="line">      // 在这里绑定标识符</span><br><span class="line">      g: undefined</span><br><span class="line">    &#125;,</span><br><span class="line">    outer: &lt;GlobalLexicalEnvironment&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：只有遇到调用函数 <code>multiply</code> 时，函数执行上下文才会被创建。</p><p>可能你已经注意到 <code>let</code> 和 <code>const</code> 定义的变量并没有关联任何值，但 <code>var</code> 定义的变量被设成了 <code>undefined</code>。</p><p>这是因为在创建阶段时，引擎检查代码找出变量和函数声明，虽然函数声明完全存储在环境中，但是变量最初设置为 <code>undefined</code>（<code>var</code> 情况下），或者未初始化（<code>let</code> 和 <code>const</code> 情况下）。</p><p>这就是为什么你可以在声明之前访问 <code>var</code> 定义的变量（虽然是 <code>undefined</code>），但是在声明之前访问 <code>let</code> 和 <code>const</code> 的变量会得到一个引用错误。这就是我们说的变量声明提升。</p><p><strong>注意</strong>： 在执行阶段，如果 JavaScript 引擎不能在源码中声明的实际位置找到 <code>let</code> 变量的值，它会被赋值为 <code>undefined</code>。</p><p><strong>结论</strong>：我们已经讨论过 JavaScript 程序内部是如何执行的。虽然要成为一名卓越的 JavaScript 开发者并不需要学会全部这些概念，但是如果对上面概念能有不错的理解将有助于你更轻松，更深入地理解其他概念，如变量声明提升，作用域和闭包。</p><blockquote><p>本文参考文章连接 ：</p><p>1、 <a href="https://blog.bitsrc.io/understanding-execution-context-and-execution-stack-in-javascript-1c9ea8642dd0">Understanding Execution Context and Execution Stack in Javascript</a></p><p>2、<a href="https://blog.csdn.net/weixin_36586564/article/details/77092067">javascript运行过程中的“预编译阶段”和“执行阶段”</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端学习路线图</title>
      <link href="/2022/01/12/%E5%89%8D%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/"/>
      <url>/2022/01/12/%E5%89%8D%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="/assets/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E5%9B%BE.jpg" alt="前端框架图"></p><p>  <strong><font size="5">前端面试学习路线图文字版</font></strong></p><ul><li><p>JavaScript基础</p></li><li><ul><li><p>执行上下文/作用域链/闭包</p></li><li><ul><li>介绍一个JavaScript的执行上下文</li><li>介绍一下JavaScript的作用域链</li><li>介绍一下JavaScript的闭包是什么已经应用的场景</li></ul></li><li><p>this/call/apply/bind</p></li><li><ul><li>介绍一下JavaScript里的this</li><li>如何改变this指向</li><li>call/apply有什么区别？</li><li>如何实现call和apply函数？</li><li>如何实现一个bind？</li></ul></li><li><p>原型/继承</p></li><li><ul><li>介绍一下JavaScript的原型？</li><li>原型链是什么？</li><li>如何利用原型实现继承？</li></ul></li><li><p>Promise</p></li><li><ul><li>promise是什么？</li><li>如何实现一个Promise (Promise A+)</li><li>async       await</li></ul></li><li><p>深浅拷贝</p></li><li><ul><li>介绍一下JavaScript的深浅拷贝？</li><li>如何实现浅拷贝？</li><li>如何实现深拷贝？</li><li>实现深拷贝需要注意哪些问题？</li><li>如何解决循环引用的问题？</li></ul></li><li><p>事件机制/Event      Loop</p></li><li><ul><li>如何实现一个事件的发布订阅？</li><li>介绍一下事件循环？</li><li>宏任务和微任务的区别？</li></ul></li><li><p>service      worker</p></li><li><p>web      worker</p></li><li><p>函数式编程</p></li><li><p>常用方法</p></li><li><ul><li>数组方法</li><li>ES6       新增方法</li></ul></li></ul></li><li><p>css基础</p></li><li><ul><li><p>position</p></li><li><ul><li>fixed       固定定位</li><li>absolute       绝对定位</li><li>relative       相对定位</li></ul></li><li><p>行内/块级元素</p></li><li><p>flex</p></li><li><ul><li>介绍一下flex布局？</li><li>如何使用flex实现九宫格布局？</li><li>flex:1指的是什么？ flex属性默认值是什么？</li><li>分别介绍一下flex-shrink flex-basis？</li><li>grid布局</li></ul></li><li><p>1px</p></li><li><ul><li>移动端1px问题是怎么解决的？</li><li>介绍一下rem方案和vw方案，分别有哪些优缺点？</li><li>rem方案的font-size是挂在哪儿的？</li><li>rem方案时移动端字体是怎么处理的？</li></ul></li><li><p>重绘和回流</p></li><li><ul><li>介绍一下重绘和回流？</li><li>如何避免重绘和回流？</li></ul></li><li><p>居中/常见布局</p></li><li><p>层叠上下文</p></li><li><p>Scss/Less</p></li></ul></li><li><p>框架(vue、react)</p></li><li><ul><li><p>React</p></li><li><p>Vue</p></li><li><ul><li><p>MVVM</p></li><li><ul><li>介绍一下MVVM，和MVC有什么区别？</li><li>ViewModel有什么好处？</li></ul></li><li><p>生命周期</p></li><li><ul><li>nextTick是如何实现的？</li><li>父组件挂载时，生命周期的顺序是怎么样的？</li></ul></li><li><p>数据绑定</p></li><li><ul><li><p>Vue双向绑定是如何实现的？</p></li><li><ul><li>数据劫持</li><li>发布订阅</li></ul></li><li><p>Vue2中关于数组和对象数据观察时有做什么特殊处理吗？</p></li><li><ul><li>重写数组方法</li></ul></li><li><p>defineProperty和proxy有什么区别？</p></li><li><p>vue中的数据为什么频繁变化但只更新一次？</p></li></ul></li><li><p>状态管理</p></li><li><ul><li>什么是状态管理</li><li>介绍一下Vuex和Redux</li><li>Vuex和Redux有什么区别？</li><li>让你实现一个状态管理，改如何实现？</li></ul></li><li><p>组件通信</p></li><li><ul><li>父子组件如何进行通信</li><li>爷孙组件如何进行通信</li><li>兄弟组件如何通信</li></ul></li><li><p>Virtual       Dom</p></li><li><ul><li>Virtual        Dom 是什么？</li><li>为什么需要Virtual Dom</li><li>vue中的Virtual        Dom 解决了什么问题？</li></ul></li><li><p>diff</p></li><li><ul><li>介绍一下vue的diff策略</li><li>介绍一下react的diff策略</li><li>ue的diff策略和react的diff策略有什么不同？</li><li>key用什么作用？</li></ul></li><li><p>vue       computed/watch原理</p></li><li><ul><li>computed是如何实现的？</li><li>watch是如何实现的？</li><li>computed的时候可以引用其他的computed属性，是如何实现的？</li></ul></li><li><p>react       hook 了解一下是什么？</p></li><li><p>react       hooks/vue mixin</p></li><li><ul><li>React        Hoc是什么？</li><li>vue        mixin是什么？</li><li>Hoc和mixin有什么区别？</li><li>为什么vue没高价组件？</li></ul></li><li><p>React和Vue有什么不同？</p></li><li><ul><li>现在有一个项目，你是如何考虑使用vue还是react</li><li>从多角度说一下vue和react有什么区别？</li></ul></li></ul></li></ul></li><li><p>工程化</p></li><li><ul><li><p>webpack</p></li><li><ul><li><p>介绍一下webpack的构建流程？</p></li><li><p>webpack和rollup有什么相同点和不同点？</p></li><li><p>介绍一下Loader</p></li><li><ul><li>常见的Loader有哪些？有什么作用？</li><li>介绍一两个Loader的思路？</li></ul></li><li><p>介绍一下Plugin</p></li><li><ul><li>常见的Plugin有哪些？</li><li>介绍一两个Plugin的思路？</li></ul></li><li><p>webpack热更新是如何实现的？</p></li><li><p>webpack层面如何做性能优化的？</p></li><li><p>介绍一下webpack的tree-shaking</p></li><li><p>介绍一下webpack的scope hosting</p></li></ul></li><li><p>babel</p></li><li><ul><li>介绍一下babel的原理？</li></ul></li><li><p>模板引擎</p></li><li><ul><li>如何实现一个最简单的模板引擎？</li></ul></li><li><p>前端发布</p></li><li><ul><li>一个前端页面是如何发布到线上的？</li><li>cdn</li><li>增量发布</li></ul></li><li><p>weex</p></li><li><ul><li>介绍一下week的原理</li><li>为什么week比H5快？</li><li>week有什么缺点？</li></ul></li></ul></li><li><p>性能优化</p></li><li><ul><li><p>打包优化</p></li><li><ul><li><p>webpack</p></li><li><ul><li>Loader</li><li>dell</li><li>happypack</li><li>压缩代码</li><li>tree        shaking</li><li>scope        hosting</li><li>code        spliting</li></ul></li><li><p>图片base64，cdn</p></li></ul></li><li><p>网络优化</p></li><li><ul><li>dns</li><li>cdn</li><li>缓存</li><li>preload       prefetch/懒加载</li><li>SSR</li></ul></li><li><p>代码优化</p></li><li><ul><li>loading/骨架屏</li><li>web       worker</li><li>虚拟列表</li><li>懒加载</li><li>dom/style       批量更新</li></ul></li></ul></li><li><p>Typescript</p></li><li><ul><li>介绍一下Typescript</li><li>Typescript和JavaScript相比有什么优势？</li><li>介绍一下泛型，一般会用到什么地方？</li><li>介绍一下interface</li><li>d.ts是什么？</li><li>Typescript是如何编译的？</li><li>namespace      / module</li></ul></li><li><p>网络</p></li><li><ul><li><p>HTTP</p></li><li><ul><li>常见的状态码有哪些？</li><li>304表示什么？和302有什么区别？</li><li>介绍一下HTTP缓存策略</li><li>Connection为keep-alive表示什么？</li></ul></li><li><p>DNS</p></li><li><ul><li>介绍一下DNS</li></ul></li><li><p>TCP</p></li><li><ul><li>3次握手</li><li>4次挥手</li></ul></li><li><p>HTTPS</p></li><li><ul><li>介绍一下HTTPS的工作原理</li><li>HTTPS和HTTP有什么区别？</li></ul></li><li><p>CDN</p></li><li><ul><li>介绍一下CDN是什么以及他的应用场景</li><li>CDN的回源是什么</li></ul></li><li><p>从输入URL到页面展示，发生了什么？      一个老套但是经典的问题</p></li></ul></li><li><p>设计模式</p></li><li><ul><li>介绍一下了解的设计模式以及应用场景</li><li>Vue/React中应用了什么设计模式</li></ul></li><li><p>数据结构</p></li><li><ul><li>介绍一下栈、队列、链表</li><li>用JavaScript实现栈/队列/链表</li><li>树</li></ul></li><li><p>算法</p></li><li><ul><li>各种常见的排序算法的思路和复杂度</li><li>二叉树前序/中序/后序遍历</li><li>深度优先/广度优先的思路和应用场景</li><li>动态规划</li><li>diff</li></ul></li><li><p>网络安全</p></li><li><ul><li>XSS</li><li>CSRF</li><li>HTTPS</li><li>风控策略</li><li>可信前端</li><li>前端-服务端安全策略</li></ul></li><li><p>Node</p></li><li><ul><li>一篇文章构建你的 NodeJS 知识体系</li><li>真-Node多线程</li><li>浏览器与Node的事件循环(Event Loop)有何区别?</li><li>聊聊      Node.js RPC</li><li>Understanding      Streams in Node.js</li><li>深入理解      Node.js 进程与线程</li><li>如何通过饿了么 Node.js 面试</li><li>字节跳动面试官：请你实现一个大文件上传和断点续传</li></ul></li><li><p>业务/项目</p></li><li><ul><li>思考题，自由发挥</li></ul></li><li><p>其他</p></li><li><ul><li>深入浅出浏览器渲染原理</li><li>前端开发如何独立解决跨域问题</li><li>探索      Serverless 中的前端开发模式</li><li>「NGW」前端新技术赛场：Serverless SSR 技术内幕</li><li>JavaScript与Unicode</li><li>九种跨域方式实现原理（完整版）</li><li>7分钟理解JS的节流、防抖及使用场景</li><li>浏览器的工作原理：新式网络浏览器幕后揭秘</li><li>Different      Types Of Observers Supported By Modern Browsers</li><li>浏览器同源策略与ajax跨域方法汇总</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> 学习路线 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flex布局</title>
      <link href="/2022/01/11/Css/flex%E5%B8%83%E5%B1%80/"/>
      <url>/2022/01/11/Css/flex%E5%B8%83%E5%B1%80/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="Flex-布局是什么？"><a href="#Flex-布局是什么？" class="headerlink" title="Flex 布局是什么？"></a>Flex 布局是什么？</h3><p>Flex 是 Flexible Box 的缩写，意为”弹性布局”，用来为盒状模型提供最大的灵活性。任何一个容器都可以指定为 Flex 布局。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>行内元素也可以使用 Flex 布局。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Webkit 内核的浏览器，必须加上<code>-webkit</code>前缀。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex; <span class="comment">/* Safari */</span></span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意，设为 Flex 布局以后，子元素的<code>float</code>、<code>clear</code>和<code>vertical-align</code>属性将失效。</p><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>采用 Flex 布局的元素，称为 Flex 容器（flex container），简称”容器”。它的所有子元素自动成为容器成员，称为 Flex 项目（flex item），简称”项目”。</p><p><img src="/assets/bg2015071004.png" alt="bg2015071004"></p><p>容器默认存在两根轴：水平的主轴（main axis）和垂直的交叉轴（cross axis）。主轴的开始位置（与边框的交叉点）叫做<code>main start</code>，结束位置叫做<code>main end</code>；交叉轴的开始位置叫做<code>cross start</code>，结束位置叫做<code>cross end</code>。</p><p>项目默认沿主轴排列。单个项目占据的主轴空间叫做<code>main size</code>，占据的交叉轴空间叫做<code>cross size</code>。</p><h3 id="容器的属性"><a href="#容器的属性" class="headerlink" title="容器的属性"></a>容器的属性</h3><p>以下 6 个属性设置在容器上。</p><ul><li><code>flex-direction</code></li><li><code>flex-wrap</code></li><li><code>flex-flow</code></li><li><code>justify-content</code></li><li><code>align-items</code></li><li><code>align-content</code></li></ul><h4 id="flex-direction-属性"><a href="#flex-direction-属性" class="headerlink" title="flex-direction 属性"></a>flex-direction 属性</h4><p><code>flex-direction</code>属性决定主轴的方向（即项目的排列方向）。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row | row-reverse | column | column-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/bg2015071005.png" alt="bg2015071005"></p><p>它可能有 4 个值。</p><ul><li><code>row</code>（默认值）：主轴为水平方向，起点在左端。</li><li><code>row-reverse</code>：主轴为水平方向，起点在右端。</li><li><code>column</code>：主轴为垂直方向，起点在上沿。</li><li><code>column-reverse</code>：主轴为垂直方向，起点在下沿。</li></ul><h4 id="flex-wrap-属性"><a href="#flex-wrap-属性" class="headerlink" title="flex-wrap 属性"></a>flex-wrap 属性</h4><p>默认情况下，项目都排在一条线（又称”轴线”）上。<code>flex-wrap</code>属性定义，如果一条轴线排不下，如何换行。</p><p><img src="/assets/bg2015071006.png" alt="bg2015071006"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>它可能取三个值。</p><p>（1）<code>nowrap</code>（默认）：不换行。</p><p><img src="/assets/bg2015071007.png" alt="bg2015071007"></p><p>（2）<code>wrap</code>：换行，第一行在上方。</p><p><img src="/assets/bg2015071008.jpg" alt="bg2015071008"></p><p>（3）<code>wrap-reverse</code>：换行，第一行在下方。</p><p><img src="/assets/bg2015071009.jpg" alt="bg2015071009"></p><h4 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h4><p><code>flex-flow</code>属性是<code>flex-direction</code>属性和<code>flex-wrap</code>属性的简写形式，默认值为<code>row nowrap</code>。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">flex-flow</span>: &lt;flex-direction&gt; || &lt;flex-wrap&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="justify-content-属性"><a href="#justify-content-属性" class="headerlink" title="justify-content 属性"></a>justify-content 属性</h4><p><code>justify-content</code>属性定义了项目在主轴上的对齐方式。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/bg2015071010.png" alt="bg2015071010"></p><p>它可能取 5 个值，具体对齐方式与轴的方向有关。下面假设主轴为从左到右。</p><ul><li><code>flex-start</code>（默认值）：左对齐</li><li><code>flex-end</code>：右对齐</li><li><code>center</code>： 居中</li><li><code>space-between</code>：两端对齐，项目之间的间隔都相等。</li><li><code>space-around</code>：每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍。</li></ul><h4 id="align-items-属性"><a href="#align-items-属性" class="headerlink" title="align-items 属性"></a>align-items 属性</h4><p><code>align-items</code>属性定义项目在交叉轴上如何对齐。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/bg2015071011.png" alt="bg2015071011"></p><p>它可能取 5 个值。具体的对齐方式与交叉轴的方向有关，下面假设交叉轴从上到下。</p><ul><li><code>flex-start</code>：交叉轴的起点对齐。</li><li><code>flex-end</code>：交叉轴的终点对齐。</li><li><code>center</code>：交叉轴的中点对齐。</li><li><code>baseline</code>: 项目的第一行文字的基线对齐。</li><li><code>stretch</code>（默认值）：如果项目未设置高度或设为 auto，将占满整个容器的高度。</li></ul><h4 id="align-content-属性"><a href="#align-content-属性" class="headerlink" title="align-content 属性"></a>align-content 属性</h4><p><code>align-content</code>属性定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">align-content</span>: flex-start | flex-end | center | space-between | space-around |</span><br><span class="line">    stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/bg2015071012.png" alt="bg2015071012"></p><p>该属性可能取 6 个值。</p><ul><li><code>flex-start</code>：与交叉轴的起点对齐。</li><li><code>flex-end</code>：与交叉轴的终点对齐。</li><li><code>center</code>：与交叉轴的中点对齐。</li><li><code>space-between</code>：与交叉轴两端对齐，轴线之间的间隔平均分布。</li><li><code>space-around</code>：每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍。</li><li><code>stretch</code>（默认值）：轴线占满整个交叉轴。</li></ul><h3 id="项目的属性"><a href="#项目的属性" class="headerlink" title="项目的属性"></a>项目的属性</h3><p>以下 6 个属性设置在项目上。</p><ul><li><code>order</code></li><li><code>flex-grow</code></li><li><code>flex-shrink</code></li><li><code>flex-basis</code></li><li><code>flex</code></li><li><code>align-self</code></li></ul><h4 id="order-属性"><a href="#order-属性" class="headerlink" title="order 属性"></a>order 属性</h4><p><code>order</code>属性定义项目的排列顺序。数值越小，排列越靠前，默认为 0。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">order</span>: &lt;integer&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/bg2015071013.png" alt="bg2015071013"></p><h4 id="flex-grow-属性"><a href="#flex-grow-属性" class="headerlink" title="flex-grow 属性"></a>flex-grow 属性</h4><p><code>flex-grow</code>属性定义项目的放大比例，默认为<code>0</code>，即如果存在剩余空间，也不放大。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: &lt;number&gt;; <span class="comment">/* default 0 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/bg2015071014.png" alt="bg2015071014"></p><p>如果所有项目的<code>flex-grow</code>属性都为 1，则它们将等分剩余空间（如果有的话）。如果一个项目的<code>flex-grow</code>属性为 2，其他项目都为 1，则前者占据的剩余空间将比其他项多一倍。</p><h4 id="flex-shrink-属性"><a href="#flex-shrink-属性" class="headerlink" title="flex-shrink 属性"></a>flex-shrink 属性</h4><p><code>flex-shrink</code>属性定义了项目的缩小比例，默认为 1，即如果空间不足，该项目将缩小。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: &lt;number&gt;; <span class="comment">/* default 1 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/bg2015071015.jpg" alt="bg2015071015"></p><p>如果所有项目的<code>flex-shrink</code>属性都为 1，当空间不足时，都将等比例缩小。如果一个项目的<code>flex-shrink</code>属性为 0，其他项目都为 1，则空间不足时，前者不缩小。</p><p>负值对该属性无效。</p><h4 id="flex-basis-属性"><a href="#flex-basis-属性" class="headerlink" title="flex-basis 属性"></a>flex-basis 属性</h4><p><code>flex-basis</code>属性定义了在分配多余空间之前，项目占据的主轴空间（main size）。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为<code>auto</code>，即项目的本来大小。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-basis</span>: &lt;length&gt; | auto; <span class="comment">/* default auto */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>它可以设为跟<code>width</code>或<code>height</code>属性一样的值（比如 350px），则项目将占据固定空间。</p><h4 id="flex-属性"><a href="#flex-属性" class="headerlink" title="flex 属性"></a>flex 属性</h4><p><code>flex</code>属性是<code>flex-grow</code>, <code>flex-shrink</code> 和 <code>flex-basis</code>的简写，默认值为<code>0 1 auto</code>。后两个属性可选。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: none | [ &lt; <span class="string">&#x27;flex-grow&#x27;</span> &gt; &lt; <span class="string">&#x27;flex-shrink&#x27;</span> &gt;? || &lt; <span class="string">&#x27;flex-basis&#x27;</span> &gt; ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该属性有两个快捷值：<code>auto</code> (<code>1 1 auto</code>) 和 none (<code>0 0 auto</code>)。</p><p>建议优先使用这个属性，而不是单独写三个分离的属性，因为浏览器会推算相关值。</p><h4 id="align-self-属性"><a href="#align-self-属性" class="headerlink" title="align-self 属性"></a>align-self 属性</h4><p><code>align-self</code>属性允许单个项目有与其他项目不一样的对齐方式，可覆盖<code>align-items</code>属性。默认值为<code>auto</code>，表示继承父元素的<code>align-items</code>属性，如果没有父元素，则等同于<code>stretch</code>。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">align-self</span>: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/assets/bg2015071016.png" alt="bg2015071016"></p><p>该属性可能取 6 个值，除了 auto，其他都与 align-items 属性完全一致。</p><p>文章转载自 <a href="https://www.ruanyifeng.com/blog/2015/07/flex-grammar.html">阮一峰的网络日志</a></p>]]></content>
      
      
      <categories>
          
          <category> Css </category>
          
          <category> flex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git的学习教程</title>
      <link href="/2022/01/11/%E7%89%88%E6%9C%AC%E5%B7%A5%E5%85%B7/Git%E6%95%99%E7%A8%8B/"/>
      <url>/2022/01/11/%E7%89%88%E6%9C%AC%E5%B7%A5%E5%85%B7/Git%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。</p><p>Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。</p><h4 id="创建版本库"><a href="#创建版本库" class="headerlink" title="创建版本库"></a>创建版本库</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git init</span></span><br><span class="line">Initialized empty Git repository in /Users/michael/learngit/.git/</span><br></pre></td></tr></table></figure><h4 id="添加到暂存区"><a href="#添加到暂存区" class="headerlink" title="添加到暂存区"></a>添加到暂存区</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add readme.txt</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加全部文件</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add .</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add -A</span></span><br></pre></td></tr></table></figure><h4 id="提交到本地库"><a href="#提交到本地库" class="headerlink" title="提交到本地库"></a>提交到本地库</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -m <span class="string">&quot;wrote a readme file&quot;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加多个文件</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add file1.txt</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add file2.txt file3.txt</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -m <span class="string">&quot;add 3 files.&quot;</span></span></span><br><span class="line"></span><br><span class="line">[master (root-commit) eaadf4e] wrote a readme file</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 readme.txt</span><br></pre></td></tr></table></figure><h4 id="查看提交状态"><a href="#查看提交状态" class="headerlink" title="查看提交状态"></a>查看提交状态</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line"><span class="comment"># 精简查看行数加-s参数</span></span><br><span class="line">$ git status -s</span><br></pre></td></tr></table></figure><h4 id="对比文件"><a href="#对比文件" class="headerlink" title="对比文件"></a>对比文件</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff &lt;file&gt;</span><br></pre></td></tr></table></figure><h4 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span></span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br><span class="line"><span class="comment"># 如果嫌输出信息太多，看得眼花缭乱的，可以试试加上--pretty=oneline参数</span></span><br><span class="line">$ git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line">58af5f5d49d9d8666d77bb613cb9dc24012cf37a (HEAD -&gt; master, origin/master, origin/HEAD) add test.txt</span><br><span class="line">e88f93d407e28363d0b390c2fa410c4e25cfd893 remove test.txt</span><br><span class="line">b3f7a63ad3701856347c743fde406ed1dfff2673 add test.txt</span><br><span class="line">65a1855363347f1bf5bfd95fddaf78634f94946e Git tracks changes of files</span><br><span class="line">51e88be7d9c7c3e6ca531086c9f7cffdba3adfd4 git tracks changes</span><br><span class="line">e14d050157d575c3e26bd5f783529b5b8536bf4c understand how stage works</span><br><span class="line">d6ca7e5a282214dc236e11bf7e9c471397fa87fa append GPL</span><br><span class="line">a0fbf8b959ce54cb0ba0e18a586fc9c7664968e1 add distributed</span><br><span class="line">2c012850ecfa5a46b079d9fe5aeb244d95441182 wrote a readme file</span><br><span class="line">a8752ebc7948638eae5c6fe3c952af9a362e32f4 Initial commit</span><br></pre></td></tr></table></figure><h4 id="回退版本"><a href="#回退版本" class="headerlink" title="回退版本"></a>回退版本</h4><p>首先，Git 必须知道当前版本是哪个版本，在 Git 中，用<code>HEAD</code>表示当前版本，也就是最新的提交<code>1094adb...</code>（注意我的提交 ID 和你的肯定不一样），上一个版本就是<code>HEAD^</code>，上上一个版本就是<code>HEAD^^</code>，当然往上 100 个版本写 100 个<code>^</code>比较容易数不过来，所以写成<code>HEAD~100</code>。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard HEAD^</span><br><span class="line"><span class="comment"># 回退到某一个提交</span></span><br><span class="line">$ git reset --hard &lt;commitid&gt;</span><br><span class="line">$ git reset --hard 1094a</span><br></pre></td></tr></table></figure><h4 id="查看历史提交-HEAD"><a href="#查看历史提交-HEAD" class="headerlink" title="查看历史提交 HEAD"></a>查看历史提交 HEAD</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog</span><br><span class="line">e475afc HEAD@&#123;1&#125;: reset: moving to HEAD^</span><br><span class="line">1094adb (HEAD -&gt; master) HEAD@&#123;2&#125;: commit: append GPL</span><br><span class="line">e475afc HEAD@&#123;3&#125;: commit: add distributed</span><br><span class="line">eaadf4e HEAD@&#123;4&#125;: commit (initial): wrote a readme file</span><br></pre></td></tr></table></figure><h4 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- &lt;filename&gt;</span><br></pre></td></tr></table></figure><p><code>git checkout -- file</code>命令中的<code>--</code>很重要，没有<code>--</code>，就变成了“切换到另一个分支”的命令，我们在后面的分支管理中会再次遇到<code>git checkout</code>命令。</p><h4 id="撤销暂存区"><a href="#撤销暂存区" class="headerlink" title="撤销暂存区"></a>撤销暂存区</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD &lt;filename&gt;Unstaged changes after reset:Mreadme.txt</span><br></pre></td></tr></table></figure><h4 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">rm</span> test.txtrm <span class="string">&#x27;test.txt&#x27;</span>$ git commit -m <span class="string">&quot;remove test.txt&quot;</span>[master d46f35e] remove test.txt 1 file changed, 1 deletion(-) delete mode 100644 test.txt</span><br></pre></td></tr></table></figure><p>另一种情况是删错了，因为版本库里还有呢，所以可以很轻松地把误删的文件恢复到最新版本：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- test.txt</span><br></pre></td></tr></table></figure><h4 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h4><p><strong>1、重新生成 ssh</strong> (连续回车三次)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;youremail@example.com&quot;</span></span><br></pre></td></tr></table></figure><p><strong>2、查看你的 public key</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#以ssh-rsa 开头，以账号的注册邮箱结尾的</span></span><br><span class="line">$ <span class="built_in">cat</span> ~/.ssh/id_rsa.pub</span><br><span class="line"></span><br><span class="line"><span class="comment"># 详细信息如下</span></span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC0HnLUqRbt0/pi0rVvJw/NWTrpQS9aKEMj+jK77v5dRiEHzJ6q46nx3rmtRSks5sjuldOu3d5MY+4UyhoECB3fwGn9v3IAzNWBZX4hS9BpHb6QTPKC2G79dO/0FqUX2d/vc9ua7nzicsa/ncz+S/hXCa3Uds2fNR7Y3g2kTsXF6pGZg1vXfKLqpvKulRoSdcgSqYzwT+LajbfwhTr75I4FVJVnN5loodX/B9mNoz7wprAxHqV7JOLzaOGG+QjfIeuQKvis9wsO4k4pTaslcFOQC+CzMKsiBeUZmAD+cDL08cfLvWd3PWYGUqUR8Ujxuy7LmPoqzUS0EAZbyQH/HqTl 1043732762@qq.com</span><br></pre></td></tr></table></figure><p><strong>3、将它添加到码云，添加地址 <a href="https://gitee.com/profile/sshkeys">https://gitee.com/profile/sshkeys</a></strong></p><h4 id="添加远程库"><a href="#添加远程库" class="headerlink" title="添加远程库"></a>添加远程库</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加远程仓库</span></span><br><span class="line">$ git remote add origin git@github.com:michaelliao/learngit.git# 提交到远程仓库$ git push -u origin masterCounting objects: 20, done.Delta compression using up to 4 threads.Compressing objects: 100% (15/15), done.Writing objects: 100% (20/20), 1.64 KiB | 560.00 KiB/s, done.Total 20 (delta 5), reused 0 (delta 0)remote: Resolving deltas: 100% (5/5), done.To github.com:michaelliao/learngit.git * [new branch]      master -&gt; masterBranch <span class="string">&#x27;master&#x27;</span> <span class="built_in">set</span> up to track remote branch <span class="string">&#x27;master&#x27;</span> from <span class="string">&#x27;origin&#x27;</span>.</span><br></pre></td></tr></table></figure><p>把本地库的内容推送到远程，用<code>git push</code>命令，实际上是把当前分支<code>master</code>推送到远程。</p><p>由于远程库是空的，我们第一次推送<code>master</code>分支时，加上了<code>-u</code>参数，Git 不但会把本地的<code>master</code>分支内容推送的远程新的<code>master</code>分支，还会把本地的<code>master</code>分支和远程的<code>master</code>分支关联起来，在以后的推送或者拉取时就可以简化命令。</p><p><strong>注意：如果推送失败需要将远程仓库和本地仓库同步一次</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull --rebase origin master</span><br></pre></td></tr></table></figure><h4 id="删除远程库"><a href="#删除远程库" class="headerlink" title="删除远程库"></a>删除远程库</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -vorigin  git@github.com:michaelliao/learn-git.git (fetch)origin  git@github.com:michaelliao/learn-git.git (push)</span><br></pre></td></tr></table></figure><p>此处的“删除”其实是解除了本地和远程的绑定关系，并不是物理上删除了远程库。远程库本身并没有任何改动。要真正删除远程库，需要登录到 GitHub，在后台页面找到删除按钮再删除。</p><h4 id="从远程库克隆"><a href="#从远程库克隆" class="headerlink" title="从远程库克隆"></a>从远程库克隆</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:michaelliao/gitskills.gitCloning into <span class="string">&#x27;gitskills&#x27;</span>...remote: Counting objects: 3, done.remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 3Receiving objects: 100% (3/3), <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure><h4 id="创建与切换分支"><a href="#创建与切换分支" class="headerlink" title="创建与切换分支"></a>创建与切换分支</h4><p>首先，我们创建<code>dev</code>分支，然后切换到<code>dev</code>分支：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b devSwitched to a new branch <span class="string">&#x27;dev&#x27;</span></span><br></pre></td></tr></table></figure><p><code>git checkout</code>命令加上<code>-b</code>参数表示创建并切换，相当于以下两条命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建分支$ git branch dev# 切换分支$ git checkout devSwitched to branch &#x27;dev&#x27;</span></span><br></pre></td></tr></table></figure><p>然后，用<code>git branch</code>命令查看当前分支：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch* dev  master</span><br></pre></td></tr></table></figure><p><code>git branch</code>命令会列出所有分支，当前分支前面会标一个<code>*</code>号。</p><h4 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge devUpdating d46f35e..b17d20eFast-forward readme.txt | 1 + 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><h4 id="git-switch"><a href="#git-switch" class="headerlink" title="git switch"></a>git switch</h4><p>我们注意到切换分支使用<code>git checkout &lt;branch&gt;</code>，而前面讲过的撤销修改则是<code>git checkout -- &lt;file&gt;</code>，同一个命令，有两种作用，确实有点令人迷惑。</p><p>实际上，切换分支这个动作，用<code>switch</code>更科学。因此，最新版本的 Git 提供了新的<code>git switch</code>命令来切换分支：</p><p>创建并切换到新的<code>dev</code>分支，可以使用：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch -c dev</span><br></pre></td></tr></table></figure><p>直接切换到已有的<code>master</code>分支，可以使用：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch master</span><br></pre></td></tr></table></figure><p>使用新的<code>git switch</code>命令，比<code>git checkout</code>要更容易理解。</p><p><strong>小结</strong></p><p>Git 鼓励大量使用分支：</p><p>查看分支：<code>git branch</code></p><p>创建分支：<code>git branch &lt;name&gt;</code></p><p>切换分支：<code>git checkout &lt;name&gt;</code>或者<code>git switch &lt;name&gt;</code></p><p>创建+切换分支：<code>git checkout -b &lt;name&gt;</code>或者<code>git switch -c &lt;name&gt;</code></p><p>合并某分支到当前分支：<code>git merge &lt;name&gt;</code></p><p>删除分支：<code>git branch -d &lt;name&gt;</code></p><h4 id="解决冲突"><a href="#解决冲突" class="headerlink" title="解决冲突"></a>解决冲突</h4><p>这种情况下，Git 无法执行“快速合并”，只能试图把各自的修改合并起来，但这种合并就可能会有冲突，我们试试看：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge feature1Auto-merging readme.txtCONFLICT (content): Merge conflict <span class="keyword">in</span> readme.txtAutomatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br></pre></td></tr></table></figure><p>果然冲突了！Git 告诉我们，<code>readme.txt</code>文件存在冲突，必须手动解决冲突后再提交。<code>git status</code>也可以告诉我们冲突的文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git statusOn branch masterYour branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by 2 commits.  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)You have unmerged paths.  (fix conflicts and run <span class="string">&quot;git commit&quot;</span>)  (use <span class="string">&quot;git merge --abort&quot;</span> to abort the merge)Unmerged paths:  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to mark resolution)both modified:   readme.txtno changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure><p>我们可以直接查看 readme.txt 的内容：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Git is a distributed version control system.Git is free software distributed under the GPL.Git has a mutable index called stage.Git tracks changes of files.&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEADCreating a new branch is quick <span class="built_in">&amp;</span> simple.=======Creating a new branch is quick AND simple.&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1</span><br></pre></td></tr></table></figure><p>Git 用<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>，<code>=======</code>，<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>标记出不同分支的内容，我们修改如下后保存：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Creating a new branch is quick and simple.</span><br></pre></td></tr></table></figure><p>再提交：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt $ git commit -m <span class="string">&quot;conflict fixed&quot;</span>[master cf810e4] conflict fixed</span><br></pre></td></tr></table></figure><p>用带参数的<code>git log</code>也可以看到分支的合并情况：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit*   cf810e4 (HEAD -&gt; master) conflict fixed|\  | * 14096d0 (feature1) AND simple* | 5dc6824 &amp; simple|/  * b17d20e branch <span class="built_in">test</span>* d46f35e (origin/master) remove test.txt* b84166e add test.txt* 519219b git tracks changes* e43a48b understand how stage works* 1094adb append GPL* e475afc add distributed* eaadf4e wrote a readme file</span><br></pre></td></tr></table></figure><p>最后，删除<code>feature1</code>分支：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d feature1Deleted branch feature1 (was 14096d0).</span><br></pre></td></tr></table></figure><p>用<code>git log --graph</code>命令可以看到分支合并图。</p><h4 id="分支管理策略"><a href="#分支管理策略" class="headerlink" title="分支管理策略"></a>分支管理策略</h4><p>通常，合并分支时，如果可能，Git 会用<code>Fast forward</code>模式，但这种模式下，删除分支后，会丢掉分支信息。</p><p>如果要强制禁用<code>Fast forward</code>模式，Git 就会在 merge 时生成一个新的 commit，这样，从分支历史上就可以看出分支信息。</p><p>下面我们实战一下<code>--no-ff</code>方式的<code>git merge</code>：</p><p>首先，仍然创建并切换<code>dev</code>分支：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch -c devSwitched to a new branch <span class="string">&#x27;dev&#x27;</span></span><br></pre></td></tr></table></figure><p>修改 readme.txt 文件，并提交一个新的 commit：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt $ git commit -m <span class="string">&quot;add merge&quot;</span>[dev f52c633] add merge 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><p>现在，我们切换回<code>master</code>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch masterSwitched to branch <span class="string">&#x27;master&#x27;</span></span><br></pre></td></tr></table></figure><p>准备合并<code>dev</code>分支，请注意<code>--no-ff</code>参数，表示禁用<code>Fast forward</code>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --no-ff -m <span class="string">&quot;merge with no-ff&quot;</span> devMerge made by the <span class="string">&#x27;recursive&#x27;</span> strategy. readme.txt | 1 + 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><p>因为本次合并要创建一个新的 commit，所以加上<code>-m</code>参数，把 commit 描述写进去。</p><p>合并后，我们用<code>git log</code>看看分支历史：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit*   e1e9c68 (HEAD -&gt; master) merge with no-ff|\  | * f52c633 (dev) add merge|/  *   cf810e4 conflict fixed...</span><br></pre></td></tr></table></figure><p>可以看到，不使用<code>Fast forward</code>模式，merge 后就像这样：</p><h4 id="分支策略"><a href="#分支策略" class="headerlink" title="分支策略"></a>分支策略</h4><p>在实际开发中，我们应该按照几个基本原则进行分支管理：</p><p>首先，<code>master</code>分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活；</p><p>那在哪干活呢？干活都在<code>dev</code>分支上，也就是说，<code>dev</code>分支是不稳定的，到某个时候，比如 1.0 版本发布时，再把<code>dev</code>分支合并到<code>master</code>上，在<code>master</code>分支发布 1.0 版本；</p><p>你和你的小伙伴们每个人都在<code>dev</code>分支上干活，每个人都有自己的分支，时不时地往<code>dev</code>分支上合并就可以了。</p><p>所以，团队合作的分支看起来就像这样：</p><h4 id="Bug-分支"><a href="#Bug-分支" class="headerlink" title="Bug 分支"></a>Bug 分支</h4><p>软件开发中，bug 就像家常便饭一样。有了 bug 就需要修复，在 Git 中，由于分支是如此的强大，所以，每个 bug 都可以通过一个新的临时分支来修复，修复后，合并分支，然后将临时分支删除。</p><p>当你接到一个修复一个代号 101 的 bug 的任务时，很自然地，你想创建一个分支<code>issue-101</code>来修复它，但是，等等，当前正在<code>dev</code>上进行的工作还没有提交：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git statusOn branch devChanges to be committed:  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)new file:   hello.pyChanges not staged <span class="keyword">for</span> commit:  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)modified:   readme.txt</span><br></pre></td></tr></table></figure><p>并不是你不想提交，而是工作只进行到一半，还没法提交，预计完成还需 1 天时间。但是，必须在两个小时内修复该 bug，怎么办？</p><p>幸好，Git 还提供了一个<code>stash</code>功能，可以把当前工作现场“储藏”起来，等以后恢复现场后继续工作：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stashSaved working directory and index state WIP on dev: f52c633 add merge</span><br></pre></td></tr></table></figure><p>现在，用<code>git status</code>查看工作区，就是干净的（除非有没有被 Git 管理的文件），因此可以放心地创建分支来修复 bug。</p><p>首先确定要在哪个分支上修复 bug，假定需要在<code>master</code>分支上修复，就从<code>master</code>创建临时分支：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout masterSwitched to branch <span class="string">&#x27;master&#x27;</span>Your branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by 6 commits.  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)$ git checkout -b issue-101Switched to a new branch <span class="string">&#x27;issue-101&#x27;</span></span><br></pre></td></tr></table></figure><p>现在修复 bug，需要把“Git is free software …”改为“Git is a free software …”，然后提交：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt $ git commit -m <span class="string">&quot;fix bug 101&quot;</span>[issue-101 4c805e2] fix bug 101 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>修复完成后，切换到<code>master</code>分支，并完成合并，最后删除<code>issue-101</code>分支：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch masterSwitched to branch <span class="string">&#x27;master&#x27;</span>Your branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by 6 commits.  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)$ git merge --no-ff -m <span class="string">&quot;merged bug fix 101&quot;</span> issue-101Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy. readme.txt | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>太棒了，原计划两个小时的 bug 修复只花了 5 分钟！现在，是时候接着回到<code>dev</code>分支干活了！</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch devSwitched to branch <span class="string">&#x27;dev&#x27;</span>$ git statusOn branch devnothing to commit, working tree clean</span><br></pre></td></tr></table></figure><p>工作区是干净的，刚才的工作现场存到哪去了？用<code>git stash list</code>命令看看：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash liststash@&#123;0&#125;: WIP on dev: f52c633 add merge</span><br></pre></td></tr></table></figure><p>工作现场还在，Git 把 stash 内容存在某个地方了，但是需要恢复一下，有两个办法：</p><p>一是用<code>git stash apply</code>恢复，但是恢复后，stash 内容并不删除，你需要用<code>git stash drop</code>来删除；</p><p>另一种方式是用<code>git stash pop</code>，恢复的同时把 stash 内容也删了：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash popOn branch devChanges to be committed:  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)new file:   hello.pyChanges not staged <span class="keyword">for</span> commit:  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)modified:   readme.txtDropped refs/stash@&#123;0&#125; (5d677e2ee266f39ea296182fb2354265b91b3b2a)</span><br></pre></td></tr></table></figure><p>再用<code>git stash list</code>查看，就看不到任何 stash 内容了：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br></pre></td></tr></table></figure><p>你可以多次 stash，恢复的时候，先用<code>git stash list</code>查看，然后恢复指定的 stash，用命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash apply stash@&#123;0&#125;</span><br></pre></td></tr></table></figure><p>在 master 分支上修复了 bug 后，我们要想一想，dev 分支是早期从 master 分支分出来的，所以，这个 bug 其实在当前 dev 分支上也存在。</p><p>那怎么在 dev 分支上修复同样的 bug？重复操作一次，提交不就行了？</p><p>有木有更简单的方法？</p><p>有！</p><p>同样的 bug，要在 dev 上修复，我们只需要把<code>4c805e2 fix bug 101</code>这个提交所做的修改“复制”到 dev 分支。注意：我们只想复制<code>4c805e2 fix bug 101</code>这个提交所做的修改，并不是把整个 master 分支 merge 过来。</p><p>为了方便操作，Git 专门提供了一个<code>cherry-pick</code>命令，让我们能复制一个特定的提交到当前分支：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch* dev  master$ git cherry-pick 4c805e2[master 1d4b803] fix bug 101 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure><p>Git 自动给 dev 分支做了一次提交，注意这次提交的 commit 是<code>1d4b803</code>，它并不同于 master 的<code>4c805e2</code>，因为这两个 commit 只是改动相同，但确实是两个不同的 commit。用<code>git cherry-pick</code>，我们就不需要在 dev 分支上手动再把修 bug 的过程重复一遍。</p><p>有些聪明的童鞋会想了，既然可以在 master 分支上修复 bug 后，在 dev 分支上可以“重放”这个修复过程，那么直接在 dev 分支上修复 bug，然后在 master 分支上“重放”行不行？当然可以，不过你仍然需要<code>git stash</code>命令保存现场，才能从 dev 分支切换到 master 分支。</p><p><strong>小结</strong></p><p>修复 bug 时，我们会通过创建新的 bug 分支进行修复，然后合并，最后删除；</p><p>当手头工作没有完成时，先把工作现场<code>git stash</code>一下，然后去修复 bug，修复后，再<code>git stash pop</code>，回到工作现场；</p><p>在 master 分支上修复的 bug，想要合并到当前 dev 分支，可以用<code>git cherry-pick &lt;commit&gt;</code>命令，把 bug 提交的修改“复制”到当前分支，避免重复劳动。</p><h4 id="Feature-分支"><a href="#Feature-分支" class="headerlink" title="Feature 分支"></a>Feature 分支</h4><p>软件开发中，总有无穷无尽的新的功能要不断添加进来。</p><p>添加一个新功能时，你肯定不希望因为一些实验性质的代码，把主分支搞乱了，所以，每添加一个新功能，最好新建一个 feature 分支，在上面开发，完成后，合并，最后，删除该 feature 分支。</p><p>现在，你终于接到了一个新任务：开发代号为 Vulcan 的新功能，该功能计划用于下一代星际飞船。</p><p>于是准备开发：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch -c feature-vulcanSwitched to a new branch <span class="string">&#x27;feature-vulcan&#x27;</span></span><br></pre></td></tr></table></figure><p>5 分钟后，开发完毕：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add vulcan.py$ git statusOn branch feature-vulcanChanges to be committed:  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)new file:   vulcan.py$ git commit -m <span class="string">&quot;add feature vulcan&quot;</span>[feature-vulcan 287773e] add feature vulcan 1 file changed, 2 insertions(+) create mode 100644 vulcan.py</span><br></pre></td></tr></table></figure><p>切回<code>dev</code>，准备合并：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch dev</span><br></pre></td></tr></table></figure><p>一切顺利的话，feature 分支和 bug 分支是类似的，合并，然后删除。</p><p>但是！</p><p>就在此时，接到上级命令，因经费不足，新功能必须取消！</p><p>虽然白干了，但是这个包含机密资料的分支还是必须就地销毁：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d feature-vulcanerror: The branch <span class="string">&#x27;feature-vulcan&#x27;</span> is not fully merged.If you are sure you want to delete it, run <span class="string">&#x27;git branch -D feature-vulcan&#x27;</span>.</span><br></pre></td></tr></table></figure><p>销毁失败。Git 友情提醒，<code>feature-vulcan</code>分支还没有被合并，如果删除，将丢失掉修改，如果要强行删除，需要使用大写的<code>-D</code>参数。。</p><p>现在我们强行删除：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -D feature-vulcanDeleted branch feature-vulcan (was 287773e).</span><br></pre></td></tr></table></figure><p>终于删除成功！</p><p><strong>小结</strong></p><p>开发一个新 feature，最好新建一个分支；</p><p>如果要丢弃一个没有被合并过的分支，可以通过<code>git branch -D &lt;name&gt;</code>强行删除。</p><h4 id="多人协作"><a href="#多人协作" class="headerlink" title="多人协作"></a>多人协作</h4><p>当你从远程仓库克隆时，实际上 Git 自动把本地的<code>master</code>分支和远程的<code>master</code>分支对应起来了，并且，远程仓库的默认名称是<code>origin</code>。</p><p>要查看远程库的信息，用<code>git remote</code>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remoteorigin</span><br></pre></td></tr></table></figure><p>或者，用<code>git remote -v</code>显示更详细的信息：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -vorigin  git@github.com:michaelliao/learngit.git (fetch)origin  git@github.com:michaelliao/learngit.git (push)</span><br></pre></td></tr></table></figure><p>上面显示了可以抓取和推送的<code>origin</code>的地址。如果没有推送权限，就看不到 push 的地址。</p><h4 id="推送分支"><a href="#推送分支" class="headerlink" title="推送分支"></a>推送分支</h4><p>推送分支，就是把该分支上的所有本地提交推送到远程库。推送时，要指定本地分支，这样，Git 就会把该分支推送到远程库对应的远程分支上：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure><p>如果要推送其他分支，比如<code>dev</code>，就改成：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin dev</span><br></pre></td></tr></table></figure><p>但是，并不是一定要把本地分支往远程推送，那么，哪些分支需要推送，哪些不需要呢？</p><ul><li><code>master</code>分支是主分支，因此要时刻与远程同步；</li><li><code>dev</code>分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；</li><li>bug 分支只用于在本地修复 bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个 bug；</li><li>feature 分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。</li></ul><p>总之，就是在 Git 中，分支完全可以在本地自己藏着玩，是否推送，视你的心情而定！</p><h4 id="抓取分支"><a href="#抓取分支" class="headerlink" title="抓取分支"></a>抓取分支</h4><p>多人协作时，大家都会往<code>master</code>和<code>dev</code>分支上推送各自的修改。</p><p>现在，模拟一个你的小伙伴，可以在另一台电脑（注意要把 SSH Key 添加到 GitHub）或者同一台电脑的另一个目录下克隆：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:michaelliao/learngit.gitCloning into <span class="string">&#x27;learngit&#x27;</span>...remote: Counting objects: 40, done.remote: Compressing objects: 100% (21/21), done.remote: Total 40 (delta 14), reused 40 (delta 14), pack-reused 0Receiving objects: 100% (40/40), done.Resolving deltas: 100% (14/14), <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure><p>当你的小伙伴从远程库 clone 时，默认情况下，你的小伙伴只能看到本地的<code>master</code>分支。不信可以用<code>git branch</code>命令看看：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch* master</span><br></pre></td></tr></table></figure><p>现在，你的小伙伴要在<code>dev</code>分支上开发，就必须创建远程<code>origin</code>的<code>dev</code>分支到本地，于是他用这个命令创建本地<code>dev</code>分支：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b dev origin/dev</span><br></pre></td></tr></table></figure><p>现在，他就可以在<code>dev</code>上继续修改，然后，时不时地把<code>dev</code>分支<code>push</code>到远程：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add env.txt$ git commit -m <span class="string">&quot;add env&quot;</span>[dev 7a5e5dd] add <span class="built_in">env</span> 1 file changed, 1 insertion(+) create mode 100644 env.txt$ git push origin devCounting objects: 3, done.Delta compression using up to 4 threads.Compressing objects: 100% (2/2), done.Writing objects: 100% (3/3), 308 bytes | 308.00 KiB/s, done.Total 3 (delta 0), reused 0 (delta 0)To github.com:michaelliao/learngit.git   f52c633..7a5e5dd  dev -&gt; dev</span><br></pre></td></tr></table></figure><p>你的小伙伴已经向<code>origin/dev</code>分支推送了他的提交，而碰巧你也对同样的文件作了修改，并试图推送：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> env.txtenv$ git add env.txt$ git commit -m <span class="string">&quot;add new env&quot;</span>[dev 7bd91f1] add new <span class="built_in">env</span> 1 file changed, 1 insertion(+) create mode 100644 env.txt$ git push origin devTo github.com:michaelliao/learngit.git ! [rejected]        dev -&gt; dev (non-fast-forward)error: failed to push some refs to <span class="string">&#x27;git@github.com:michaelliao/learngit.git&#x27;</span>hint: Updates were rejected because the tip of your current branch is behindhint: its remote counterpart. Integrate the remote changes (e.g.hint: <span class="string">&#x27;git pull ...&#x27;</span>) before pushing again.hint: See the <span class="string">&#x27;Note about fast-forwards&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;git push --help&#x27;</span> <span class="keyword">for</span> details.</span><br></pre></td></tr></table></figure><p>推送失败，因为你的小伙伴的最新提交和你试图推送的提交有冲突，解决办法也很简单，Git 已经提示我们，先用<code>git pull</code>把最新的提交从<code>origin/dev</code>抓下来，然后，在本地合并，解决冲突，再推送：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pullThere is no tracking information <span class="keyword">for</span> the current branch.Please specify <span class="built_in">which</span> branch you want to merge with.See git-pull(1) <span class="keyword">for</span> details.    git pull &lt;remote&gt; &lt;branch&gt;If you wish to <span class="built_in">set</span> tracking information <span class="keyword">for</span> this branch you can <span class="keyword">do</span> so with:    git branch --set-upstream-to=origin/&lt;branch&gt; dev</span><br></pre></td></tr></table></figure><p><code>git pull</code>也失败了，原因是没有指定本地<code>dev</code>分支与远程<code>origin/dev</code>分支的链接，根据提示，设置<code>dev</code>和<code>origin/dev</code>的链接：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch --set-upstream-to=origin/dev devBranch <span class="string">&#x27;dev&#x27;</span> <span class="built_in">set</span> up to track remote branch <span class="string">&#x27;dev&#x27;</span> from <span class="string">&#x27;origin&#x27;</span>.</span><br></pre></td></tr></table></figure><p>再 pull：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pullAuto-merging env.txtCONFLICT (add/add): Merge conflict <span class="keyword">in</span> env.txtAutomatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br></pre></td></tr></table></figure><p>这回<code>git pull</code>成功，但是合并有冲突，需要手动解决，解决的方法和分支管理中的<a href="http://www.liaoxuefeng.com/wiki/896043488029600/900004111093344">解决冲突</a>完全一样。解决后，提交，再 push：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m <span class="string">&quot;fix env conflict&quot;</span>[dev 57c53ab] fix <span class="built_in">env</span> conflict$ git push origin devCounting objects: 6, done.Delta compression using up to 4 threads.Compressing objects: 100% (4/4), done.Writing objects: 100% (6/6), 621 bytes | 621.00 KiB/s, done.Total 6 (delta 0), reused 0 (delta 0)To github.com:michaelliao/learngit.git   7a5e5dd..57c53ab  dev -&gt; dev</span><br></pre></td></tr></table></figure><p>因此，多人协作的工作模式通常是这样：</p><ol><li>首先，可以试图用<code>git push origin &lt;branch-name&gt;</code>推送自己的修改；</li><li>如果推送失败，则因为远程分支比你的本地更新，需要先用<code>git pull</code>试图合并；</li><li>如果合并有冲突，则解决冲突，并在本地提交；</li><li>没有冲突或者解决掉冲突后，再用<code>git push origin &lt;branch-name&gt;</code>推送就能成功！</li></ol><p>如果<code>git pull</code>提示<code>no tracking information</code>，则说明本地分支和远程分支的链接关系没有创建，用命令<code>git branch --set-upstream-to &lt;branch-name&gt; origin/&lt;branch-name&gt;</code>。</p><p>这就是多人协作的工作模式，一旦熟悉了，就非常简单。</p><p><strong>小结</strong></p><ul><li>查看远程库信息，使用<code>git remote -v</code>；</li><li>本地新建的分支如果不推送到远程，对其他人就是不可见的；</li><li>从本地推送分支，使用<code>git push origin branch-name</code>，如果推送失败，先用<code>git pull</code>抓取远程的新提交；</li><li>在本地创建和远程分支对应的分支，使用<code>git checkout -b branch-name origin/branch-name</code>，本地和远程分支的名称最好一致；</li><li>建立本地分支和远程分支的关联，使用<code>git branch --set-upstream branch-name origin/branch-name</code>；</li><li>从远程抓取分支，使用<code>git pull</code>，如果有冲突，要先处理冲突。</li></ul><h4 id="Rebase"><a href="#Rebase" class="headerlink" title="Rebase"></a>Rebase</h4><p>在上一节我们看到了，多人在同一个分支上协作时，很容易出现冲突。即使没有冲突，后 push 的童鞋不得不先 pull，在本地合并，然后才能 push 成功。</p><p>每次合并再 push 后，分支变成了这样：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit* d1be385 (HEAD -&gt; master, origin/master) init hello*   e5e69f1 Merge branch <span class="string">&#x27;dev&#x27;</span>|\  | *   57c53ab (origin/dev, dev) fix <span class="built_in">env</span> conflict| |\  | | * 7a5e5dd add <span class="built_in">env</span>| * | 7bd91f1 add new <span class="built_in">env</span>| |/  * |   12a631b merged bug fix 101|\ \  | * | 4c805e2 fix bug 101|/ /  * |   e1e9c68 merge with no-ff|\ \  | |/  | * f52c633 add merge|/  *   cf810e4 conflict fixed</span><br></pre></td></tr></table></figure><p>总之看上去很乱，有强迫症的童鞋会问：为什么 Git 的提交历史不能是一条干净的直线？</p><p>其实是可以做到的！</p><p>Git 有一种称为 rebase 的操作，有人把它翻译成“变基”。</p><p>先不要随意展开想象。我们还是从实际问题出发，看看怎么把分叉的提交变成直线。</p><p>在和远程分支同步后，我们对<code>hello.py</code>这个文件做了两次提交。用<code>git log</code>命令看看：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit* 582d922 (HEAD -&gt; master) add author* 8875536 add comment* d1be385 (origin/master) init hello*   e5e69f1 Merge branch <span class="string">&#x27;dev&#x27;</span>|\  | *   57c53ab (origin/dev, dev) fix <span class="built_in">env</span> conflict| |\  | | * 7a5e5dd add <span class="built_in">env</span>| * | 7bd91f1 add new <span class="built_in">env</span>...</span><br></pre></td></tr></table></figure><p>注意到 Git 用<code>(HEAD -&gt; master)</code>和<code>(origin/master)</code>标识出当前分支的 HEAD 和远程 origin 的位置分别是<code>582d922 add author</code>和<code>d1be385 init hello</code>，本地分支比远程分支快两个提交。</p><p>现在我们尝试推送本地分支：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin masterTo github.com:michaelliao/learngit.git ! [rejected]        master -&gt; master (fetch first)error: failed to push some refs to <span class="string">&#x27;git@github.com:michaelliao/learngit.git&#x27;</span>hint: Updates were rejected because the remote contains work that you dohint: not have locally. This is usually caused by another repository pushinghint: to the same ref. You may want to first integrate the remote changeshint: (e.g., <span class="string">&#x27;git pull ...&#x27;</span>) before pushing again.hint: See the <span class="string">&#x27;Note about fast-forwards&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;git push --help&#x27;</span> <span class="keyword">for</span> details.</span><br></pre></td></tr></table></figure><p>很不幸，失败了，这说明有人先于我们推送了远程分支。按照经验，先 pull 一下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pullremote: Counting objects: 3, done.remote: Compressing objects: 100% (1/1), done.remote: Total 3 (delta 1), reused 3 (delta 1), pack-reused 0Unpacking objects: 100% (3/3), done.From github.com:michaelliao/learngit   d1be385..f005ed4  master     -&gt; origin/master * [new tag]         v1.0       -&gt; v1.0Auto-merging hello.pyMerge made by the <span class="string">&#x27;recursive&#x27;</span> strategy. hello.py | 1 + 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><p>再用<code>git status</code>看看状态：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git statusOn branch masterYour branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by 3 commits.  (use <span class="string">&quot;git push&quot;</span> to publish your <span class="built_in">local</span> commits)nothing to commit, working tree clean</span><br></pre></td></tr></table></figure><p>加上刚才合并的提交，现在我们本地分支比远程分支超前 3 个提交。</p><p>用<code>git log</code>看看：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit*   e0ea545 (HEAD -&gt; master) Merge branch <span class="string">&#x27;master&#x27;</span> of github.com:michaelliao/learngit|\  | * f005ed4 (origin/master) <span class="built_in">set</span> <span class="built_in">exit</span>=1* | 582d922 add author* | 8875536 add comment|/  * d1be385 init hello...</span><br></pre></td></tr></table></figure><p>对强迫症童鞋来说，现在事情有点不对头，提交历史分叉了。如果现在把本地分支 push 到远程，有没有问题？</p><p>有！</p><p>什么问题？</p><p>不好看！</p><p>有没有解决方法？</p><p>有！</p><p>这个时候，rebase 就派上了用场。我们输入命令<code>git rebase</code>试试：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebaseFirst, rewinding <span class="built_in">head</span> to replay your work on top of it...Applying: add commentUsing index info to reconstruct a base tree...Mhello.pyFalling back to patching base and 3-way merge...Auto-merging hello.pyApplying: add authorUsing index info to reconstruct a base tree...Mhello.pyFalling back to patching base and 3-way merge...Auto-merging hello.py</span><br></pre></td></tr></table></figure><p>输出了一大堆操作，到底是啥效果？再用<code>git log</code>看看：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit* 7e61ed4 (HEAD -&gt; master) add author* 3611cfe add comment* f005ed4 (origin/master) <span class="built_in">set</span> <span class="built_in">exit</span>=1* d1be385 init hello...</span><br></pre></td></tr></table></figure><p>原本分叉的提交现在变成一条直线了！这种神奇的操作是怎么实现的？其实原理非常简单。我们注意观察，发现 Git 把我们本地的提交“挪动”了位置，放到了<code>f005ed4 (origin/master) set exit=1</code>之后，这样，整个提交历史就成了一条直线。rebase 操作前后，最终的提交内容是一致的，但是，我们本地的 commit 修改内容已经变化了，它们的修改不再基于<code>d1be385 init hello</code>，而是基于<code>f005ed4 (origin/master) set exit=1</code>，但最后的提交<code>7e61ed4</code>内容是一致的。</p><p>这就是 rebase 操作的特点：把分叉的提交历史“整理”成一条直线，看上去更直观。缺点是本地的分叉提交已经被修改过了。</p><p>最后，通过 push 操作把本地分支推送到远程：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mac:~/learngit michael$ git push origin masterCounting objects: 6, done.Delta compression using up to 4 threads.Compressing objects: 100% (5/5), done.Writing objects: 100% (6/6), 576 bytes | 576.00 KiB/s, done.Total 6 (delta 2), reused 0 (delta 0)remote: Resolving deltas: 100% (2/2), completed with 1 <span class="built_in">local</span> object.To github.com:michaelliao/learngit.git   f005ed4..7e61ed4  master -&gt; master</span><br></pre></td></tr></table></figure><p>再用<code>git log</code>看看效果：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit* 7e61ed4 (HEAD -&gt; master, origin/master) add author* 3611cfe add comment* f005ed4 <span class="built_in">set</span> <span class="built_in">exit</span>=1* d1be385 init hello...</span><br></pre></td></tr></table></figure><p>远程分支的提交历史也是一条直线。</p><p><strong>小结</strong></p><ul><li>rebase 操作可以把本地未 push 的分叉提交历史整理成直线；</li><li>rebase 的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比。</li></ul><h4 id="创建标签"><a href="#创建标签" class="headerlink" title="创建标签"></a>创建标签</h4><p>在 Git 中打标签非常简单，首先，切换到需要打标签的分支上：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch* dev  master$ git checkout masterSwitched to branch <span class="string">&#x27;master&#x27;</span></span><br></pre></td></tr></table></figure><p>然后，敲命令<code>git tag &lt;name&gt;</code>就可以打一个新标签：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag v1.0</span><br></pre></td></tr></table></figure><p>可以用命令<code>git tag</code>查看所有标签：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tagv1.0</span><br></pre></td></tr></table></figure><p>默认标签是打在最新提交的 commit 上的。有时候，如果忘了打标签，比如，现在已经是周五了，但应该在周一打的标签没有打，怎么办？</p><p>方法是找到历史提交的 commit id，然后打上就可以了：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --pretty=oneline --abbrev-commit12a631b (HEAD -&gt; master, tag: v1.0, origin/master) merged bug fix 1014c805e2 fix bug 101e1e9c68 merge with no-fff52c633 add mergecf810e4 conflict fixed5dc6824 &amp; simple14096d0 AND simpleb17d20e branch testd46f35e remove test.txtb84166e add test.txt519219b git tracks changese43a48b understand how stage works1094adb append GPLe475afc add distributedeaadf4e wrote a readme file</span><br></pre></td></tr></table></figure><p>比方说要对<code>add merge</code>这次提交打标签，它对应的 commit id 是<code>f52c633</code>，敲入命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag v0.9 f52c633</span><br></pre></td></tr></table></figure><p>再用命令<code>git tag</code>查看标签：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tagv0.9v1.0</span><br></pre></td></tr></table></figure><p>注意，标签不是按时间顺序列出，而是按字母排序的。可以用<code>git show &lt;tagname&gt;</code>查看标签信息：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git show v0.9commit f52c63349bc3c1593499807e5c8e972b82c8f286 (tag: v0.9)Author: Michael Liao &lt;askxuefeng@gmail.com&gt;Date:   Fri May 18 21:56:54 2018 +0800    add mergediff --git a/readme.txt b/readme.txt...</span><br></pre></td></tr></table></figure><p>可以看到，<code>v0.9</code>确实打在<code>add merge</code>这次提交上。</p><p>还可以创建带有说明的标签，用<code>-a</code>指定标签名，<code>-m</code>指定说明文字：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v0.1 -m <span class="string">&quot;version 0.1 released&quot;</span> 1094adb</span><br></pre></td></tr></table></figure><p>用命令<code>git show &lt;tagname&gt;</code>可以看到说明文字：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git show v0.1tag v0.1Tagger: Michael Liao &lt;askxuefeng@gmail.com&gt;Date:   Fri May 18 22:48:43 2018 +0800version 0.1 releasedcommit 1094adb7b9b3807259d8cb349e7df1d4d6477073 (tag: v0.1)Author: Michael Liao &lt;askxuefeng@gmail.com&gt;Date:   Fri May 18 21:06:15 2018 +0800    append GPLdiff --git a/readme.txt b/readme.txt...</span><br></pre></td></tr></table></figure><p>注意：标签总是和某个 commit 挂钩。如果这个 commit 既出现在 master 分支，又出现在 dev 分支，那么在这两个分支上都可以看到这个标签。</p><p><strong>小结</strong></p><ul><li>命令<code>git tag &lt;tagname&gt;</code>用于新建一个标签，默认为<code>HEAD</code>，也可以指定一个 commit id；</li><li>命令<code>git tag -a &lt;tagname&gt; -m &quot;blablabla...&quot;</code>可以指定标签信息；</li><li>命令<code>git tag</code>可以查看所有标签。</li></ul><h4 id="操作标签"><a href="#操作标签" class="headerlink" title="操作标签"></a>操作标签</h4><p>如果标签打错了，也可以删除：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d v0.1Deleted tag <span class="string">&#x27;v0.1&#x27;</span> (was f15b0dd)</span><br></pre></td></tr></table></figure><p>因为创建的标签都只存储在本地，不会自动推送到远程。所以，打错的标签可以在本地安全删除。</p><p>如果要推送某个标签到远程，使用命令<code>git push origin &lt;tagname&gt;</code>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin v1.0Total 0 (delta 0), reused 0 (delta 0)To github.com:michaelliao/learngit.git * [new tag]         v1.0 -&gt; v1.0</span><br></pre></td></tr></table></figure><p>或者，一次性推送全部尚未推送到远程的本地标签：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin --tagsTotal 0 (delta 0), reused 0 (delta 0)To github.com:michaelliao/learngit.git * [new tag]         v0.9 -&gt; v0.9</span><br></pre></td></tr></table></figure><p>如果标签已经推送到远程，要删除远程标签就麻烦一点，先从本地删除：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d v0.9Deleted tag <span class="string">&#x27;v0.9&#x27;</span> (was f52c633)</span><br></pre></td></tr></table></figure><p>然后，从远程删除。删除命令也是 push，但是格式如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin :refs/tags/v0.9To github.com:michaelliao/learngit.git - [deleted]         v0.9</span><br></pre></td></tr></table></figure><p>要看看是否真的从远程库删除了标签，可以登陆 GitHub 查看。</p><p><strong>小结</strong></p><ul><li>命令<code>git push origin &lt;tagname&gt;</code>可以推送一个本地标签；</li><li>命令<code>git push origin --tags</code>可以推送全部未推送过的本地标签；</li><li>命令<code>git tag -d &lt;tagname&gt;</code>可以删除一个本地标签；</li><li>命令<code>git push origin :refs/tags/&lt;tagname&gt;</code>可以删除一个远程标签。</li></ul><h4 id="配置别名"><a href="#配置别名" class="headerlink" title="配置别名"></a>配置别名</h4><p>有没有经常敲错命令？比如<code>git status</code>？<code>status</code>这个单词真心不好记。</p><p>如果敲<code>git st</code>就表示<code>git status</code>那就简单多了，当然这种偷懒的办法我们是极力赞成的。</p><p>我们只需要敲一行命令，告诉 Git，以后<code>st</code>就表示<code>status</code>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.st status</span><br></pre></td></tr></table></figure><p>好了，现在敲<code>git st</code>看看效果。</p><p>当然还有别的命令可以简写，很多人都用<code>co</code>表示<code>checkout</code>，<code>ci</code>表示<code>commit</code>，<code>br</code>表示<code>branch</code>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.co checkout$ git config --global alias.ci commit$ git config --global alias.br branch</span><br></pre></td></tr></table></figure><p>以后提交就可以简写成：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git ci -m <span class="string">&quot;bala bala bala...&quot;</span></span><br></pre></td></tr></table></figure><p><code>--global</code>参数是全局参数，也就是这些命令在这台电脑的所有 Git 仓库下都有用。</p><p>在<a href="https://www.liaoxuefeng.com/wiki/896043488029600/897889638509536">撤销修改</a>一节中，我们知道，命令<code>git reset HEAD file</code>可以把暂存区的修改撤销掉（unstage），重新放回工作区。既然是一个 unstage 操作，就可以配置一个<code>unstage</code>别名：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.unstage <span class="string">&#x27;reset HEAD&#x27;</span></span><br></pre></td></tr></table></figure><p>当你敲入命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git unstage test.py</span><br></pre></td></tr></table></figure><p>实际上 Git 执行的是：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD test.py</span><br></pre></td></tr></table></figure><p>配置一个<code>git last</code>，让其显示最后一次提交信息：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.last <span class="string">&#x27;log -1&#x27;</span></span><br></pre></td></tr></table></figure><p>这样，用<code>git last</code>就能显示最近一次的提交：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git lastcommit adca45d317e6d8a4b23f9811c3d7b7f0f180bfe2Merge: bd6ae48 291bea8Author: Michael Liao &lt;askxuefeng@gmail.com&gt;Date:   Thu Aug 22 22:49:22 2013 +0800    merge &amp; fix hello.py</span><br></pre></td></tr></table></figure><p>甚至还有人丧心病狂地把<code>lg</code>配置成了：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.lg <span class="string">&quot;log --color --graph --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27; --abbrev-commit&quot;</span></span><br></pre></td></tr></table></figure><p>来看看<code>git lg</code>的效果：</p><p>为什么不早点告诉我？别激动，咱不是为了多记几个英文单词嘛！</p><h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><p>配置 Git 的时候，加上<code>--global</code>是针对当前用户起作用的，如果不加，那只针对当前的仓库起作用。</p><p>配置文件放哪了？每个仓库的 Git 配置文件都放在<code>.git/config</code>文件中：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> .git/config [core]    repositoryformatversion = 0    filemode = <span class="literal">true</span>    bare = <span class="literal">false</span>    logallrefupdates = <span class="literal">true</span>    ignorecase = <span class="literal">true</span>    precomposeunicode = <span class="literal">true</span>[remote <span class="string">&quot;origin&quot;</span>]    url = git@github.com:michaelliao/learngit.git    fetch = +refs/heads/*:refs/remotes/origin/*[branch <span class="string">&quot;master&quot;</span>]    remote = origin    merge = refs/heads/master[<span class="built_in">alias</span>]    last = <span class="built_in">log</span> -1</span><br></pre></td></tr></table></figure><p>别名就在<code>[alias]</code>后面，要删除别名，直接把对应的行删掉即可。</p><p>而当前用户的 Git 配置文件放在用户主目录下的一个隐藏文件<code>.gitconfig</code>中：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> .gitconfig[<span class="built_in">alias</span>]    co = checkout    ci = commit    br = branch    st = status[user]    name = Your Name    email = your@email.com</span><br></pre></td></tr></table></figure><p>配置别名也可以直接修改这个文件，如果改错了，可以删掉文件重新通过命令配置。</p><p><strong>小结</strong></p><p>给 Git 配置好别名，就可以输入命令时偷个懒。我们鼓励偷懒。</p>]]></content>
      
      
      <categories>
          
          <category> 版本管理 </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
